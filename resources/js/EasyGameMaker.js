var EasyGameMakerLibrary=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=62)}([function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var ObjectSelectorDefinition_1=__webpack_require__(4),ObjectSelectorType_1=__webpack_require__(6),Shape_1=__webpack_require__(12),Color_1=__webpack_require__(2),RenderType_1=__webpack_require__(14),BackgroundType_1=__webpack_require__(15),EventActionType_1=__webpack_require__(7),AudioSourceType_1=__webpack_require__(23),BlockType_1=__webpack_require__(13),Util=function(){function Util(){}return Util.prototype.degreesToRadians=function(e){return e*Math.PI/180},Util.prototype.isEngineVersionCompatible=function(e,t){if("snapshot"==e||"snapshot"==t)return null;var i=this.splitEngineVersion(e),n=this.splitEngineVersion(t);return i.major==n.major&&(i.minor==n.minor&&!(Number(i.patch)>Number(n.patch)))},Util.prototype.splitEngineVersion=function(e){var t=e.substring(1).split(".");return{major:t[0],minor:t[1],patch:t[2]}},Util.prototype.isVersionLessThan=function(e,t){if("snapshot"==e)return!1;if("snapshot"==t)return!0;var i=this.splitEngineVersion(e),n=this.splitEngineVersion(t);return Number(i.major)<Number(n.major)||!(Number(i.major)>Number(n.major))&&(Number(i.minor)<Number(n.minor)||!(Number(i.minor)>Number(n.minor))&&Number(i.patch)<Number(n.patch))},Util.prototype.buildTimestamp=function(){return(new Date).toISOString().split(".")[0].replace("T","_").replace(/:/g,"")},Util.prototype.arrayFromJSON=function(e,t,i){if(null==e)return null;var n=new Array;return e.forEach((function(e){return n.push(t(e,i))})),n},Util.prototype.arrayToJSON=function(e){if(null==e)return null;var t=new Array;return e.forEach((function(e){return t.push(e.toJSON())})),t},Util.prototype.formatBytes=function(e,t){if(void 0===t&&(t=2),0===e)return"0 Bytes";var i=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(i))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},Util.prototype.resizeImage=function(e,t,i,n){var o=this,r=new Image;r.onload=function(){var e=r.naturalWidth,a=r.naturalHeight,s=o.getMiniatureSize(e,a,t,i),l=document.createElement("canvas");l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(r,0,0,s.width,s.height);var u=l.toDataURL("image/png");n(u)},r.src=e},Util.prototype.getMiniatureSize=function(e,t,i,n){return e<=i&&t<=n?{width:e,height:t}:e/i>t/n?{width:i,height:t*(i/e)}:{width:e*(n/t),height:n}},Util.prototype.getKeyCodesByDirection=function(e,t){if("ARROW_KEYS"==t){if("UP"==e)return["ArrowUp"];if("DOWN"==e)return["ArrowDown"];if("LEFT"==e)return["ArrowLeft"];if("RIGHT"==e)return["ArrowRight"]}else if("WASD_KEYS"==t){if("UP"==e)return["KeyW"];if("DOWN"==e)return["KeyS"];if("LEFT"==e)return["KeyA"];if("RIGHT"==e)return["KeyD"]}else if("ARROW_KEYS_OR_WASD_KEYS"==t){if("UP"==e)return["ArrowUp","KeyW"];if("DOWN"==e)return["ArrowDown","KeyS"];if("LEFT"==e)return["ArrowLeft","KeyA"];if("RIGHT"==e)return["ArrowRight","KeyD"]}return null},Util.prototype.listAudios=function(e,t){for(var i=new Set,n=0;n<e.levels.length;n++){var o=e.levels[n];this.listAudiosByVisualScript(o.scriptOnAnimationFrame,t).forEach((function(e){i.add(e)})),this.listAudiosByVisualScript(o.scriptOnLevelStart,t).forEach((function(e){i.add(e)}))}for(n=0;n<e.visualScriptFunctions.length;n++){var r=e.visualScriptFunctions[n];this.listAudiosByVisualScript(r,t).forEach((function(e){i.add(e)}))}return i},Util.prototype.listAudiosByVisualScript=function(e,t){for(var i=new Set,n=e.blocks,o=0;o<n.length;o++){var r=n[o];this.listAudiosByBlock(r,t).forEach((function(e){i.add(e)}))}return i},Util.prototype.listAudiosByBlock=function(e,t){var i=new Set;if(e.blockType==BlockType_1.default.ACTION){var n=e.actionBlock.action;n.type.code==EventActionType_1.default.PLAY_AUDIO.code&&(n.audio.audioSourceType==AudioSourceType_1.default.UPLOAD&&t==AudioSourceType_1.default.UPLOAD?i.add(n.audio.customAudio.uid):n.audio.audioSourceType==AudioSourceType_1.default.LIBRARY&&t==AudioSourceType_1.default.LIBRARY&&i.add(n.audio.audioPath))}else if(e.blockType==BlockType_1.default.CONDITION){for(var o=e.conditionBlock,r=o.ifBlocks,a=0;a<r.length;a++){var s=r[a];this.listAudiosByBlock(s,t).forEach((function(e){i.add(e)}))}var l=o.elseBlocks;for(a=0;a<l.length;a++){var u=l[a];this.listAudiosByBlock(u,t).forEach((function(e){i.add(e)}))}}else if(e.blockType==BlockType_1.default.LOOP){var d=e.loopBlock.blocks;for(a=0;a<d.length;a++){var c=d[a];this.listAudiosByBlock(c,t).forEach((function(e){i.add(e)}))}}return i},Util.prototype.listImageIds=function(e){for(var t=new Set,i=0;i<e.customObjectTypes.length;i++){var n=e.customObjectTypes[i];if(n.renderType==RenderType_1.default.IMAGE&&(t.add(n.image.imageId),null!=n.animations))for(var o=n.animations,r=0;r<o.length;r++)for(var a=o[r],s=0;s<a.frames.length;s++){var l=a.frames[s];t.add(l.image.imageId)}}for(i=0;i<e.levels.length;i++){(u=e.levels[i]).backgroundType==BackgroundType_1.default.IMAGE&&t.add(u.backgroundImage.imageId)}for(i=0;i<e.levels.length;i++){var u=e.levels[i],d=new Array;d.push.apply(d,u.scriptOnAnimationFrame.blocks),d.push.apply(d,u.scriptOnLevelStart.blocks);for(r=0;r<d.length;r++){var c=d[r],h=this.listBlockImageIds(c),p=Array.from(h);for(s=0;s<p.length;s++)t.add(p[s])}}for(i=0;i<e.visualScriptFunctions.length;i++){var m=e.visualScriptFunctions[i];for(r=0;r<m.blocks.length;r++)for(c=m.blocks[r],h=this.listBlockImageIds(c),p=Array.from(h),s=0;s<p.length;s++)t.add(p[s])}return t},Util.prototype.listBlockImageIds=function(e){var t=new Set;if(e.blockType==BlockType_1.default.ACTION){var i=e.actionBlock.action;(i.type.code==EventActionType_1.default.DRAW_IMAGE.code||i.type.code==EventActionType_1.default.SET_OBJECT_IMAGE.code)&&t.add(i.image.imageId)}else if(e.blockType==BlockType_1.default.CONDITION){for(var n=e.conditionBlock.ifBlocks,o=0;o<n.length;o++){var r=n[o];this.listBlockImageIds(r).forEach((function(e){t.add(e)}))}var a=e.conditionBlock.elseBlocks;for(o=0;o<a.length;o++){var s=a[o];this.listBlockImageIds(s).forEach((function(e){t.add(e)}))}}else if(e.blockType==BlockType_1.default.LOOP)for(n=e.loopBlock.blocks,o=0;o<n.length;o++){r=n[o];this.listBlockImageIds(r).forEach((function(e){t.add(e)}))}return t},Util.prototype.snapToGrid=function(e,t,i){var n=(e-i)%t;return n<0&&(n+=t),n>t/2&&(n-=t),e-n},Util.prototype.getTextLeftX=function(e,t){var i=this.measureText(e,t),n=e.x-i/2;return"left"==e.align?n+=i/2:"right"==e.align&&(n-=i/2),n},Util.prototype.measureText=function(e,t){t.font=e.fontSize+"px "+e.fontFamily;var i=e.text;return t.measureText(i).width},Util.prototype.isInside=function(e,t,i,n,o,r){return!(e<i)&&(!(e>i+o)&&(!(t<n)&&!(t>n+r)))},Util.prototype.rotateCoordinates=function(e,t,i,n,o){var r=e-n,a=t-o;return{x:r*Math.cos(i)-a*Math.sin(i)+n,y:r*Math.sin(i)+a*Math.cos(i)+o}},Util.prototype.isInsideInitialObject=function(e,t,i){if(null==e.objectType)return!1;var n={x:e.x,y:e.y,halfWidth:e.objectType.width/2,halfHeight:e.objectType.height/2},o={x:t,y:i,halfWidth:1,halfHeight:1};return!!this.testCollisionRectangleRectangle(n,o)},Util.prototype.getMousePos=function(e,t,i,n){return this.getTransformedXY(e,t,i,n)},Util.prototype.getTransformedXY=function(e,t,i,n){if(null==e)return{x:t.clientX,y:t.clientY};var o=e.getBoundingClientRect();if(!(null!=window.document.fullscreenElement))return{x:t.clientX-o.left,y:t.clientY-o.top};var r=window.screen.width,a=window.screen.height,s=a/n,l=r/i,u=Math.min(l,s),d=r-i*u,c=a-n*u;return{x:(t.clientX-o.left)/u-d/2/u,y:(t.clientY-o.top)/u-c/2/u}},Util.prototype.drawText=function(e,t,i,n,o,r,a,s){e.font=o,e.fillStyle=r,e.textAlign=a,e.textBaseline=s,e.fillText(t,i,n)},Util.prototype.buildFillStyleFromColor=function(e){return"rgb("+e.red+","+e.green+","+e.blue+","+e.alpha/100+")"},Util.prototype.newColor=function(e,t,i,n){return void 0===n&&(n=100),new Color_1.default(e,t,i,n)},Util.prototype.uid=function(){return this.randomString()},Util.prototype.randomString=function(){return Math.random().toString(36).substring(2)},Util.prototype.arrayMove=function(e,t,i){var n=e[t];i<0||i>e.length-1||(e.splice(t,1),e.splice(i,0,n))},Util.prototype.buildObjectSelector=function(e,t){if(null==e)return null;var i=new ObjectSelectorDefinition_1.default;return i.type=e.type,i.loopVariableName=e.loopVariableName,e.type==ObjectSelectorType_1.default.ALL_OBJECTS_OF_TYPE&&(i.objectType=this.findCustomObjectDefinitionByUid(t,e.objectType.uid)),i},Util.prototype.buildObjectSelectorDefinition=function(e,t,i){if(null==e)return null;var n=new ObjectSelectorDefinition_1.default;return n.type=e.type,n.loopVariableName=e.loopVariableName,e.type==ObjectSelectorType_1.default.ALL_OBJECTS_OF_TYPE?n.objectType=t.customObjectTypes.find((function(t){return t.uid==e.objectType.uid})):e.type==ObjectSelectorType_1.default.GLOBAL_VARIABLE?n.variable=t.globalVariables.find((function(t){return t.uid==e.variable.uid})):e.type==ObjectSelectorType_1.default.LEVEL_VARIABLE&&(n.variable=i.levelVariables.find((function(t){return t.uid==e.variable.uid}))),n},Util.prototype.numberOrNull=function(e){return null==e?null:Number(e)},Util.prototype.zeroIfNull=function(e){return null==e?0:e},Util.prototype.oneIfNull=function(e){return null==e?1:e},Util.prototype.isEmpty=function(e){return null==e||""===e},Util.prototype.findEnemyTypeByEnemyTypeId=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].enemyId==t&&(i=e[n]);return i},Util.prototype.findBonusTypeByBonusTypeId=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].bonusTypeId==t&&(i=e[n]);return i},Util.prototype.findObstacleTypeByObstacleTypeId=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].obstacleTypeId==t&&(i=e[n]);return i},Util.prototype.findTypeById=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].id==t&&(i=e[n]);return i},Util.prototype.findLevelDefinitionByUid=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].uid==t&&(i=e[n]);return i},Util.prototype.findCustomObjectDefinitionByUid=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].uid==t&&(i=e[n]);return i},Util.prototype.findElementByUid=function(e,t){for(var i=null,n=0;n<e.length;n++)e[n].uid==t&&(i=e[n]);return i},Util.prototype.stopObject=function(e,t){(e.shape==Shape_1.default.CIRCLE&&t.shape==Shape_1.default.CIRCLE||e.shape==Shape_1.default.RECTANGLE&&t.shape==Shape_1.default.RECTANGLE||e.shape==Shape_1.default.CIRCLE&&t.shape==Shape_1.default.RECTANGLE||e.shape==Shape_1.default.RECTANGLE&&t.shape==Shape_1.default.CIRCLE)&&this.stopRectangleByRectangle(e,t)},Util.prototype.stopRectangleByRectangle=function(e,t){var i=this.absoluteDiff(e.x,t.x-t.halfWidth-e.halfWidth),n=this.absoluteDiff(e.x,t.x+t.halfWidth+e.halfWidth),o=this.absoluteDiff(e.y,t.y-t.halfHeight-e.halfWidth),r=this.absoluteDiff(e.y,t.y+t.halfHeight+e.halfWidth);o<r&&o<n&&o<i?(e.y-=o,e.ySpeed=0):r<n&&r<i?(e.y+=r,e.ySpeed=0):n<i?(e.x+=n,e.xSpeed=0):(e.x-=i,e.xSpeed=0)},Util.prototype.absoluteDiff=function(e,t){return Math.abs(e-t)},Util.prototype.testCollisionObjectLists=function(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(this.testCollision(e[i],t[n]))return!0;return!1},Util.prototype.testCollision=function(e,t){return e.shape==Shape_1.default.CIRCLE&&t.shape==Shape_1.default.RECTANGLE?this.testCollisionCircleRectangle(e,t):e.shape==Shape_1.default.RECTANGLE&&t.shape==Shape_1.default.CIRCLE?this.testCollisionCircleRectangle(t,e):e.shape==Shape_1.default.CIRCLE&&t.shape==Shape_1.default.CIRCLE?this.testCollisionBallBonus(e,t):e.shape==Shape_1.default.RECTANGLE&&t.shape==Shape_1.default.RECTANGLE&&this.testCollisionRectangleRectangle(e,t)},Util.prototype.testCollisionCircleRectangle=function(e,t){return e.y+e.radius>t.y-t.halfHeight&&e.y-e.radius<t.y+t.halfHeight&&e.x+e.radius>t.x-t.halfWidth&&e.x-e.radius<t.x+t.halfWidth},Util.prototype.testCollisionRectangleRectangle=function(e,t){return e.y+e.halfHeight>t.y-t.halfHeight&&e.y-e.halfHeight<t.y+t.halfHeight&&e.x+e.halfWidth>t.x-t.halfWidth&&e.x-e.halfWidth<t.x+t.halfWidth},Util.prototype.testCollisionBallBonus=function(e,t){var i=e.x,n=t.x,o=e.y,r=t.y;return Math.sqrt((n-i)*(n-i)+(r-o)*(r-o))<e.radius+t.radius},Util.prototype.testCollisionCircles=function(e,t){var i=e.x,n=t.x,o=e.y,r=t.y;return Math.sqrt((n-i)*(n-i)+(r-o)*(r-o))<e.halfWidth+t.halfWidth},Util.prototype.distanceObjects=function(e,t){return this.distance(e.x,e.y,t.x,t.y)},Util.prototype.distance=function(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))},Util.prototype.randomBetween=function(e,t){return e+Math.random()*(t-e)},Util.prototype.randomIntegerBetween=function(e,t){return Math.floor(Math.random()*t)+e},Util.prototype.readTextFile=function(e){var t=new XMLHttpRequest;t.open("GET",e,!1),t.onreadystatechange=function(){if(4===t.readyState&&(200===t.status||0==t.status)){var e=t.responseText;alert(e)}},t.send(null)},Util.prototype.isInsideObject=function(e,t,i,n){if(null==e)return!1;if(null==t)return!1;var o=i.x-i.getWidth()/2,r=i.y-i.getHeight()/2,a=i.getWidth(),s=i.getHeight();return this.isInside(e+n.screenX*n.zoom,t+n.screenY*n.zoom,o*n.zoom,r*n.zoom,a*n.zoom,s*n.zoom)},Util.prototype.getCookie=function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},Util.prototype.getObjectsByType=function(e,t){return t.level.customObjectsMap.get(e)||[]},Util.prototype.checkButtonClick=function(e,t,i){return!(!i.isMouseButtonJustDown(t)||!this.checkMouseOverButton(e,i))},Util.prototype.isButtonDown=function(e,t,i){return!(!i.isMouseButtonDown(t)||!this.checkMouseOverButton(e,i))},Util.prototype.checkMouseOverButton=function(e,t){if(null!=t.mousePos)for(var i=0;i<t.level.buttonArray.length;i++){var n=t.level.buttonArray[i];if(n.uid==e)return n.isInsideButton(t.mousePos.x,t.mousePos.y)}return!1},Util.prototype.checkButtonTouch=function(e,t){return t.touchStartList.length>0&&this.checkPositionOverButton(e,t,t.lastTouchX,t.lastTouchY)},Util.prototype.checkPositionOverButton=function(e,t,i,n){for(var o=0;o<t.level.buttonArray.length;o++){var r=t.level.buttonArray[o];if(r.uid==e)return r.isInsideButton(i,n)}return!1},Util.prototype.requestCanvasFullscreen=function(){var e=document.getElementById("myCanvas"),t=e;e.requestFullscreen?e.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},Util.prototype.cloneObject=function(e){var t=this.decycle(e,void 0),i=JSON.stringify(t),n=JSON.parse(i);return this.retrocycle(n)},Util.prototype.decycle=function(e,t){var i=new WeakMap;return function e(n,o){var r,a;return void 0!==t&&(n=t(n)),"object"!=typeof n||null===n||n instanceof Boolean||n instanceof Date||n instanceof Number||n instanceof RegExp||n instanceof String?n:void 0!==(r=i.get(n))?{$ref:r}:(i.set(n,o),Array.isArray(n)?(a=[],n.forEach((function(t,i){a[i]=e(t,o+"["+i+"]")}))):(a={},Object.keys(n).forEach((function(t){a[t]=e(n[t],o+"["+JSON.stringify(t)+"]")}))),a)}(e,"$")},Util.prototype.retrocycle=function($){var px=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/;return function rez(value){value&&"object"==typeof value&&(Array.isArray(value)?value.forEach((function(element,i){if("object"==typeof element&&null!==element){var path=element.$ref;"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(element)}})):Object.keys(value).forEach((function(name){var item=value[name];if("object"==typeof item&&null!==item){var path=item.$ref;"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)}})))}($),$},Util}();exports.default=Util},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(3),r=i(5),a=i(22),s=i(0),l=i(43),u=function(){function e(){this.behaviours=[],this.zIndex=0}return e.prototype.toJSON=function(){var t=new s.default,i=new e;return i.uid=this.uid,i.id=this.id,i.width=this.width,i.height=this.height,null!=this.image&&(i.image=this.image.toJSON()),i.electricCharge=this.electricCharge,i.mass=this.mass,i.alpha=this.alpha,i.applyGravity=this.applyGravity,i.behaviours=t.arrayToJSON(this.behaviours),i.objectVariables=t.arrayToJSON(this.objectVariables),i.animations=t.arrayToJSON(this.animations),null!=this.initialAnimation&&(i.initialAnimation=new a.default,i.initialAnimation.uid=this.initialAnimation.uid),i.renderType=this.renderType,i.drawType=this.drawType,i.shape=this.shape,null!=this.color&&(i.color=this.color.toJSON()),null!=this.borderColor&&(i.borderColor=this.borderColor.toJSON()),i.borderSize=this.borderSize,i.zIndex=this.zIndex,i.physicsEngineType=this.physicsEngineType,i.isStatic=this.isStatic,i.isSensor=this.isSensor,i.restitution=this.restitution,i.airFriction=this.airFriction,i.friction=this.friction,i.density=this.density,i.angularVelocity=this.angularVelocity,i.numSidesPolygon=this.numSidesPolygon,i},e.fromJSON=function(t,i){if(null==t||null==t.uid)return null;var u=i.getObject(t.uid);null==u&&((u=new e).uid=t.uid,i.addObject(u));var d=new s.default;return u.id=t.id,u.width=t.width,u.height=t.height,null!=t.image&&(u.image=r.default.fromJSON(t.image,i)),u.electricCharge=t.electricCharge,u.mass=t.mass,u.alpha=t.alpha,u.applyGravity=t.applyGravity,u.behaviours=d.arrayFromJSON(t.behaviours,l.default.fromJSON,i),u.objectVariables=d.arrayFromJSON(t.objectVariables,o.default.fromJSON,i),u.animations=d.arrayFromJSON(t.animations,a.default.fromJSON,i),null!=t.initialAnimation&&(u.initialAnimation=i.getOrAddObject(t.initialAnimation,a.default)),u.renderType=t.renderType,u.drawType=t.drawType,u.shape=t.shape,u.color=n.default.fromJSON(t.color,i),u.borderColor=n.default.fromJSON(t.borderColor,i),u.borderSize=t.borderSize,u.zIndex=t.zIndex,u.physicsEngineType=t.physicsEngineType,u.isStatic=t.isStatic,u.isSensor=t.isSensor,u.restitution=t.restitution,u.airFriction=t.airFriction,u.friction=t.friction,u.density=t.density,u.angularVelocity=t.angularVelocity,u.numSidesPolygon=t.numSidesPolygon,u},e}();t.default=u},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e,t,i,n){void 0===n&&(n=100),this.red=e,this.green=t,this.blue=i,this.alpha=n}return e.prototype.toJSON=function(){return new e(this.red,this.green,this.blue,this.alpha)},e.fromJSON=function(t,i){return null==t?null:new e(t.red,t.green,t.blue,t.alpha)},e.BLACK=new e(0,0,0,100),e.WHITE=new e(255,255,255,100),e.RED=new e(255,0,0,100),e.GREEN=new e(0,255,0,100),e.BLUE=new e(0,0,255,100),e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(1),r=i(11),a=function(){function e(){}return e.prototype.clone=function(){var t=new n.default,i=new e;return i.uid=t.uid(),i.name=this.name,i.type=this.type,i.initialValue=this.initialValue,i.objectType=this.objectType,i.neat=this.neat,i},e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.name=this.name,t.type=this.type,t.initialValue=this.initialValue,null!=this.objectType&&null!=this.objectType.uid&&(t.objectType=new o.default,t.objectType.uid=this.objectType.uid),null!=this.neat&&null!=this.neat.uid&&(t.neat=new r.default,t.neat.uid=this.neat.uid),t},e.fromJSON=function(t,i){if(null==t)return null;var n=i.getObject(t.uid);if(null!=n)return n;var a=new e;return a.uid=t.uid,i.addObject(a),a.name=t.name,a.type=t.type,a.initialValue=t.initialValue,null!=t.objectType&&(a.objectType=i.getOrAddObject(t.objectType,o.default)),null!=t.neat&&null!=t.neat.uid&&(a.neat=i.getOrAddObject(t.neat,r.default)),a},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),o=i(3),r=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.type=this.type,null!=this.objectType&&null!=this.objectType.uid&&(t.objectType=new n.default,t.objectType.uid=this.objectType.uid),null!=this.variable&&null!=this.variable.uid&&(t.variable=new o.default,t.variable.uid=this.variable.uid),t.loopVariableName=this.loopVariableName,t},e.fromJSON=function(t,i){if(null==t)return null;var r=new e;return r.type=t.type,null!=t.objectType&&(r.objectType=i.getOrAddObject(t.objectType,n.default)),null!=t.variable&&null!=t.variable.uid&&(r.variable=i.getOrAddObject(t.variable,o.default)),r.loopVariableName=t.loopVariableName,r},e.prototype.duplicate=function(){var t=new e;return t.type=this.type,t.objectType=this.objectType,t.variable=this.variable,t.loopVariableName=this.loopVariableName,t},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var n=i(33),o=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.imageSourceType=this.imageSourceType,t.imageId=this.imageId,null!=this.customImage&&(t.customImage=new n.default,t.customImage.uid=this.customImage.uid),t},e.fromJSON=function(t,i){if(null==t)return null;var o=new e;return o.imageSourceType=t.imageSourceType,o.imageId=t.imageId,null!=t.customImage&&(o.customImage=i.getOrAddObject(t.customImage,n.default)),o},e.prototype.duplicate=function(){var t=new e;return t.imageSourceType=this.imageSourceType,t.imageId=this.imageId,t.customImage=this.customImage,t},e}();t.default=o},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.ALL_OBJECTS="ALL_OBJECTS",e.ALL_OBJECTS_OF_TYPE="ALL_OBJECTS_OF_TYPE",e.LOOP_OBJECT="LOOP_OBJECT",e.GLOBAL_VARIABLE="GLOBAL_VARIABLE",e.LEVEL_VARIABLE="LEVEL_VARIABLE"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e,t){this.code=e,this.name=t}return e.findByCode=function(e){var t=this[e];if(t)return t;throw new RangeError("Illegal EventActionType code: "+e)},e.EMPTY=new e("EMPTY","Empty"),e.GO_TO_NEXT_LEVEL=new e("GO_TO_NEXT_LEVEL","Go to next level"),e.GO_TO_PREVIOUS_LEVEL=new e("GO_TO_PREVIOUS_LEVEL","Go to previous level"),e.GO_TO_LEVEL=new e("GO_TO_LEVEL","Go to level"),e.RESTART_GAME=new e("RESTART_GAME","Restart game"),e.RESTART_LEVEL=new e("RESTART_LEVEL","Restart level"),e.CREATE_CUSTOM_OBJECT=new e("CREATE_CUSTOM_OBJECT","Create object"),e.CONSOLE_LOG=new e("CONSOLE_LOG","Console log"),e.SET_CAMERA_CENTER_X=new e("SET_CAMERA_CENTER_X","Set camera center X"),e.SET_CAMERA_CENTER_Y=new e("SET_CAMERA_CENTER_Y","Set camera center Y"),e.SET_CAMERA_POSITION_X=new e("SET_CAMERA_POSITION_X","Set camera position X"),e.SET_CAMERA_POSITION_Y=new e("SET_CAMERA_POSITION_Y","Set camera position Y"),e.REQUEST_FULLSCREEN=new e("REQUEST_FULLSCREEN","Request fullscreen"),e.SET_TIME_SCALE=new e("SET_TIME_SCALE","Set time scale"),e.DRAW_LINE=new e("DRAW_LINE","Draw line"),e.DRAW_RECT=new e("DRAW_RECT","Draw rect"),e.DRAW_CIRCLE=new e("DRAW_CIRCLE","Draw circle"),e.DRAW_ARC=new e("DRAW_ARC","Draw arc"),e.DRAW_TEXT=new e("DRAW_TEXT","Draw text"),e.DRAW_IMAGE=new e("DRAW_IMAGE","Draw image"),e.DRAW_PERCENTAGE_BAR=new e("DRAW_PERCENTAGE_BAR","Draw percentage bar"),e.SET_CANVAS_ANGLE=new e("SET_CANVAS_ANGLE","Set camera rotation"),e.SET_CUSTOM_OBJECT_SPEED_AND_ANGLE=new e("SET_CUSTOM_OBJECT_SPEED_AND_ANGLE","Set object speed and angle"),e.SET_OBJECT_SPEED_AND_TARGET=new e("SET_OBJECT_SPEED_AND_TARGET","Set object speed and target"),e.SET_OBJECT_POSITION=new e("SET_OBJECT_POSITION","Set object position"),e.APPLY_FORCE_TO_OBJECT=new e("APPLY_FORCE_TO_OBJECT","Apply force to object"),e.SET_BUTTON_ATTRIBUTE=new e("SET_BUTTON_ATTRIBUTE","Set button attribute"),e.SET_TEXT_ATTRIBUTE=new e("SET_TEXT_ATTRIBUTE","Set text attribute"),e.SHOOT_OBJECT=new e("SHOOT_OBJECT","Shoot object"),e.MULTIPLY_ZOOM=new e("MULTIPLY_ZOOM","Multiply zoom"),e.SET_ZOOM=new e("SET_ZOOM","Set zoom"),e.SET_LOCAL_STORAGE_VARIABLE=new e("SET_LOCAL_STORAGE_VARIABLE","Set local storage variable"),e.REMOVE_OBJECT=new e("REMOVE_OBJECT","Remove object"),e.ADD_TO_SCORE=new e("ADD_TO_SCORE","Add to score"),e.SET_SCORE=new e("SET_SCORE","Set score"),e.SET_CUSTOM_OBJECT_ATTRIBUTE=new e("SET_CUSTOM_OBJECT_ATTRIBUTE","Set object attribute"),e.ADD_TO_CUSTOM_OBJECT_ATTRIBUTE=new e("ADD_TO_CUSTOM_OBJECT_ATTRIBUTE","Add to object attribute"),e.SET_OBJECT_VARIABLE=new e("SET_OBJECT_VARIABLE","Set object variable"),e.ADD_TO_OBJECT_VARIABLE=new e("ADD_TO_OBJECT_VARIABLE","Add to object variable"),e.SET_OBJECT_IMAGE_ANGLE=new e("SET_OBJECT_IMAGE_ANGLE","Set object image angle"),e.SET_OBJECT_IMAGE=new e("SET_OBJECT_IMAGE","Set object image"),e.SET_OBJECT_ANIMATION=new e("SET_OBJECT_ANIMATION","Set object animation"),e.SET_OBJECT_ANIMATION_FRAME=new e("SET_OBJECT_ANIMATION_FRAME","Set object animation frame"),e.SET_OBJECT_ANIMATION_SPEED=new e("SET_OBJECT_ANIMATION_SPEED","Set object animation speed"),e.SET_LEVEL_VARIABLE=new e("SET_LEVEL_VARIABLE","Set level variable"),e.ADD_TO_LEVEL_VARIABLE=new e("ADD_TO_LEVEL_VARIABLE","Add to level variable"),e.SET_GLOBAL_VARIABLE=new e("SET_GLOBAL_VARIABLE","Set global variable"),e.ADD_TO_GLOBAL_VARIABLE=new e("ADD_TO_GLOBAL_VARIABLE","Add to global variable"),e.PLAY_AUDIO=new e("PLAY_AUDIO","Play audio"),e.STOP_ALL_AUDIOS=new e("STOP_ALL_AUDIOS","Stop all audios"),e.GAMEPAD_VIBRATE=new e("GAMEPAD_VIBRATE","Vibrate"),e.ASSIGN_NEURAL_NETWORKS_TO_OBJECTS=new e("ASSIGN_NEURAL_NETWORKS_TO_OBJECTS","Assign neural networks to objects"),e.ACTIVATE_NEURAL_NETWORK=new e("ACTIVATE_NEURAL_NETWORK","Activate neural network"),e.ACTIVATE_OBJECT_NEURAL_NETWORK=new e("ACTIVATE_OBJECT_NEURAL_NETWORK","Activate object neural network"),e.SET_NEURAL_NETWORK_SCORE=new e("SET_NEURAL_NETWORK_SCORE","Set neural network score"),e.ADD_TO_NEURAL_NETWORK_SCORE=new e("ADD_TO_NEURAL_NETWORK_SCORE","Add to neural network score"),e.SET_OBJECT_NEURAL_NETWORK_SCORE=new e("SET_OBJECT_NEURAL_NETWORK_SCORE","Set object neural network score"),e.ADD_TO_OBJECT_NEURAL_NETWORK_SCORE=new e("ADD_TO_OBJECT_NEURAL_NETWORK_SCORE","Add to object neural network score"),e.EVOLVE=new e("EVOLVE","Evolve"),e.EXECUTE_FUNCTION=new e("EXECUTE_FUNCTION","Execute function"),e.EXECUTE_JAVASCRIPT_CODE=new e("EXECUTE_JAVASCRIPT_CODE","Execute Javascript code"),e.ADD_CONSTRAINT=new e("ADD_CONSTRAINT","Add constraint"),e}();t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.BASIC="BASIC",e.MATTER_JS="MATTER_JS"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.STRING="STRING",e.NUMBER="NUMBER",e.BOOLEAN="BOOLEAN",e.CUSTOM_OBJECT_TYPE="CUSTOM_OBJECT_TYPE",e.ARRAY="ARRAY",e.MATRIX="MATRIX",e.NEAT_NEURAL_NETWORK="NEAT_NEURAL_NETWORK",e.ANY="ANY"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(1),r=i(7),a=i(19),s=i(31),l=i(13),u=function(){function e(){this.blocks=new Array}return e.prototype.toJSON=function(){var t=new n.default,i=new e;return i.uid=this.uid,i.name=this.name,i.description=this.description,i.type=this.type,i.trigger=this.trigger,null!=this.level&&(i.level=new a.default,i.level.uid=this.level.uid),null!=this.objectType&&(i.objectType=new o.default,i.objectType.uid=this.objectType.uid),i.blocks=t.arrayToJSON(this.blocks),i},e.fromJSON=function(t,i){if(null==t)return null;var r=i.getObject(t.uid);null==r&&((r=new e).uid=t.uid,i.addObject(r));var l=new n.default;return r.name=t.name,r.description=t.description,r.trigger=t.trigger,r.type=t.type,null!=t.level&&(r.level=i.getOrAddObject(t.level,a.default)),null!=t.objectType&&(r.objectType=i.getOrAddObject(t.objectType,o.default)),r.blocks=l.arrayFromJSON(t.blocks,s.default.fromJSON,i),r},e.prototype.some=function(e,t){if(null==t){for(var i=this.blocks,n=0;n<i.length;n++){var o=i[n];if(!0===this.some(e,o))return!0}return!1}if(t.blockType==l.default.ACTION)return e(t);if(t.blockType==l.default.CONDITION){if(!0===e(t))return!0;var r=t.conditionBlock.ifBlocks,a=t.conditionBlock.elseBlocks;for(n=0;n<r.length;n++){o=r[n];if(!0===this.some(e,o))return!0}for(n=0;n<a.length;n++){o=a[n];if(!0===this.some(e,o))return!0}return!1}if(t.blockType==l.default.LOOP){if(!0===e(t))return!0;var s=t.loopBlock.blocks;for(n=0;n<s.length;n++){o=s[n];if(!0===this.some(e,o))return!0}return!1}return t.blockType==l.default.COMMENT?e(t):void 0},e.prototype.containsConditionOfType=function(e){return this.some((function(t){return t.blockType==l.default.CONDITION&&t.conditionBlock.condition.type==e}),null)},e.prototype.containsFunction=function(e){return this.some((function(t){return t.blockType==l.default.ACTION&&t.actionBlock.action.type==r.default.EXECUTE_FUNCTION&&t.actionBlock.action.visualScriptFunction.uid==e}),null)},e}();t.default=u},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21),o=i(41),r=function(){function e(){this.neat=null,this.inputDefinitions=[],this.outputDefinitions=[]}return e.prototype.getName=function(){return this.name},e.prototype.getGeneration=function(){return this.neat.generation},e.prototype.getPopulationSize=function(){return this.neat.popsize},e.prototype.getPopulation=function(){return this.neat.population},e.prototype.getInputSize=function(){return this.neat.input},e.prototype.getOutputSize=function(){return this.neat.output},e.prototype.toJSON=function(){var t=new e;if(t.uid=this.uid,t.name=this.name,null!=this.neat){var i={popsize:this.neat.popsize,elitism:this.neat.elitism,provenance:this.neat.provenance,mutationRate:this.neat.mutationRate,mutationAmount:this.neat.mutationAmount},n=new window.neataptic.Neat(this.neat.input,this.neat.output,null,i);n.id=this.neat.id,n.generation=this.neat.generation,n.population=this.neat.export(),t.neat=n}for(var o=0;o<this.inputDefinitions.length;o++)t.inputDefinitions.push(this.inputDefinitions[o].toJSON());for(o=0;o<this.outputDefinitions.length;o++)t.outputDefinitions.push(this.outputDefinitions[o].toJSON());return t},e.fromJSON=function(t,i){if(null==t)return null;var r=i.getObject(t.uid);null==r&&((r=new e).uid=t.uid,i.addObject(r)),r.name=t.name;var a={popsize:t.neat.popsize,elitism:t.neat.elitism,provenance:t.neat.provenance,mutationRate:t.neat.mutationRate,mutationAmount:t.neat.mutationAmount},s=new window.neataptic.Neat(t.neat.input,t.neat.output,null,a);s.id=t.neat.id,s.generation=t.neat.generation,s.import(t.neat.population),r.neat=s;for(var l=0;l<t.inputDefinitions.length;l++)r.inputDefinitions.push(n.default.fromJSON(t.inputDefinitions[l]));for(l=0;l<t.outputDefinitions.length;l++)r.outputDefinitions.push(o.default.fromJSON(t.outputDefinitions[l]));return r},e}();t.default=r},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.CIRCLE="CIRCLE",e.RECTANGLE="RECTANGLE",e.POLYGON="POLYGON"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.ACTION="ACTION",e.CONDITION="CONDITION",e.LOOP="LOOP",e.COMMENT="COMMENT"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.IMAGE="IMAGE",e.CIRCLE="CIRCLE",e.RECTANGLE="RECTANGLE"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.SOLID_COLOR="SOLID_COLOR",e.IMAGE="IMAGE"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.OBJECT="OBJECT",e.NUMBER="NUMBER",e.REPEAT_X_TIMES="REPEAT_X_TIMES"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(26),o=i(37),r=i(7),a=i(52),s=i(34),l=i(76),u=i(53),d=i(18),c=i(16),h=i(6),p=i(14),m=i(25),f=function(){function e(){}return e.prototype.getMouseButtons=function(){return[{code:-1,name:"Any button"},{code:0,name:"Left button"},{code:1,name:"Middle button"},{code:2,name:"Right button"},{code:3,name:"Fourth button"},{code:4,name:"Fifth button"}]},e.prototype.getKeyboardKeys=function(){return[{code:"ArrowUp",name:"ArrowUp"},{code:"ArrowDown",name:"ArrowDown"},{code:"ArrowLeft",name:"ArrowLeft"},{code:"ArrowRight",name:"ArrowRight"},{code:"Space",name:"Space"},{code:"Enter",name:"Enter"},{code:"ShiftLeft",name:"ShiftLeft"},{code:"ShiftRight",name:"ShiftRight"},{code:"ControlLeft",name:"ControlLeft"},{code:"ControlRight",name:"ControlRight"},{code:"Escape",name:"Escape"},{code:"Backspace",name:"Backspace"},{code:"AltLeft",name:"AltLeft"},{code:"AltRight",name:"AltRight"},{code:"CapsLock",name:"CapsLock"},{code:"Tab",name:"Tab"},{code:"Insert",name:"Insert"},{code:"Delete",name:"Delete"},{code:"Home",name:"Home"},{code:"End",name:"End"},{code:"PageUp",name:"PageUp"},{code:"PageDown",name:"PageDown"},{code:"Digit1",name:"Digit1"},{code:"Digit2",name:"Digit2"},{code:"Digit3",name:"Digit3"},{code:"Digit4",name:"Digit4"},{code:"Digit5",name:"Digit5"},{code:"Digit6",name:"Digit6"},{code:"Digit7",name:"Digit7"},{code:"Digit8",name:"Digit8"},{code:"Digit9",name:"Digit9"},{code:"Digit0",name:"Digit0"},{code:"Numpad1",name:"Numpad1"},{code:"Numpad2",name:"Numpad2"},{code:"Numpad3",name:"Numpad3"},{code:"Numpad4",name:"Numpad4"},{code:"Numpad5",name:"Numpad5"},{code:"Numpad6",name:"Numpad6"},{code:"Numpad7",name:"Numpad7"},{code:"Numpad8",name:"Numpad8"},{code:"Numpad9",name:"Numpad9"},{code:"Numpad0",name:"Numpad0"},{code:"NumLock",name:"NumLock"},{code:"NumpadDivide",name:"NumpadDivide"},{code:"NumpadMultiply",name:"NumpadMultiply"},{code:"NumpadSubtract",name:"NumpadSubtract"},{code:"NumpadAdd",name:"NumpadAdd"},{code:"NumpadEnter",name:"NumpadEnter"},{code:"NumpadDecimal",name:"NumpadDecimal"},{code:"KeyA",name:"KeyA"},{code:"KeyB",name:"KeyB"},{code:"KeyC",name:"KeyC"},{code:"KeyD",name:"KeyD"},{code:"KeyE",name:"KeyE"},{code:"KeyF",name:"KeyF"},{code:"KeyG",name:"KeyG"},{code:"KeyH",name:"KeyH"},{code:"KeyI",name:"KeyI"},{code:"KeyJ",name:"KeyJ"},{code:"KeyK",name:"KeyK"},{code:"KeyL",name:"KeyL"},{code:"KeyM",name:"KeyM"},{code:"KeyN",name:"KeyN"},{code:"KeyO",name:"KeyO"},{code:"KeyP",name:"KeyP"},{code:"KeyQ",name:"KeyQ"},{code:"KeyR",name:"KeyR"},{code:"KeyS",name:"KeyS"},{code:"KeyT",name:"KeyT"},{code:"KeyU",name:"KeyU"},{code:"KeyV",name:"KeyV"},{code:"KeyW",name:"KeyW"},{code:"KeyX",name:"KeyX"},{code:"KeyY",name:"KeyY"},{code:"KeyZ",name:"KeyZ"},{code:"F1",name:"F1"},{code:"F2",name:"F2"},{code:"F3",name:"F3"},{code:"F4",name:"F4"},{code:"F5",name:"F5"},{code:"F6",name:"F6"},{code:"F7",name:"F7"},{code:"F8",name:"F8"},{code:"F9",name:"F9"},{code:"F10",name:"F10"},{code:"F11",name:"F11"},{code:"F12",name:"F12"},{code:"IntlBackslash",name:"IntlBackslash"},{code:"OSLeft",name:"OSLeft"},{code:"Minus",name:"Minus"},{code:"Equal",name:"Equal"},{code:"Backquote",name:"Backquote"},{code:"BracketLeft",name:"BracketLeft"},{code:"BracketRight",name:"BracketRight"},{code:"Semicolon",name:"Semicolon"},{code:"Quote",name:"Quote"},{code:"Backslash",name:"Backslash"},{code:"Comma",name:"Comma"},{code:"Period",name:"Period"},{code:"Slash",name:"Slash"}]},e.prototype.getConditionObjectSelectorTypes=function(){return[{value:h.default.ALL_OBJECTS_OF_TYPE,name:"Any object of type..."},{value:h.default.LOOP_OBJECT,name:"Loop object"},{value:h.default.GLOBAL_VARIABLE,name:"Global variable"},{value:h.default.LEVEL_VARIABLE,name:"Level variable"}]},e.prototype.getActionObjectSelectorTypes=function(){return[{value:h.default.ALL_OBJECTS_OF_TYPE,name:"All objects of type..."},{value:h.default.LOOP_OBJECT,name:"Loop object"},{value:h.default.GLOBAL_VARIABLE,name:"Global variable"},{value:h.default.LEVEL_VARIABLE,name:"Level variable"}]},e.prototype.getExpressionObjectSelectorTypes=function(){return[{value:h.default.LOOP_OBJECT,name:"Loop object"},{value:h.default.GLOBAL_VARIABLE,name:"Global variable"},{value:h.default.LEVEL_VARIABLE,name:"Level variable"}]},e.prototype.getEventConditionCategories=function(){return[{code:a.default.OBJECTS,name:"Objects"},{code:a.default.TIME,name:"Time"},{code:a.default.KEYBOARD,name:"Keyboard"},{code:a.default.MOUSE,name:"Mouse"},{code:a.default.BUTTON,name:"Button"},{code:a.default.TOUCH,name:"Touch"},{code:a.default.GAMEPAD,name:"Gamepad"},{code:a.default.EXPRESSION,name:"Expression"}]},e.prototype.getEventConditionTypesByCategory=function(e){for(var t=this.getEventConditionTypes(),i=new Array,n=0;n<t.length;n++)for(var o=t[n],r=o.categories,a=0;a<r.length;a++)r[a]==e&&i.push(o);return i},e.prototype.getEventActionCategories=function(){return[{code:o.default.GAME,name:"Game"},{code:o.default.LEVEL,name:"Level"},{code:o.default.CAMERA,name:"Camera"},{code:o.default.OBJECT,name:"Object"},{code:o.default.PHYSICS_ENGINE,name:"Physics engine"},{code:o.default.BUTTON,name:"Button"},{code:o.default.TEXT,name:"Text"},{code:o.default.DRAWING,name:"Drawing"},{code:o.default.AUDIO,name:"Audio"},{code:o.default.STORAGE,name:"Storage"},{code:o.default.GAMEPAD,name:"Gamepad"},{code:o.default.NEUROEVOLUTION_NEAT,name:"Neuroevolution"},{code:o.default.FUNCTIONS,name:"Functions"},{code:o.default.OTHERS,name:"Others"}]},e.prototype.getEventActionTypesByCategory=function(e){for(var t=this.getEventActionTypes(),i=new Array,n=0;n<t.length;n++)t[n].category==e&&i.push(t[n]);return i},e.prototype.getEventActionTypes=function(){return[{code:r.default.GO_TO_NEXT_LEVEL.code,name:r.default.GO_TO_NEXT_LEVEL.name,category:o.default.LEVEL},{code:r.default.GO_TO_PREVIOUS_LEVEL.code,name:r.default.GO_TO_PREVIOUS_LEVEL.name,category:o.default.LEVEL},{code:r.default.GO_TO_LEVEL.code,name:r.default.GO_TO_LEVEL.name,category:o.default.LEVEL},{code:r.default.SET_LEVEL_VARIABLE.code,name:r.default.SET_LEVEL_VARIABLE.name,category:o.default.LEVEL},{code:r.default.ADD_TO_LEVEL_VARIABLE.code,name:r.default.ADD_TO_LEVEL_VARIABLE.name,category:o.default.LEVEL},{code:r.default.RESTART_LEVEL.code,name:r.default.RESTART_LEVEL.name,category:o.default.LEVEL},{code:r.default.SET_CAMERA_CENTER_X.code,name:r.default.SET_CAMERA_CENTER_X.name,category:o.default.CAMERA},{code:r.default.SET_CAMERA_CENTER_Y.code,name:r.default.SET_CAMERA_CENTER_Y.name,category:o.default.CAMERA},{code:r.default.SET_CAMERA_POSITION_X.code,name:r.default.SET_CAMERA_POSITION_X.name,category:o.default.CAMERA},{code:r.default.SET_CAMERA_POSITION_Y.code,name:r.default.SET_CAMERA_POSITION_Y.name,category:o.default.CAMERA},{code:r.default.SET_ZOOM.code,name:r.default.SET_ZOOM.name,category:o.default.CAMERA},{code:r.default.MULTIPLY_ZOOM.code,name:r.default.MULTIPLY_ZOOM.name,category:o.default.CAMERA},{code:r.default.SET_CANVAS_ANGLE.code,name:r.default.SET_CANVAS_ANGLE.name,category:o.default.CAMERA},{code:r.default.RESTART_GAME.code,name:r.default.RESTART_GAME.name,category:o.default.GAME},{code:r.default.SET_SCORE.code,name:r.default.SET_SCORE.name,category:o.default.GAME},{code:r.default.ADD_TO_SCORE.code,name:r.default.ADD_TO_SCORE.name,category:o.default.GAME},{code:r.default.SET_GLOBAL_VARIABLE.code,name:r.default.SET_GLOBAL_VARIABLE.name,category:o.default.GAME},{code:r.default.ADD_TO_GLOBAL_VARIABLE.code,name:r.default.ADD_TO_GLOBAL_VARIABLE.name,category:o.default.GAME},{code:r.default.REQUEST_FULLSCREEN.code,name:r.default.REQUEST_FULLSCREEN.name,category:o.default.GAME},{code:r.default.SET_TIME_SCALE.code,name:r.default.SET_TIME_SCALE.name,category:o.default.GAME},{code:r.default.CREATE_CUSTOM_OBJECT.code,name:r.default.CREATE_CUSTOM_OBJECT.name,category:o.default.OBJECT},{code:r.default.SHOOT_OBJECT.code,name:r.default.SHOOT_OBJECT.name,category:o.default.OBJECT},{code:r.default.REMOVE_OBJECT.code,name:r.default.REMOVE_OBJECT.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_POSITION.code,name:r.default.SET_OBJECT_POSITION.name,category:o.default.OBJECT},{code:r.default.SET_CUSTOM_OBJECT_ATTRIBUTE.code,name:r.default.SET_CUSTOM_OBJECT_ATTRIBUTE.name,category:o.default.OBJECT},{code:r.default.ADD_TO_CUSTOM_OBJECT_ATTRIBUTE.code,name:r.default.ADD_TO_CUSTOM_OBJECT_ATTRIBUTE.name,category:o.default.OBJECT},{code:r.default.SET_CUSTOM_OBJECT_SPEED_AND_ANGLE.code,name:r.default.SET_CUSTOM_OBJECT_SPEED_AND_ANGLE.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_SPEED_AND_TARGET.code,name:r.default.SET_OBJECT_SPEED_AND_TARGET.name,category:o.default.OBJECT},{code:r.default.APPLY_FORCE_TO_OBJECT.code,name:r.default.APPLY_FORCE_TO_OBJECT.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_IMAGE_ANGLE.code,name:r.default.SET_OBJECT_IMAGE_ANGLE.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_IMAGE.code,name:r.default.SET_OBJECT_IMAGE.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_VARIABLE.code,name:r.default.SET_OBJECT_VARIABLE.name,category:o.default.OBJECT},{code:r.default.ADD_TO_OBJECT_VARIABLE.code,name:r.default.ADD_TO_OBJECT_VARIABLE.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_ANIMATION.code,name:r.default.SET_OBJECT_ANIMATION.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_ANIMATION_FRAME.code,name:r.default.SET_OBJECT_ANIMATION_FRAME.name,category:o.default.OBJECT},{code:r.default.SET_OBJECT_ANIMATION_SPEED.code,name:r.default.SET_OBJECT_ANIMATION_SPEED.name,category:o.default.OBJECT},{code:r.default.SET_BUTTON_ATTRIBUTE.code,name:r.default.SET_BUTTON_ATTRIBUTE.name,category:o.default.BUTTON},{code:r.default.SET_TEXT_ATTRIBUTE.code,name:r.default.SET_TEXT_ATTRIBUTE.name,category:o.default.TEXT},{code:r.default.DRAW_TEXT.code,name:r.default.DRAW_TEXT.name,category:o.default.TEXT},{code:r.default.SET_LOCAL_STORAGE_VARIABLE.code,name:r.default.SET_LOCAL_STORAGE_VARIABLE.name,category:o.default.STORAGE},{code:r.default.PLAY_AUDIO.code,name:r.default.PLAY_AUDIO.name,category:o.default.AUDIO},{code:r.default.STOP_ALL_AUDIOS.code,name:r.default.STOP_ALL_AUDIOS.name,category:o.default.AUDIO},{code:r.default.GAMEPAD_VIBRATE.code,name:r.default.GAMEPAD_VIBRATE.name,category:o.default.GAMEPAD},{code:r.default.EXECUTE_JAVASCRIPT_CODE.code,name:r.default.EXECUTE_JAVASCRIPT_CODE.name,category:o.default.OTHERS},{code:r.default.CONSOLE_LOG.code,name:r.default.CONSOLE_LOG.name,category:o.default.OTHERS},{code:r.default.ASSIGN_NEURAL_NETWORKS_TO_OBJECTS.code,name:r.default.ASSIGN_NEURAL_NETWORKS_TO_OBJECTS.name,category:o.default.NEUROEVOLUTION_NEAT},{code:r.default.ACTIVATE_OBJECT_NEURAL_NETWORK.code,name:r.default.ACTIVATE_OBJECT_NEURAL_NETWORK.name,category:o.default.NEUROEVOLUTION_NEAT},{code:r.default.SET_OBJECT_NEURAL_NETWORK_SCORE.code,name:r.default.SET_OBJECT_NEURAL_NETWORK_SCORE.name,category:o.default.NEUROEVOLUTION_NEAT},{code:r.default.ADD_TO_OBJECT_NEURAL_NETWORK_SCORE.code,name:r.default.ADD_TO_OBJECT_NEURAL_NETWORK_SCORE.name,category:o.default.NEUROEVOLUTION_NEAT},{code:r.default.EVOLVE.code,name:r.default.EVOLVE.name,category:o.default.NEUROEVOLUTION_NEAT},{code:r.default.EXECUTE_FUNCTION.code,name:r.default.EXECUTE_FUNCTION.name,category:o.default.FUNCTIONS},{code:r.default.ADD_CONSTRAINT.code,name:r.default.ADD_CONSTRAINT.name,category:o.default.PHYSICS_ENGINE},{code:r.default.DRAW_LINE.code,name:r.default.DRAW_LINE.name,category:o.default.DRAWING},{code:r.default.DRAW_CIRCLE.code,name:r.default.DRAW_CIRCLE.name,category:o.default.DRAWING},{code:r.default.DRAW_ARC.code,name:r.default.DRAW_ARC.name,category:o.default.DRAWING},{code:r.default.DRAW_RECT.code,name:r.default.DRAW_RECT.name,category:o.default.DRAWING},{code:r.default.DRAW_IMAGE.code,name:r.default.DRAW_IMAGE.name,category:o.default.DRAWING},{code:r.default.DRAW_TEXT.code,name:r.default.DRAW_TEXT.name,category:o.default.DRAWING},{code:r.default.DRAW_PERCENTAGE_BAR.code,name:r.default.DRAW_PERCENTAGE_BAR.name,category:o.default.DRAWING}]},e.prototype.getEventConditionTypes=function(){return[{code:s.default.COLLISION,name:"Collision",categories:[a.default.OBJECTS]},{code:s.default.KEYDOWN,name:"Keydown",categories:[a.default.KEYBOARD]},{code:s.default.KEYUP,name:"Keyup",categories:[a.default.KEYBOARD]},{code:s.default.REPEAT_WHILE_KEY_IS_DOWN,name:"Is key down",categories:[a.default.KEYBOARD]},{code:s.default.REPEAT_WHILE_MOUSE_IS_DOWN,name:"Is mouse down",categories:[a.default.MOUSE]},{code:s.default.MOUSEDOWN,name:"On mouse down",categories:[a.default.MOUSE]},{code:s.default.MOUSEUP,name:"On mouse up",categories:[a.default.MOUSE]},{code:s.default.ALWAYS,name:"Always",categories:[a.default.TIME]},{code:s.default.EVERY_X_FRAMES,name:"Every X frames",categories:[a.default.TIME]},{code:s.default.EVERY_X_SECONDS,name:"Every X seconds",categories:[a.default.TIME]},{code:s.default.ON_LEVEL_START,name:"On level start",categories:[a.default.TIME]},{code:s.default.ON_BUTTON_CLICK,name:"On button click",categories:[a.default.BUTTON,a.default.MOUSE]},{code:s.default.IS_BUTTON_DOWN,name:"Is button down",categories:[a.default.BUTTON,a.default.MOUSE]},{code:s.default.MOUSE_OVER_BUTTON,name:"Mouse over button",categories:[a.default.BUTTON,a.default.MOUSE]},{code:s.default.CLICK_ON_OBJECT,name:"Click on object",categories:[a.default.MOUSE,a.default.OBJECTS]},{code:s.default.MOUSE_OVER_OBJECT,name:"Mouse over object",categories:[a.default.MOUSE,a.default.OBJECTS]},{code:s.default.ON_TOUCH_START,name:"On touch start",categories:[a.default.TOUCH]},{code:s.default.ON_TOUCH_MOVE,name:"On touch move",categories:[a.default.TOUCH]},{code:s.default.ON_TOUCH_END,name:"On touch end",categories:[a.default.TOUCH]},{code:s.default.TOUCH_ON_BUTTON,name:"Touch on button",categories:[a.default.TOUCH,a.default.BUTTON]},{code:s.default.TOUCH_ON_OBJECT,name:"Touch on object",categories:[a.default.TOUCH,a.default.OBJECTS]},{code:s.default.EXPRESSION,name:"Expression",categories:[a.default.EXPRESSION]},{code:s.default.DISTANCE_BETWEEN,name:"Distance between",categories:[a.default.EXPRESSION]},{code:s.default.IS_GAMEPAD_CONNECTED,name:"Is gamepad connected",categories:[a.default.GAMEPAD]},{code:s.default.IS_GAMEPAD_BUTTON_PRESSED,name:"Is gamepad button pressed",categories:[a.default.GAMEPAD]},{code:s.default.IS_GAMEPAD_BUTTON_JUST_PRESSED,name:"Is gamepad button just pressed",categories:[a.default.GAMEPAD]},{code:s.default.IS_GAMEPAD_BUTTON_JUST_RELEASED,name:"Is gamepad button just released",categories:[a.default.GAMEPAD]}]},e.prototype.getLoopTypes=function(){return[{code:c.default.OBJECT,name:"Object"},{code:c.default.NUMBER,name:"Number"},{code:c.default.REPEAT_X_TIMES,name:"Repeat X times"}]},e.prototype.getRenderTypes=function(){return[{code:p.default.IMAGE,name:"Image"},{code:p.default.CIRCLE,name:"Circle or ellipse"},{code:p.default.RECTANGLE,name:"Rectangle"}]},e.prototype.getDrawTypes=function(){return[{code:n.default.FILL,name:"Fill"},{code:n.default.STROKE,name:"Stroke"},{code:n.default.FILL_AND_STROKE,name:"Fill and stroke"}]},e.prototype.getExpressionCategories=function(e){var t=[{code:l.default.OBJECT,name:"Object"},{code:l.default.LEVEL,name:"Level"},{code:l.default.GAME,name:"Game"},{code:l.default.CAMERA,name:"Camera"},{code:l.default.MATH,name:"Math"},{code:l.default.STORAGE,name:"Storage"},{code:l.default.MOUSE,name:"Mouse"},{code:l.default.GAMEPAD,name:"Gamepad"},{code:l.default.TOUCH,name:"Touch"},{code:l.default.ACCELEROMETER,name:"Accelerometer"},{code:l.default.OTHERS,name:"Others"}];return null!=e&&null!=e.neatExtension&&t.push({code:l.default.NEUROEVOLUTION_NEAT,name:"Neuroevolution NEAT"}),t},e.prototype.getExpressionTypesByCategory=function(e){return this.getExpressionTypes().filter((function(t){return t.category==e}))},e.prototype.getExpressionTypes=function(){return[{code:u.default.SCORE,name:"Score",category:l.default.GAME},{code:u.default.RANDOM,name:"Random number between 0 and 1",category:l.default.MATH},{code:u.default.RANDOM_NUMBER_BETWEEN,name:"Random number between...",category:l.default.MATH},{code:u.default.RANDOM_INTEGER_BETWEEN,name:"Random integer between...",category:l.default.MATH},{code:u.default.PI,name:"Pi",category:l.default.MATH},{code:u.default.SIN,name:"Sine",category:l.default.MATH},{code:u.default.COS,name:"Cosine",category:l.default.MATH},{code:u.default.TAN,name:"Tangent",category:l.default.MATH},{code:u.default.ATAN2,name:"Arctangent",category:l.default.MATH},{code:u.default.SQRT,name:"Square root",category:l.default.MATH},{code:u.default.ABS,name:"Absolute value",category:l.default.MATH},{code:u.default.ROUND,name:"Round",category:l.default.MATH},{code:u.default.CEIL,name:"Round up",category:l.default.MATH},{code:u.default.FLOOR,name:"Round down",category:l.default.MATH},{code:u.default.MIN,name:"Min",category:l.default.MATH},{code:u.default.MAX,name:"Max",category:l.default.MATH},{code:u.default.MOUSE_POS_X,name:"Mouse position X",category:l.default.MOUSE},{code:u.default.MOUSE_POS_Y,name:"Mouse position Y",category:l.default.MOUSE},{code:u.default.CAMERA_POSITION_X,name:"Camera position X",category:l.default.CAMERA},{code:u.default.CAMERA_POSITION_Y,name:"Camera position Y",category:l.default.CAMERA},{code:u.default.CAMERA_CENTER_X,name:"Camera center X",category:l.default.CAMERA},{code:u.default.CAMERA_CENTER_Y,name:"Camera center Y",category:l.default.CAMERA},{code:u.default.CAMERA_ROTATION_RADIANS,name:"Camera rotation (radians)",category:l.default.CAMERA},{code:u.default.CAMERA_ROTATION_DEGREES,name:"Camera rotation (degrees)",category:l.default.CAMERA},{code:u.default.ZOOM,name:"Zoom",category:l.default.CAMERA},{code:u.default.GLOBAL_VARIABLE,name:"Global variable",category:l.default.GAME},{code:u.default.LEVEL_VARIABLE,name:"Level variable",category:l.default.LEVEL},{code:u.default.OBJECT_ATTRIBUTE,name:"Object attribute",category:l.default.OBJECT},{code:u.default.OBJECT_VARIABLE,name:"Object variable",category:l.default.OBJECT},{code:u.default.OBJECT_METHOD,name:"Object method",category:l.default.OBJECT},{code:u.default.OBJECT,name:"Object",category:l.default.OBJECT},{code:u.default.LOOP_NUMBER,name:"Loop number",category:l.default.OTHERS},{code:u.default.LEVEL_NAME,name:"Level name",category:l.default.LEVEL},{code:u.default.CURRENT_LEVEL_FRAME,name:"Current level frame",category:l.default.LEVEL},{code:u.default.ELAPSED_TIME_MILLIS,name:"Elapsed time (in milliseconds)",category:l.default.GAME},{code:u.default.ELAPSED_TIME_SECONDS,name:"Elapsed time (in seconds)",category:l.default.GAME},{code:u.default.LEVEL_ELAPSED_TIME_MILLIS,name:"Level elapsed time (in milliseconds)",category:l.default.LEVEL},{code:u.default.LEVEL_ELAPSED_TIME_SECONDS,name:"Level elapsed time (in seconds)",category:l.default.LEVEL},{code:u.default.DISTANCE_BETWEEN_LOOP_OBJECTS,name:"Distance between loop objects",category:l.default.OBJECT},{code:u.default.LOCAL_STORAGE_VARIABLE,name:"Local storage variable",category:l.default.STORAGE},{code:u.default.FPS,name:"FPS",category:l.default.GAME},{code:u.default.DELTA,name:"Delta (milliseconds)",category:l.default.GAME},{code:u.default.DELTA_SECONDS,name:"Delta (seconds)",category:l.default.GAME},{code:u.default.TIME_SCALE,name:"Time scale",category:l.default.GAME},{code:u.default.LAST_TOUCH_X,name:"Last touch X",category:l.default.TOUCH},{code:u.default.LAST_TOUCH_Y,name:"Last touch Y",category:l.default.TOUCH},{code:u.default.ACCELEROMETER_X,name:"Accelerometer X",category:l.default.ACCELEROMETER},{code:u.default.ACCELEROMETER_Y,name:"Accelerometer Y",category:l.default.ACCELEROMETER},{code:u.default.ACCELEROMETER_Z,name:"Accelerometer Z",category:l.default.ACCELEROMETER},{code:u.default.CANVAS_WIDTH,name:"Canvas width",category:l.default.GAME},{code:u.default.CANVAS_HEIGHT,name:"Canvas height",category:l.default.GAME},{code:u.default.OBJECT_COUNT,name:"Object count",category:l.default.OBJECT},{code:u.default.GAMEPAD_BUTTON_VALUE,name:"Gamepad button value",category:l.default.GAMEPAD},{code:u.default.GAMEPAD_AXIS_VALUE,name:"Gamepad axis value",category:l.default.GAMEPAD},{code:u.default.GAMEPAD_BUTTONS_LENGTH,name:"Gamepad buttons length",category:l.default.GAMEPAD},{code:u.default.GAMEPAD_AXES_LENGTH,name:"Gamepad axes length",category:l.default.GAMEPAD},{code:u.default.NEAT_ATTRIBUTE,name:"NEAT attribute",category:l.default.NEUROEVOLUTION_NEAT},{code:u.default.OBJECT_NEURAL_NETWORK_ATTRIBUTE,name:"Object neural network attribute",category:l.default.NEUROEVOLUTION_NEAT},{code:u.default.OBJECT_NEURAL_NETWORK_OUTPUT,name:"Object neural network output",category:l.default.NEUROEVOLUTION_NEAT}]},e.prototype.getKeyboardMovementDirections=function(){return[{code:"8_DIRECTIONS",name:"8 directions"},{code:"LEFT_AND_RIGHT",name:"Left and right"},{code:"UP_AND_DOWN",name:"Up and down"}]},e.prototype.getKeyboardMovementKeys=function(){return[{code:"ARROW_KEYS",name:"Arrow keys"},{code:"WASD_KEYS",name:"WASD keys"},{code:"ARROW_KEYS_OR_WASD_KEYS",name:"Arrow keys or WASD keys"}]},e.prototype.getCustomObjectAttributes=function(){return[{code:"x"},{code:"y"},{code:"xLeft"},{code:"xRight"},{code:"yTop"},{code:"yBottom"},{code:"speedX"},{code:"speedY"},{code:"width"},{code:"height"},{code:"alpha"},{code:"zIndex"},{code:"angle"},{code:"angularVelocity"}]},e.prototype.getVariableCategories=function(){return[{code:m.default.GLOBAL_VARIABLE,name:"Global variable"},{code:m.default.LEVEL_VARIABLE,name:"Level variable"}]},e.prototype.getFpsTypes=function(){return[{code:d.default.UNLIMITED,name:"Unlimited"},{code:d.default.FPS_30,name:"30 FPS"},{code:d.default.FPS_60,name:"60 FPS"},{code:d.default.FPS_120,name:"120 FPS"},{code:d.default.CUSTOM,name:"Custom"}]},e}();t.default=f},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.UNLIMITED="UNLIMITED",e.FPS_30="FPS_30",e.FPS_60="FPS_60",e.FPS_120="FPS_120",e.CUSTOM="CUSTOM"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(20),r=i(29),a=i(30),s=i(5),l=i(10),u=i(0),d=i(3),c=i(39),h=function(){function e(){this.levelVariables=new Array,this.initialObjects=new Array,this.initialConstraints=new Array,this.texts=new Array,this.buttons=new Array}return e.prototype.toJSON=function(){var t=new u.default,i=new e;return i.uid=this.uid,i.name=this.name,i.backgroundType=this.backgroundType,i.backgroundImage=this.backgroundImage.toJSON(),i.backgroundColor=this.backgroundColor.toJSON(),i.backgroundImageWidth=this.backgroundImageWidth,i.backgroundImageHeight=this.backgroundImageHeight,i.gravity=this.gravity,i.electricConstant=this.electricConstant,i.levelVariables=t.arrayToJSON(this.levelVariables),i.initialObjects=t.arrayToJSON(this.initialObjects),i.initialConstraints=t.arrayToJSON(this.initialConstraints),i.texts=t.arrayToJSON(this.texts),i.buttons=t.arrayToJSON(this.buttons),i.cameraCenterX=this.cameraCenterX,i.cameraCenterY=this.cameraCenterY,i.centerCameraAtObject=this.centerCameraAtObject,i.centerCameraAtObjectTypeId=this.centerCameraAtObjectTypeId,i.applyGravitationalForceBetweenObjects=this.applyGravitationalForceBetweenObjects,i.gravitationalConstant=this.gravitationalConstant,i.scriptOnLevelStart=this.scriptOnLevelStart.toJSON(),i.scriptOnAnimationFrame=this.scriptOnAnimationFrame.toJSON(),i},e.fromJSON=function(t,i){if(null==t)return null;var h=i.getObject(t.uid);null==h&&((h=new e).uid=t.uid,i.addObject(h));var p=new u.default;return h.name=t.name,h.backgroundType=t.backgroundType,null!=t.backgroundImage&&(h.backgroundImage=s.default.fromJSON(t.backgroundImage,i)),null!=t.backgroundColor&&(h.backgroundColor=n.default.fromJSON(t.backgroundColor,i)),h.backgroundImageWidth=t.backgroundImageWidth,h.backgroundImageHeight=t.backgroundImageHeight,h.gravity=t.gravity,h.electricConstant=t.electricConstant,h.levelVariables=p.arrayFromJSON(t.levelVariables,d.default.fromJSON,i),h.initialObjects=p.arrayFromJSON(t.initialObjects,r.default.fromJSON,i),h.initialConstraints=p.arrayFromJSON(t.initialConstraints,c.default.fromJSON,i),h.texts=p.arrayFromJSON(t.texts,a.default.fromJSON,i),h.buttons=p.arrayFromJSON(t.buttons,o.default.fromJSON,i),h.cameraCenterX=t.cameraCenterX,h.cameraCenterY=t.cameraCenterY,h.centerCameraAtObject=t.centerCameraAtObject,h.centerCameraAtObjectTypeId=t.centerCameraAtObjectTypeId,h.applyGravitationalForceBetweenObjects=t.applyGravitationalForceBetweenObjects,h.gravitationalConstant=t.gravitationalConstant,h.scriptOnLevelStart=l.default.fromJSON(t.scriptOnLevelStart,i),h.scriptOnAnimationFrame=l.default.fromJSON(t.scriptOnAnimationFrame,i),h},e}();t.default=h},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=function(){function e(){}return e.prototype.toJSON=function(){if(null==this.uid)return null;var t=new e;return t.uid=this.uid,t.name=this.name,t.text=this.text,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.borderSize=this.borderSize,t.borderSizeMouseOver=this.borderSizeMouseOver,t.borderRadius=this.borderRadius,t.fontSize=this.fontSize,null!=this.backgroundColor&&(t.backgroundColor=this.backgroundColor.toJSON()),null!=this.backgroundColorMouseOver&&(t.backgroundColorMouseOver=this.backgroundColorMouseOver.toJSON()),null!=this.borderColor&&(t.borderColor=this.borderColor.toJSON()),null!=this.borderColorMouseOver&&(t.borderColorMouseOver=this.borderColorMouseOver.toJSON()),null!=this.textColor&&(t.textColor=this.textColor.toJSON()),t},e.fromJSON=function(t,i){if(null==t)return null;var o=i.getObject(t.uid);return null==o&&((o=new e).uid=t.uid,i.addObject(o)),o.name=t.name,o.text=t.text,o.x=t.x,o.y=t.y,o.width=t.width,o.height=t.height,o.borderSize=t.borderSize,o.borderSizeMouseOver=t.borderSizeMouseOver,o.borderRadius=t.borderRadius,o.fontSize=t.fontSize,o.backgroundColor=n.default.fromJSON(t.backgroundColor,i),o.backgroundColorMouseOver=n.default.fromJSON(t.backgroundColorMouseOver,i),o.borderColor=n.default.fromJSON(t.borderColor,i),o.borderColorMouseOver=n.default.fromJSON(t.borderColorMouseOver,i),o.textColor=n.default.fromJSON(t.textColor,i),o},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.name=this.name,t.value=this.value,t},e.fromJSON=function(t){if(null==t)return null;var i=new e;return i.uid=t.uid,i.name=t.name,i.value=t.value,i},e.prototype.duplicate=function(){var t=new n.default,i=new e;return i.uid=t.uid(),i.name=this.name,i.value=this.value,i},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(42),o=i(0),r=function(){function e(){this.frames=new Array}return e.prototype.toJSON=function(){var t=new o.default,i=new e;return i.uid=this.uid,i.name=this.name,i.speed=this.speed,i.loop=this.loop,i.frames=t.arrayToJSON(this.frames),i},e.fromJSON=function(t,i){if(null==t)return null;var r=i.getObject(t.uid);null==r&&((r=new e).uid=t.uid,i.addObject(r)),r.name=t.name,r.speed=t.speed,r.loop=t.loop;var a=new o.default;return r.frames=a.arrayFromJSON(t.frames,n.default.fromJSON,i),r},e.prototype.duplicate=function(){var t=new o.default,i=new e;i.uid=t.uid(),i.name=this.name,i.speed=this.speed,i.loop=this.loop;for(var n=new Array,r=0;r<this.frames.length;r++){var a=this.frames[r].duplicate();n.push(a)}return i.frames=n,i},e}();t.default=r},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.LIBRARY="LIBRARY",e.UPLOAD="UPLOAD"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(1),r=i(12),a=i(8),s=i(45),l=i(46),u=function(){function e(e,t,i,o){this.imageAngle=0,this.angle=0,this.shape=r.default.RECTANGLE,this.variables=new Map,this.markedToRemove=!1,this.isObjectOnPlatform=!1,this.isObjectJumping=!1,this.justStartedJumping=!1,this.justBounced=!1,this.numJumps=0,this.isInSustainedJump=!1,this.lastJumpTime=null,this.currentAnimation=null,this.currentAnimationFrame=0,this.currentAnimationFrameFloat=0,this.currentAnimationSpeed=0,this.zIndex=0,this.matterjsBody=null,this.play=i.play,this.level=i,this.type=o,this.shape=o.shape,this.x=e,this.y=t,this.halfWidth=o.width/2,this.halfHeight=o.height/2,this.image=o.image,this.speedX=0,this.speedY=0,this.electricCharge=o.electricCharge,this.mass=o.mass,this.alpha=o.alpha,this.zIndex=o.zIndex;var a=o.objectVariables;if(null!=a)for(var s=0;s<a.length;s++){var l=a[s];this.variables.set(l.name,l.initialValue)}null!=o.initialAnimation&&(this.currentAnimation=o.initialAnimation,this.currentAnimationSpeed=this.currentAnimation.speed),this.util=new n.default}return e.prototype.setMatterjsObject=function(e){this.matterjsBody=e},e.prototype.toString=function(){return"["+this.type.id+"]"},e.prototype.getHeight=function(){return 2*this.halfHeight},e.prototype.getWidth=function(){return 2*this.halfWidth},e.prototype.getXLeft=function(){return this.x-this.halfWidth},e.prototype.getXRight=function(){return this.x+this.halfWidth},e.prototype.getYTop=function(){return this.y-this.halfHeight},e.prototype.getYBottom=function(){return this.y+this.halfHeight},e.prototype.setXLeft=function(e){this.setX(e+this.halfWidth)},e.prototype.setXRight=function(e){this.setX(e-this.halfWidth)},e.prototype.setYTop=function(e){this.setY(e+this.halfHeight)},e.prototype.setYBottom=function(e){this.setY(e-this.halfHeight)},e.prototype.stepAnimation=function(){if(null!=this.currentAnimation){var e=this.play.delta/1e3,t=this.currentAnimationSpeed*e;this.setAnimationFrameFloat(this.currentAnimationFrameFloat+t),this.loopAnimationFrameIfNeeded()}},e.prototype.setAnimationFrameFloat=function(e){this.currentAnimationFrameFloat=e,this.currentAnimationFrame=Math.floor(e)},e.prototype.loopAnimationFrameIfNeeded=function(){this.currentAnimationFrame>=this.currentAnimation.frames.length&&(this.currentAnimation.loop?this.setAnimationFrameFloat(this.currentAnimationFrameFloat%this.currentAnimation.frames.length):this.setAnimationFrameFloat(this.currentAnimation.frames.length-1))},e.prototype.setAnimationByUid=function(e){null!=this.currentAnimation&&this.currentAnimation.uid==e||(this.currentAnimation=this.type.animations.find((function(t){return t.uid==e})),this.setAnimationFrameFloat(0),this.currentAnimationSpeed=this.currentAnimation.speed)},e.prototype.setAnimationFrame=function(e){this.setAnimationFrameFloat(e),this.loopAnimationFrameIfNeeded()},e.prototype.setAnimationSpeed=function(e){this.currentAnimationSpeed=e},e.prototype.getCurrentImage=function(){var e=null;null!=this.currentAnimation?e=this.currentAnimation.frames[this.currentAnimationFrame].image.imageId:e=this.image.imageId;return this.level.play.game.getImage(e)},e.prototype.hasJustStartedJumping=function(){return this.justStartedJumping},e.prototype.hasJustBounced=function(){return this.justBounced},e.prototype.isOnPlatform=function(){return this.isObjectOnPlatform},e.prototype.isJumping=function(){return this.isObjectJumping},e.prototype.setPosition=function(e,t){this.x=e,this.y=t,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectPosition(this,e,t)},e.prototype.setX=function(e){this.x=e,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectPositionX(this,e)},e.prototype.setY=function(e){this.y=e,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectPositionY(this,e)},e.prototype.setSpeed=function(e,t){this.speedX=e,this.speedY=t,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectSpeed(this,e,t)},e.prototype.setSpeedX=function(e){this.speedX=e,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectSpeedX(this,e)},e.prototype.setSpeedY=function(e){this.speedY=e,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectSpeedY(this,e)},e.prototype.setWidth=function(e){if(this.type.physicsEngineType==a.default.MATTER_JS){var t=.5*e/this.halfWidth;this.level.physicsEngine.scaleBody(this,t,1)}this.halfWidth=e/2},e.prototype.setHeight=function(e){if(this.type.physicsEngineType==a.default.MATTER_JS){var t=.5*e/this.halfHeight;this.level.physicsEngine.scaleBody(this,1,t)}this.halfHeight=e/2},e.prototype.setAngle=function(e){this.angle=e,this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectAngle(this,e)},e.prototype.setAngularVelocity=function(e){this.type.physicsEngineType==a.default.MATTER_JS&&this.level.physicsEngine.setObjectAngularVelocity(this,e)},e.prototype.getAngularVelocity=function(){return this.type.physicsEngineType==a.default.MATTER_JS?this.level.physicsEngine.getObjectAngularVelocity(this):0},e.prototype.update=function(e){var t=e/1e3;this.justStartedJumping=!1,this.isObjectOnPlatform=!1,this.justBounced=!1,this.type.physicsEngineType==a.default.BASIC?(1==this.type.applyGravity&&(this.speedY+=this.level.levelDefinition.gravity*t,this.processMaxFallSpeed()),this.x+=this.speedX*t,this.y+=this.speedY*t):this.type.physicsEngineType==a.default.MATTER_JS&&(this.x=this.matterjsBody.position.x,this.y=this.matterjsBody.position.y,this.speedX=this.matterjsBody.velocity.x/this.level.physicsEngine.unitConversion,this.speedY=this.matterjsBody.velocity.y/this.level.physicsEngine.unitConversion,this.angle=this.matterjsBody.angle),this.processBehaviours(t),this.stepAnimation()},e.prototype.processBehaviours=function(e){for(var t=0;t<this.type.behaviours.length;t++){var i=this.type.behaviours[t];if(i.type==s.default.KEYBOARD_MOVEMENT){var n=0,r=0;"8_DIRECTIONS"==i.keyboardMovementDirections?(this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("RIGHT",i.keyboardMovementKeys))&&(n+=1),this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("LEFT",i.keyboardMovementKeys))&&(n-=1),this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("UP",i.keyboardMovementKeys))&&(r-=1),this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("DOWN",i.keyboardMovementKeys))&&(r+=1)):"LEFT_AND_RIGHT"==i.keyboardMovementDirections?(this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("RIGHT",i.keyboardMovementKeys))&&(n+=1),this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("LEFT",i.keyboardMovementKeys))&&(n-=1)):"UP_AND_DOWN"==i.keyboardMovementDirections&&(this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("UP",i.keyboardMovementKeys))&&(r-=1),this.play.isAnyKeyDown(this.util.getKeyCodesByDirection("DOWN",i.keyboardMovementKeys))&&(r+=1)),"SET_SPEED_ON_KEY_DOWN"==i.keyboardMovementType?("8_DIRECTIONS"!=i.keyboardMovementDirections&&"LEFT_AND_RIGHT"!=i.keyboardMovementDirections||this.setSpeedX(n*i.speedX),"8_DIRECTIONS"!=i.keyboardMovementDirections&&"UP_AND_DOWN"!=i.keyboardMovementDirections||this.setSpeedY(r*i.speedY)):"SET_ACCELERATION_ON_KEY_DOWN"==i.keyboardMovementType?("8_DIRECTIONS"!=i.keyboardMovementDirections&&"LEFT_AND_RIGHT"!=i.keyboardMovementDirections||this.setSpeedX(this.speedX+n*i.accelerationX*e),"8_DIRECTIONS"!=i.keyboardMovementDirections&&"UP_AND_DOWN"!=i.keyboardMovementDirections||this.setSpeedY(this.speedY+r*i.accelerationY*e)):i.keyboardMovementType}else if(i.type==s.default.MOUSE_MOVEMENT){if(null!=this.play.mousePos){var a=this.play.mousePos.x-this.x,u=this.play.mousePos.y-this.y;a+=this.play.screenX,u+=this.play.screenY,"SET_SPEED_BY_MOUSE_DISTANCE"==i.mouseMovementType?this.setSpeed(i.factorX*a,i.factorY*u):"SET_ACCELERATION_BY_MOUSE_DISTANCE"==i.mouseMovementType?this.setSpeed(this.speedX+i.factorX*a*e,this.speedY+i.factorY*u*e):"SET_POSITION_BY_MOUSE_POSITION"==i.mouseMovementType&&(this.setPosition(i.factorX*this.play.mousePos.x,i.factorY*this.play.mousePos.y),this.setSpeed(0,0))}}else if(i.type==s.default.STOP_ON_OBJECT||i.type==s.default.BOUNCE_ON_OBJECT)for(var d=i.objectSelector,c=this.play.level.customObjectsMap.get(d)||[],h=0;h<c.length;h++){var p=c[h];if(this.level.testCollision(this,p)){var m=null,f=null,y=p.y+p.halfHeight+this.halfHeight,v=p.y-p.halfHeight-this.halfHeight;f=Math.abs(y-this.y)<Math.abs(v-this.y)?y:v;var E=p.x+p.halfWidth+this.halfWidth,b=p.x-p.halfWidth-this.halfWidth;m=Math.abs(E-this.x)<Math.abs(b-this.x)?E:b,Math.abs(m-this.x)<Math.abs(f-this.y)?(this.x=m,i.type==s.default.STOP_ON_OBJECT?this.setSpeedX(0):i.type==s.default.BOUNCE_ON_OBJECT&&(this.justBounced=!0,this.speedX>0?this.setSpeedX(-i.bounceSpeed):this.setSpeedX(i.bounceSpeed))):(this.y=f,i.type==s.default.STOP_ON_OBJECT?this.setSpeedY(0):i.type==s.default.BOUNCE_ON_OBJECT&&(this.justBounced=!0,this.speedY>0&&this.y<p.y&&this.setSpeedY(-i.bounceSpeed),this.speedY<0&&this.y>p.y&&this.setSpeedY(i.bounceSpeed)))}}else if(i.type==s.default.JUMP_ON_PLATFORM){var g=new o.default;g.uid=i.objectSelector;var T=new Array;T.push(g);var A=[i.jumpKey];this.processJumpOnPlatform(T,A,i.jumpSpeed,!1,1)}else if(i.type==s.default.PLATFORMER_PLAYER)this.processPlatformerPlayerMovement(e,i),this.processJumpSustain(i),this.processJumpOnPlatform(i.platformObjectTypes,i.jumpKeys,i.jumpSpeed,i.allowDoubleJumps,i.maxJumps);else if(i.type==s.default.GAMEPAD_MOVEMENT){var O=i.gamepadIndex,C=i.gamepadXAxisIndex,S=i.gamepadYAxisIndex;if(this.play.isGamepadConnected(O))if(i.gamepadMovementType==l.default.SET_SPEED){var _=this.play.getGamepadAxisValue(O,C)*i.maxSpeed,w=this.play.getGamepadAxisValue(O,S)*i.maxSpeed;this.setSpeedX(_),this.setSpeedY(w)}else if(i.gamepadMovementType==l.default.SET_ACCELERATION){var x=this.play.getGamepadAxisValue(O,C)*i.maxAcceleration,L=this.play.getGamepadAxisValue(O,S)*i.maxAcceleration,j=this.speedX+x*e,I=this.speedY+L*e,B=Math.sqrt(j*j+I*I);B>i.maxSpeed&&(j=j*i.maxSpeed/B,I=I*i.maxSpeed/B),this.setSpeedX(j),this.setSpeedY(I)}}}},e.prototype.processMaxFallSpeed=function(){for(var e=0;e<this.type.behaviours.length;e++){var t=this.type.behaviours[e];t.type==s.default.PLATFORMER_PLAYER&&(this.speedY=Math.min(this.speedY,t.maxFallSpeed))}},e.prototype.processJumpSustain=function(e){if(this.play.isAnyKeyDown(e.jumpKeys)||(this.isInSustainedJump=!1),this.isInSustainedJump){var t=1e3*e.jumpSustainTime;this.level.elapsedTime-this.lastJumpTime<t&&this.setSpeedY(-e.jumpSpeed)}},e.prototype.processPlatformerPlayerMovement=function(e,t){var i=0,n=t.moveLeftKeys;this.play.isAnyKeyDown(n)&&(i-=1);var o=t.moveRightKeys;this.play.isAnyKeyDown(o)&&(i+=1);var r=t.maxSpeed,a=t.timeToReachMaxSpeed,s=t.timeToStop,l=this.speedX;if(0==i)if(0==s)l=0;else{var u=e*r/s;l>0?l=Math.max(l-u,0):l<0&&(l=Math.min(l+u,0))}else 0==a?l=i*r:l+=i*(e*r/a);l>r&&(l=r),l<-r&&(l=-r),this.setSpeedX(l)},e.prototype.processJumpOnPlatform=function(e,t,i,n,o){for(var r=new Array,a=0;a<e.length;a++)for(var s=this.play.level.customObjectsMap.get(e[a].uid)||[],l=0;l<s.length;l++)r.push(s[l]);var u=new Array;for(a=0;a<r.length;a++){var d=r[a];this.level.testCollision(this,d)&&u.push(d)}var c=null,h=0,p=null,m=0;for(a=0;a<u.length;a++){var f=this.util.distanceObjects(this,u[a]);null==c||f<h?(p=c,m=h,c=u[a],h=f):(null==p||f<m)&&(p=u[a],m=f)}null!=c&&this.processCollisionJumpOnPlatform(c,t,i),null!=p&&this.processCollisionJumpOnPlatform(p,t,i),this.processDoubleJump(n,i,t,o)},e.prototype.processDoubleJump=function(e,t,i,n){e&&!this.hasJustStartedJumping()&&this.play.onAnyKeyDown(i)&&this.numJumps<n&&this.jump(t)},e.prototype.jump=function(e){this.setSpeedY(-e),this.justStartedJumping=!0,this.isObjectJumping=!0,this.isInSustainedJump=!0,this.lastJumpTime=this.level.elapsedTime,this.numJumps+=1},e.prototype.processCollisionJumpOnPlatform=function(e,t,i){var n=null,o=null,r=e.y+e.halfHeight+this.halfHeight,a=e.y-e.halfHeight-this.halfHeight;o=Math.abs(r-this.y)<Math.abs(a-this.y)?r:a;var s=e.x+e.halfWidth+this.halfWidth,l=e.x-e.halfWidth-this.halfWidth;n=Math.abs(s-this.x)<Math.abs(l-this.x)?s:l,Math.abs(n-this.x)<Math.abs(o-this.y)?(this.speedX>0?n<this.x&&(this.speedX=0):this.speedX<0&&n>this.x&&(this.speedX=0),this.x=n):(this.y=o,this.speedY>=0&&this.y<e.y?(this.isObjectOnPlatform=!0,this.isObjectJumping=!1,this.setSpeedY(0),this.numJumps=0):this.isObjectOnPlatform=!1,this.speedY<0&&this.y>e.y&&this.setSpeedY(0),1==this.isObjectOnPlatform&&this.play.onAnyKeyDown(t)&&this.jump(i))},e.prototype.getVariable=function(e){var t=this.variables.get(e);return null==t?(this.variables.set(e,0),0):t},e.prototype.setVariable=function(e,t){this.variables.set(e,t)},e.prototype.addToVariable=function(e,t){var i=this.variables.get(e);null==i?this.variables.set(e,t):this.variables.set(e,i+t)},e.prototype.drawShape=function(e){e.fillStyle="#000000",e.beginPath(),e.rect(this.x-this.play.screenX-this.halfWidth,this.y-this.play.screenY-this.halfHeight,2*this.halfWidth,2*this.halfHeight),e.closePath(),e.fill()},e}();t.default=u},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.GLOBAL_VARIABLE="GLOBAL_VARIABLE",e.LEVEL_VARIABLE="LEVEL_VARIABLE",e.OBJECT_VARIABLE="OBJECT_VARIABLE"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.FILL="FILL",e.STROKE="STROKE",e.FILL_AND_STROKE="FILL_AND_STROKE"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.convertToWorldPositionX=function(e,t,i){return e/t+i},e.prototype.convertToWorldPositionY=function(e,t,i){return e/t+i},e.prototype.convertToCanvasPositionX=function(e,t,i){return(e-i)*t},e.prototype.convertToCanvasPositionY=function(e,t,i){return(e-i)*t},e.prototype.drawRoundRect=function(e,t,i,n,o,r,a,s){if(void 0===s&&(s=!0),void 0===r&&(r=5),"number"==typeof r)r={tl:r,tr:r,br:r,bl:r};else{var l={tl:0,tr:0,br:0,bl:0};for(var u in l)r[u]=r[u]||l[u]}e.beginPath(),e.moveTo(t+r.tl,i),e.lineTo(t+n-r.tr,i),e.quadraticCurveTo(t+n,i,t+n,i+r.tr),e.lineTo(t+n,i+o-r.br),e.quadraticCurveTo(t+n,i+o,t+n-r.br,i+o),e.lineTo(t+r.bl,i+o),e.quadraticCurveTo(t,i+o,t,i+o-r.bl),e.lineTo(t,i+r.tl),e.quadraticCurveTo(t,i,t+r.tl,i),e.closePath(),a&&e.fill(),s&&e.stroke()},e}();t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.LIBRARY="LIBRARY",e.UPLOAD="UPLOAD"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),o=function(){function e(){this.angle=0,this.zIndex=0,this.inheritZIndex=!0}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.objectType=new n.default,t.objectType.uid=this.objectType.uid,t.x=this.x,t.y=this.y,t.repeatTimes=this.repeatTimes,t.dx=this.dx,t.dy=this.dy,t.repeatTimes2=this.repeatTimes2,t.dx2=this.dx2,t.dy2=this.dy2,t.zIndex=this.zIndex,t.angle=this.angle,t.inheritZIndex=this.inheritZIndex,t},e.fromJSON=function(t,i){if(null==t)return null;var o=i.getObject(t.uid);return null==o&&((o=new e).uid=t.uid,i.addObject(o)),o.objectType=i.getOrAddObject(t.objectType,n.default),o.x=t.x,o.y=t.y,o.repeatTimes=t.repeatTimes,o.dx=t.dx,o.dy=t.dy,o.repeatTimes2=t.repeatTimes2,o.dx2=t.dx2,o.dy2=t.dy2,o.angle=t.angle,o.zIndex=t.zIndex,o.inheritZIndex=t.inheritZIndex,o},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=function(){function e(){this.zIndex=0}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.text=this.text,t.name=this.name,t.x=this.x,t.y=this.y,t.color=this.color.toJSON(),t.fontSize=this.fontSize,t.fontFamily=this.fontFamily,t.align=this.align,t.zIndex=this.zIndex,t.alpha=this.alpha,t.angle=this.angle,t},e.fromJSON=function(t,i){if(null==t)return null;var o=i.getObject(t.uid);return null==o&&((o=new e).uid=t.uid,i.addObject(o)),o.text=t.text,o.name=t.name,o.x=t.x,o.y=t.y,o.color=n.default.fromJSON(t.color,i),o.fontSize=t.fontSize,o.fontFamily=t.fontFamily,o.align=t.align,o.zIndex=t.zIndex,o.alpha=t.alpha,o.angle=t.angle,o},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(54),r=i(57),a=i(59),s=function(){function e(){this.mouseOver=!1}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.description=this.description,t.comment=this.comment,t.blockType=this.blockType,null!=this.actionBlock&&(t.actionBlock=this.actionBlock.toJSON()),null!=this.conditionBlock&&(t.conditionBlock=this.conditionBlock.toJSON()),null!=this.loopBlock&&(t.loopBlock=this.loopBlock.toJSON()),null!=this.parentBlock&&(t.parentBlock=new e,t.parentBlock.uid=this.parentBlock.uid),t.mouseOver=this.mouseOver,t},e.fromJSON=function(t,i){if(null==t)return null;var n=i.getObject(t.uid);return null==n&&((n=new e).uid=t.uid,i.addObject(n)),n.description=t.description,n.comment=t.comment,n.blockType=t.blockType,n.actionBlock=o.default.fromJSON(t.actionBlock,i),n.conditionBlock=r.default.fromJSON(t.conditionBlock,i),n.loopBlock=a.default.fromJSON(t.loopBlock,i),null!=t.parentBlock&&(n.parentBlock=i.getOrAddObject(t.parentBlock,e)),n.mouseOver=t.mouseOver,n},e.prototype.duplicate=function(t){var i,o,r,a=new n.default,s=new e;return s.uid=a.uid(),s.description=this.description,s.comment=this.comment,s.blockType=this.blockType,s.actionBlock=null===(i=this.actionBlock)||void 0===i?void 0:i.duplicate(),s.conditionBlock=null===(o=this.conditionBlock)||void 0===o?void 0:o.duplicate(s),s.loopBlock=null===(r=this.loopBlock)||void 0===r?void 0:r.duplicate(s),s.parentBlock=t,s.mouseOver=!1,s},e}();t.default=s},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.LEVEL_SCRIPT="LEVEL_SCRIPT",e.OBJECT_SCRIPT="OBJECT_SCRIPT",e.FUNCTION="FUNCTION"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.name=this.name,t.imageData=this.imageData,t},e.fromJSON=function(t,i){if(null==t)return null;var n=i.getObject(t.uid);return null==n&&((n=new e).uid=t.uid,i.addObject(n)),n.name=t.name,n.imageData=t.imageData,n},e}();t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.COLLISION="COLLISION",e.KEYDOWN="KEYDOWN",e.KEYUP="KEYUP",e.EXPRESSION="EXPRESSION",e.ALWAYS="ALWAYS",e.ON_LEVEL_START="ON_LEVEL_START",e.ON_BUTTON_CLICK="ON_BUTTON_CLICK",e.IS_BUTTON_DOWN="IS_BUTTON_DOWN",e.EVERY_X_FRAMES="EVERY_X_FRAMES",e.EVERY_X_SECONDS="EVERY_X_SECONDS",e.DISTANCE_BETWEEN="DISTANCE_BETWEEN",e.MOUSEDOWN="MOUSEDOWN",e.MOUSEUP="MOUSEUP",e.IS_GAMEPAD_CONNECTED="IS_GAMEPAD_CONNECTED",e.IS_GAMEPAD_BUTTON_PRESSED="IS_GAMEPAD_BUTTON_PRESSED",e.IS_GAMEPAD_BUTTON_JUST_PRESSED="IS_GAMEPAD_BUTTON_JUST_PRESSED",e.IS_GAMEPAD_BUTTON_JUST_RELEASED="IS_GAMEPAD_BUTTON_JUST_RELEASED",e.REPEAT_WHILE_MOUSE_IS_DOWN="REPEAT_WHILE_MOUSE_IS_DOWN",e.REPEAT_WHILE_KEY_IS_DOWN="REPEAT_WHILE_KEY_IS_DOWN",e.MOUSE_OVER_OBJECT="MOUSE_OVER_OBJECT",e.MOUSE_OVER_BUTTON="MOUSE_OVER_BUTTON",e.CLICK_ON_OBJECT="CLICK_ON_OBJECT",e.TOUCH_ON_BUTTON="TOUCH_ON_BUTTON",e.TOUCH_ON_OBJECT="TOUCH_ON_OBJECT",e.ON_TOUCH_START="ON_TOUCH_START",e.ON_TOUCH_MOVE="ON_TOUCH_MOVE",e.ON_TOUCH_END="ON_TOUCH_END"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.FIXED_DISTANCE_BETWEEN_TWO_OBJECTS="FIXED_DISTANCE_BETWEEN_TWO_OBJECTS",e.FIXED_DISTANCE_BETWEEN_OBJECT_AND_POSITION="FIXED_DISTANCE_BETWEEN_OBJECT_AND_POSITION"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e,t,i,n){void 0===n&&(n="100"),this.red=e,this.green=t,this.blue=i,this.alpha=n}return e.prototype.toJSON=function(){return new e(this.red,this.green,this.blue,this.alpha)},e.fromJSON=function(t,i){return new e(t.red,t.green,t.blue,t.alpha)},e.prototype.duplicate=function(){return new e(this.red,this.green,this.blue,this.alpha)},e}();t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.OBJECT="OBJECT",e.LEVEL="LEVEL",e.CAMERA="CAMERA",e.GAME="GAME",e.STORAGE="STORAGE",e.BUTTON="BUTTON",e.TEXT="TEXT",e.DRAWING="DRAWING",e.AUDIO="AUDIO",e.GAMEPAD="GAMEPAD",e.PHYSICS_ENGINE="PHYSICS_ENGINE",e.NEUROEVOLUTION_NEAT="NEUROEVOLUTION_NEAT",e.FUNCTIONS="FUNCTIONS",e.OTHERS="OTHERS"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.name=this.name,t.audioData=this.audioData,t},e.fromJSON=function(t,i){if(null==t)return null;var n=i.getObject(t.uid);return null==n&&((n=new e).uid=t.uid,i.addObject(n)),n.name=t.name,n.audioData=t.audioData,n},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(29),r=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.name=this.name,t.object1=this.object1.toJSON(),t.object2=this.object2.toJSON(),t.x1=this.x1,t.y1=this.y1,t.x2=this.x2,t.y2=this.y2,t.damping=this.damping,t.stiffness=this.stiffness,t.visible=this.visible,t.lineWidth=this.lineWidth,t.color=this.color.toJSON(),t.alpha=this.alpha,t.zIndex=this.zIndex,t},e.fromJSON=function(t,i){if(null==t||null==t.uid)return null;var r=i.getObject(t.uid);return null==r&&((r=new e).uid=t.uid,i.addObject(r)),r.name=t.name,r.object1=o.default.fromJSON(t.object1,i),r.object2=o.default.fromJSON(t.object2,i),r.x1=t.x1,r.y1=t.y1,r.x2=t.x2,r.y2=t.y2,r.damping=t.damping,r.stiffness=t.stiffness,r.visible=t.visible,r.lineWidth=t.lineWidth,r.color=n.default.fromJSON(t.color,i),r.alpha=t.alpha,r.zIndex=t.zIndex,r},e}();t.default=r},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.name=this.name,t.value=this.value,t},e.fromJSON=function(t){if(null==t)return null;var i=new e;return i.uid=t.uid,i.name=t.name,i.value=t.value,i},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(5),o=i(0),r=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.image=this.image.toJSON(),t},e.fromJSON=function(t,i){if(null==t)return null;var o=i.getObject(t.uid);return null==o&&((o=new e).uid=t.uid,i.addObject(o)),o.image=n.default.fromJSON(t.image,i),o},e.prototype.duplicate=function(){var t=new o.default,i=new e;return i.uid=t.uid(),i.image=this.image.duplicate(),i},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(1),r=function(){function e(){this.platformObjectTypes=new Array}return e.prototype.toJSON=function(){var t=new n.default,i=new e;return i.uid=this.uid,i.type=this.type,i.keyboardMovementDirections=this.keyboardMovementDirections,i.keyboardMovementKeys=this.keyboardMovementKeys,i.keyboardMovementType=this.keyboardMovementType,i.gamepadMovementType=this.gamepadMovementType,i.speedX=this.speedX,i.speedY=this.speedY,i.accelerationX=this.accelerationX,i.accelerationY=this.accelerationY,i.mouseMovementType=this.mouseMovementType,i.factorX=this.factorX,i.factorY=this.factorY,i.objectSelector=this.objectSelector,i.bounceSpeed=this.bounceSpeed,i.jumpKey=this.jumpKey,i.jumpSpeed=this.jumpSpeed,i.maxSpeed=this.maxSpeed,i.maxAcceleration=this.maxAcceleration,i.maxFallSpeed=this.maxFallSpeed,i.timeToReachMaxSpeed=this.timeToReachMaxSpeed,i.timeToStop=this.timeToStop,i.moveLeftKeys=this.moveLeftKeys,i.moveRightKeys=this.moveRightKeys,i.jumpKeys=this.jumpKeys,i.allowDoubleJumps=this.allowDoubleJumps,i.maxJumps=this.maxJumps,i.jumpSustainTime=this.jumpSustainTime,i.platformObjectTypes=t.arrayToJSON(this.platformObjectTypes),i.gamepadIndex=this.gamepadIndex,i.gamepadXAxisIndex=this.gamepadXAxisIndex,i.gamepadYAxisIndex=this.gamepadYAxisIndex,i},e.adjustJsonForCompatibility=function(e){if(null==e.uid){var t=new n.default;e.uid=t.uid()}},e.fromJSON=function(t,i){var r=new n.default;if(null==t)return null;e.adjustJsonForCompatibility(t);var a=i.getObject(t.uid);return null==a&&((a=new e).uid=t.uid,i.addObject(a)),a.type=t.type,a.keyboardMovementDirections=t.keyboardMovementDirections,a.keyboardMovementKeys=t.keyboardMovementKeys,a.keyboardMovementType=t.keyboardMovementType,a.gamepadMovementType=t.gamepadMovementType,a.speedX=t.speedX,a.speedY=t.speedY,a.accelerationX=t.accelerationX,a.accelerationY=t.accelerationY,a.mouseMovementType=t.mouseMovementType,a.factorX=t.factorX,a.factorY=t.factorY,a.objectSelector=t.objectSelector,a.bounceSpeed=t.bounceSpeed,a.jumpKey=t.jumpKey,a.jumpSpeed=t.jumpSpeed,a.maxSpeed=t.maxSpeed,a.maxAcceleration=t.maxAcceleration,a.maxFallSpeed=t.maxFallSpeed,a.timeToReachMaxSpeed=t.timeToReachMaxSpeed,a.timeToStop=t.timeToStop,a.moveLeftKeys=t.moveLeftKeys,a.moveRightKeys=t.moveRightKeys,a.jumpKeys=t.jumpKeys,a.allowDoubleJumps=t.allowDoubleJumps,a.maxJumps=t.maxJumps,a.jumpSustainTime=t.jumpSustainTime,a.platformObjectTypes=r.arrayFromJSON(t.platformObjectTypes,o.default.fromJSON,i),a.gamepadIndex=t.gamepadIndex,a.gamepadXAxisIndex=t.gamepadXAxisIndex,a.gamepadYAxisIndex=t.gamepadYAxisIndex,a},e.prototype.duplicate=function(){var t=new n.default,i=new e;i.uid=t.uid(),i.type=this.type,i.keyboardMovementDirections=this.keyboardMovementDirections,i.keyboardMovementKeys=this.keyboardMovementKeys,i.keyboardMovementType=this.keyboardMovementType,i.gamepadMovementType=this.gamepadMovementType,i.speedX=this.speedX,i.speedY=this.speedY,i.accelerationX=this.accelerationX,i.accelerationY=this.accelerationY,i.mouseMovementType=this.mouseMovementType,i.factorX=this.factorX,i.factorY=this.factorY,i.objectSelector=this.objectSelector,i.bounceSpeed=this.bounceSpeed,i.jumpKey=this.jumpKey,i.jumpSpeed=this.jumpSpeed,i.maxSpeed=this.maxSpeed,i.maxAcceleration=this.maxAcceleration,i.maxFallSpeed=this.maxFallSpeed,i.timeToReachMaxSpeed=this.timeToReachMaxSpeed,i.timeToStop=this.timeToStop,i.moveLeftKeys=this.moveLeftKeys,i.moveRightKeys=this.moveRightKeys,i.jumpKeys=this.jumpKeys,i.allowDoubleJumps=this.allowDoubleJumps,i.maxJumps=this.maxJumps,i.jumpSustainTime=this.jumpSustainTime;for(var o=new Array,r=0;r<this.platformObjectTypes.length;r++){var a=this.platformObjectTypes[r];o.push(a)}return i.platformObjectTypes=o,i.gamepadIndex=this.gamepadIndex,i.gamepadXAxisIndex=this.gamepadXAxisIndex,i.gamepadYAxisIndex=this.gamepadYAxisIndex,i},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var n=i(6),o=i(7),r=i(34),a=i(16),s=i(13),l=i(66),u=i(48),d=i(23),c=i(49),h=i(25),p=i(35),m=function(){function e(){this.expressionEvaluatorVisualScripts=new l.default}return e.prototype.generateVisualScriptSourceCode=function(e,t,i,n){var o="";if(null!=e.level){var a="//Visual script for level: "+e.level.name;o+=this.addLine(a,i)}n&&(window.debugInfo={},o+=this.addLine("window.debugInfo = {};",0));for(var s=e.blocks,l=0;l<s.length;l++){var u=s[l];o+=this.generateBlockSourceCode(u,t,i,n)}return e.containsConditionOfType(r.default.IS_GAMEPAD_BUTTON_JUST_PRESSED)&&(o+=this.addLine("play.updatePreviousGamepadButtonPressedState();",i)),n&&(window.debugInfo.currentBlockUid="",o+=this.addLine("window.debugInfo.currentBlockUid = '';",0)),o},e.prototype.generateBlockSourceCode=function(e,t,i,n){var o="";if(o+=this.addLine("",i),n&&(window.debugInfo.currentBlockUid=e.uid,o+=this.addLine("window.debugInfo.currentBlockUid = '"+e.uid+"';",i)),e.blockType==s.default.ACTION){var r=e.actionBlock;o+=this.generateActionSourceCode(r,t,i)}else if(e.blockType==s.default.CONDITION){var a=e.conditionBlock;o+=this.generateConditionSourceCode(a,t,i,n)}else if(e.blockType==s.default.LOOP){var l=e.loopBlock;o+=this.generateLoopSourceCode(l,t,i,n)}return o},e.prototype.generateLoopSourceCode=function(e,t,i,o){var r="";r+=this.addLine("{",i),i++;var s=e.loop,l=e.loop.loopVariableName;if(s.type==a.default.OBJECT){if(s.objectSelectorDefinition.type==n.default.ALL_OBJECTS_OF_TYPE){var u="let objectList_"+l+' = play.util.getObjectsByType("'+s.objectSelectorDefinition.objectType.uid+'",play);';r+=this.addLine(u,i)}var d="for (let i_"+l+"=0; i_"+l+"<objectList_"+l+".length;i_"+l+"++) {";r+=this.addLine(d,i);var c="let $"+l+" = objectList_"+l+"[i_"+l+"];";r+=this.addLine(c,i+1)}else if(s.type==a.default.NUMBER){var h=s.from,p=s.to,m=s.increment;u="for (let $"+l+"="+h+"; $"+l+(m>0?"<=":">=")+p+";$"+l+"+="+m+") {";r+=this.addLine(u,i)}else if(s.type==a.default.REPEAT_X_TIMES){u="for (let _num=0; _num<"+s.times+";_num++) {";r+=this.addLine(u,i)}else{u="{";r+=this.addLine(u,i)}for(var f=e.blocks,y=0;y<f.length;y++){var v=f[y];r+=this.generateBlockSourceCode(v,t,i+1,o)}return r+=this.addLine("}",i),i--,r+=this.addLine("}",i)},e.prototype.generateConditionSourceCode=function(e,t,i,n){var o,a,s,l,d,c,h="";h+=this.addLine("{",i),i++;var p=e.condition;if(p.type==r.default.KEYDOWN){var m='if (play.onKeyDown("'+p.keyCode+'")) {';h+=this.addLine(m,i)}else if(p.type==r.default.ALWAYS){m="{ //ALWAYS";h+=this.addLine(m,i)}else if(p.type==r.default.KEYUP){m='if (play.onKeyUp("'+p.keyCode+'")) {';h+=this.addLine(m,i)}else if(p.type==r.default.REPEAT_WHILE_KEY_IS_DOWN){m='if (play.isKeyDown("'+p.keyCode+'")) {';h+=this.addLine(m,i)}else if(p.type==r.default.REPEAT_WHILE_MOUSE_IS_DOWN){m="if (play.isMouseButtonDown("+(O=null!==(o=p.mouseButton)&&void 0!==o?o:-1)+")) {";h+=this.addLine(m,i)}else if(p.type==r.default.EXPRESSION){m="if ("+this.expressionEvaluatorVisualScripts.evaluateExpression(p.expression,t,!1)+") {";h+=this.addLine(m,i)}else if(p.type==r.default.MOUSEDOWN){if("-1"==(O=null!==(a=p.mouseButton)&&void 0!==a?a:-1)){m="if (play.isAnyMouseButtonJustDown()) {";h+=this.addLine(m,i)}else{m="if (play.isMouseButtonJustDown("+O+")) {";h+=this.addLine(m,i)}}else if(p.type==r.default.MOUSEUP){if("-1"==(O=null!==(s=p.mouseButton)&&void 0!==s?s:-1)){m="if (play.isAnyMouseButtonJustUp()) {";h+=this.addLine(m,i)}else{m="if (play.isMouseButtonJustUp("+O+")) {";h+=this.addLine(m,i)}}else if(p.type==r.default.COLLISION){h+=this.generateObjectSelectorSourceCode(p.object1,"objectList1",i),h+=this.generateObjectSelectorSourceCode(p.object2,"objectList2",i);m="if (play.level.testCollisionObjectLists(objectList1, objectList2)) {";h+=this.addLine(m,i)}else if(p.type==r.default.EVERY_X_SECONDS){m='if (play.checkEveryXSeconds("'+p.uid+'", '+p.seconds+")) {";h+=this.addLine(m,i)}else if(p.type==r.default.EVERY_X_FRAMES){m='if (play.checkEveryXFrames("'+p.uid+'", '+p.frames+")) {";h+=this.addLine(m,i)}else if(p.type==r.default.DISTANCE_BETWEEN){var f=this.expressionEvaluatorVisualScripts.evaluateExpression(p.x1,t,!1),y=this.expressionEvaluatorVisualScripts.evaluateExpression(p.y1,t,!1),v=this.expressionEvaluatorVisualScripts.evaluateExpression(p.x2,t,!1),E=this.expressionEvaluatorVisualScripts.evaluateExpression(p.y2,t,!1),b=this.expressionEvaluatorVisualScripts.evaluateExpression(p.distance,t,!1),g=null;p.relation==u.default.EQUAL?g="==":p.relation==u.default.GREATER?g=">":p.relation==u.default.SMALLER?g="<":p.relation==u.default.GREATER_OR_EQUAL?g=">=":p.relation==u.default.SMALLER_OR_EQUAL?g="<=":p.relation==u.default.DIFFERENT&&(g="!=");m="let distance = play.util.distance("+f+","+y+","+v+","+E+");";var T="if (distance "+g+" "+b+") {";h+=this.addLine(m,i),h+=this.addLine(T,i)}else if(p.type==r.default.ON_LEVEL_START){m="if (play.level.currentFrame == 0) {";h+=this.addLine(m,i)}else if(p.type==r.default.ON_BUTTON_CLICK){m='if (play.util.checkButtonClick("'+p.button.uid+'", '+(O=null!==(l=p.mouseButton)&&void 0!==l?l:-1)+", play)) {";h+=this.addLine(m,i)}else if(p.type==r.default.IS_BUTTON_DOWN){m='if (play.util.isButtonDown("'+p.button.uid+'", '+(O=null!==(d=p.mouseButton)&&void 0!==d?d:-1)+", play)) {";h+=this.addLine(m,i)}else if(p.type==r.default.MOUSE_OVER_BUTTON){m='if (play.util.checkMouseOverButton("'+p.button.uid+'", play)) {';h+=this.addLine(m,i)}else if(p.type==r.default.MOUSE_OVER_OBJECT){m="let isMouseOverObject = false;";h+=this.addLine(m,i);T="if (play.isMouseOverObject(customObject)) isMouseOverObject = true;";h+=this.generateObjectLoopSourceCodeWithBody(p.objectSelectorDefinition,"customObject",i,[T]);var A="if (isMouseOverObject) {";h+=this.addLine(A,i)}else if(p.type==r.default.CLICK_ON_OBJECT){var O=null!==(c=p.mouseButton)&&void 0!==c?c:-1;m="let isClickingOnObject = false;";h+=this.addLine(m,i);var C="let isMouseDown = play.isMouseButtonJustDown("+O+");";h+=this.addLine(C,i);var S="if (isMouseDown && play.mousePos != null) {";h+=this.addLine(S,i),i++;T="if (play.isMouseOverObject(customObject)) isClickingOnObject = true;";h+=this.generateObjectLoopSourceCodeWithBody(p.objectSelectorDefinition,"customObject",i,[T]),i--,h+=this.addLine("}",i);A="if (isClickingOnObject) {";h+=this.addLine(A,i)}else if(p.type==r.default.ON_TOUCH_START){m="if (play.touchStartList.length > 0) {";h+=this.addLine(m,i)}else if(p.type==r.default.ON_TOUCH_MOVE){m="if (play.touchMoveList.length > 0) {";h+=this.addLine(m,i)}else if(p.type==r.default.ON_TOUCH_END){m="if (play.touchEndList.length > 0) {";h+=this.addLine(m,i)}else if(p.type==r.default.TOUCH_ON_BUTTON){m='if (play.util.checkButtonTouch("'+p.button.uid+'", play)) {';h+=this.addLine(m,i)}else if(p.type==r.default.TOUCH_ON_OBJECT){m="let isClickingOnObject = false;";h+=this.addLine(m,i);C="let hasTouchStart = play.touchStartList.length > 0;";h+=this.addLine(C,i);S="if (hasTouchStart) {";h+=this.addLine(S,i),i++;T="if (play.isLastTouchOverObject(customObject)) isClickingOnObject = true;";h+=this.generateObjectLoopSourceCodeWithBody(p.objectSelectorDefinition,"customObject",i,[T]),i--,h+=this.addLine("}",i);A="if (isClickingOnObject) {";h+=this.addLine(A,i)}else if(p.type==r.default.IS_GAMEPAD_CONNECTED){m="if (play.isGamepadConnected("+p.gamepadIndex+")) {";h+=this.addLine(m,i)}else if(p.type==r.default.IS_GAMEPAD_BUTTON_PRESSED){m="if (play.isGamepadButtonPressed("+p.gamepadIndex+","+p.gamepadButtonIndex+")) {";h+=this.addLine(m,i)}else if(p.type==r.default.IS_GAMEPAD_BUTTON_JUST_PRESSED){m="if (play.isGamepadButtonJustPressed("+p.gamepadIndex+","+p.gamepadButtonIndex+")) {";h+=this.addLine(m,i)}else if(p.type==r.default.IS_GAMEPAD_BUTTON_JUST_RELEASED){m="if (play.isGamepadButtonJustReleased("+p.gamepadIndex+","+p.gamepadButtonIndex+")) {";h+=this.addLine(m,i)}else h+=this.addLine("{",i);for(var _=e.ifBlocks,w=0;w<_.length;w++){var x=_[w];h+=this.generateBlockSourceCode(x,t,i+1,n)}if(e.elseBlocksEnabled){h+=this.addLine("} else {",i);for(w=0;w<e.elseBlocks.length;w++){x=e.elseBlocks[w];h+=this.generateBlockSourceCode(x,t,i+1,n)}h+=this.addLine("}",i)}else h+=this.addLine("}",i);return i--,h+=this.addLine("}",i)},e.prototype.generateActionSourceCode=function(e,t,i){var n=this.addLine("{ //event action",i);i++;var r=e.action;if(r.type.code==o.default.GO_TO_NEXT_LEVEL.code){var a="play.goToNextLevel(); return;";n+=this.addLine(a,i)}else if(r.type.code==o.default.GO_TO_PREVIOUS_LEVEL.code){a="play.goToPreviousLevel(); return;";n+=this.addLine(a,i)}else if(r.type.code==o.default.GO_TO_LEVEL.code){a='play.goToLevelUid("'+r.levelDefinition.uid+'"); return;';n+=this.addLine(a,i)}else if(r.type.code==o.default.ADD_TO_SCORE.code){a="play.score += "+(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+";";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_SCORE.code){a="play.score = "+(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+";";n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_TEXT.code){var s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1),u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1),h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1),m=null;r.textType==c.default.STATIC_TEXT?m="`"+r.text+"`":r.textType==c.default.EXPRESSION&&(m=this.expressionEvaluatorVisualScripts.evaluateExpression(r.text,t,!0));var f=r.fontFamily,y=this.expressionEvaluatorVisualScripts.evaluateExpression(r.fontSize,t,!1),v=r.textAlign;n+=this.generateColorSourceCode(r.color,"color",t,i);a='play.customElementsToDraw.push({"type":"TEXT", "x":'+s+', "y":'+l+', "text":'+m+', "fontSize":'+y+', "fontFamily":"'+f+'", "alpha":'+u+', "zIndex":"'+h+'", "color":color, "textAlign":"'+v+'"});';n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_LINE.code){var E=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x1,t,!1),b=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y1,t,!1),g=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x2,t,!1),T=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y2,t,!1),A=this.expressionEvaluatorVisualScripts.evaluateExpression(r.lineWidth,t,!1);u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1),h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1);n+=this.generateColorSourceCode(r.color,"color",t,i);a='play.customElementsToDraw.push({"type":"LINE","x1":'+E+', "y1":'+b+', "x2":'+g+', "y2":'+T+', "lineWidth":'+A+', "color":color, "alpha":'+u+', "zIndex":'+h+"});";n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_RECT.code){s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1);var O=this.expressionEvaluatorVisualScripts.evaluateExpression(r.width,t,!1),C=this.expressionEvaluatorVisualScripts.evaluateExpression(r.height,t,!1),S=(u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1),h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1),"null");null!=r.borderSize&&(S=this.expressionEvaluatorVisualScripts.evaluateExpression(r.borderSize,t,!1)),n+=this.generateColorSourceCode(r.color,"color",t,i),n+=this.generateColorSourceCode(r.borderColor,"borderColor",t,i);a='play.customElementsToDraw.push({"type":"RECT","x":'+s+', "y":'+l+', "width":'+O+', "height":'+C+', "borderSize":'+S+', "color":color, "borderColor":borderColor, "zIndex":'+h+', "alpha":'+u+', "drawType":"'+r.drawType+'"});';n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_CIRCLE.code){s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1);var _=this.expressionEvaluatorVisualScripts.evaluateExpression(r.radius,t,!1);u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1),h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1),S="null";null!=r.borderSize&&(S=this.expressionEvaluatorVisualScripts.evaluateExpression(r.borderSize,t,!1)),n+=this.generateColorSourceCode(r.color,"color",t,i),n+=this.generateColorSourceCode(r.borderColor,"borderColor",t,i);a='play.customElementsToDraw.push({"type":"CIRCLE","x":'+s+', "y":'+l+', "radius":'+_+', "borderSize":'+S+', "color":color, "borderColor":borderColor, "drawType":"'+r.drawType+'", "alpha":'+u+', "zIndex":'+h+"});";n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_ARC.code){s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1),_=this.expressionEvaluatorVisualScripts.evaluateExpression(r.radius,t,!1);var w=this.expressionEvaluatorVisualScripts.evaluateExpression(r.startAngle,t,!1),x=this.expressionEvaluatorVisualScripts.evaluateExpression(r.endAngle,t,!1);u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1),h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1),S="null";null!=r.borderSize&&(S=this.expressionEvaluatorVisualScripts.evaluateExpression(r.borderSize,t,!1)),n+=this.generateColorSourceCode(r.color,"color",t,i),n+=this.generateColorSourceCode(r.borderColor,"borderColor",t,i);a='play.customElementsToDraw.push({"type":"ARC","x":'+s+', "y":'+l+', "radius":'+_+', "startAngle":'+w+', "endAngle":'+x+', "borderSize":'+S+', "color":color, "borderColor":borderColor, "drawType":"'+r.drawType+'", "alpha":'+u+', "zIndex":'+h+"});";n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_IMAGE.code){s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1),O=this.expressionEvaluatorVisualScripts.evaluateExpression(r.width,t,!1),C=this.expressionEvaluatorVisualScripts.evaluateExpression(r.height,t,!1),u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1);var L=this.expressionEvaluatorVisualScripts.evaluateExpression(r.rotation,t,!1),j=r.image.imageId;a='play.customElementsToDraw.push({"type":"IMAGE", "x":'+s+', "y":'+l+', "width":'+O+', "height":'+C+', "alpha":'+u+', "rotation":'+L+', "zIndex":'+(h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1))+', "imageId":"'+j+'"});';n+=this.addLine(a,i)}else if(r.type.code==o.default.DRAW_PERCENTAGE_BAR.code){s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1),O=this.expressionEvaluatorVisualScripts.evaluateExpression(r.width,t,!1),C=this.expressionEvaluatorVisualScripts.evaluateExpression(r.height,t,!1),u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1);var I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),B=this.expressionEvaluatorVisualScripts.evaluateExpression(r.maxValue,t,!1);h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1);n+=this.generateColorSourceCode(r.color,"color",t,i),n+=this.generateColorSourceCode(r.backgroundColor,"backgroundColor",t,i),n+=this.generateColorSourceCode(r.borderColor,"borderColor",t,i);var N='play.customElementsToDraw.push({"type":"PERCENTAGE_BAR", "x":'+s+', "y":'+l+', "width":'+O+', "height":'+C+', "zIndex":'+h+', "alpha":'+u+', "value":'+I+', "maxValue":'+B+', "split":'+r.split+', "borderSize":"'+r.borderSize+'", "color":color, "backgroundColor":backgroundColor, "borderColor":borderColor});';n+=this.addLine(N,i)}else if(r.type.code==o.default.SET_LEVEL_VARIABLE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a='play.level.setVariable("'+(q=r.levelVariable.name)+'", '+I+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.ADD_TO_LEVEL_VARIABLE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a='play.level.addToVariable("'+(q=r.levelVariable.name)+'", '+I+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.CREATE_CUSTOM_OBJECT.code){s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1),l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1);var D="let objectType = play.objectTypesMap.get('"+r.customObjectType.uid+"');";n+=this.addLine(D,i);a="let customObject = play.level.addCustomObject(objectType, "+s+", "+l+");";if(n+=this.addLine(a,i),null!=r.speedX&&""!=r.speedX){var M="customObject.speedX = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.speedX,t,!1)+";";n+=this.addLine(M,i)}if(null!=r.speedY&&""!=r.speedY){M="customObject.speedY = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.speedY,t,!1)+";";n+=this.addLine(M,i)}var R=this.generateSaveToVariableSourceCode(r,"customObject",0);n+=this.addLine(R,i)}else if(r.type.code==o.default.REMOVE_OBJECT.code){a="customObject.markedToRemove = true;";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SHOOT_OBJECT.code){a="let sourceList = new Array();";n+=this.addLine(a,i);var V=r.customObjectType.uid;if("COORDINATES"==r.sourceType){M='sourceList.push({"customObjectTypeUid":"'+V+'", "x":'+this.expressionEvaluatorVisualScripts.evaluateExpression(r.sourceX,t,!1)+', "y":'+this.expressionEvaluatorVisualScripts.evaluateExpression(r.sourceY,t,!1)+"});";n+=this.addLine(M,i)}else if("MOUSE_POSITION"==r.sourceType){M="if (play.mousePos != null) {",R='\t\tsourceList.push({ "customObjectTypeUid":"'+V+'", "x":play.mousePos.x + play.screenX, "y":play.mousePos.y + play.screenY });',N="}";n+=this.addLine(M,i),n+=this.addLine(R,i),n+=this.addLine(N,i)}else if("OBJECT"==r.sourceType){M='sourceList.push({"customObjectTypeUid":"'+V+'", "x":customObject.x, "y":customObject.y });';n+=this.generateObjectLoopSourceCodeWithBody(r.sourceObjectSelectorDefinition,"customObject",i,[M])}n+=this.addLine("for (let i_source=0; i_source<sourceList.length; i_source++) {",i),i++;if(n+=this.addLine("let source = sourceList[i_source];",i),"SPEED_X_Y"==r.targetType){var P="let shotObject = play.level.addCustomObject(play.objectTypesMap.get(source.customObjectTypeUid), source.x, source.y);",F="shotObject.setSpeedX("+this.expressionEvaluatorVisualScripts.evaluateExpression(r.speedX,t,!1)+");",k="shotObject.setSpeedY("+this.expressionEvaluatorVisualScripts.evaluateExpression(r.speedY,t,!1)+");",J=this.generateSaveToVariableSourceCode(r,"shotObject",0);n+=this.addLine(P,i),n+=this.addLine(F,i),n+=this.addLine(k,i),n+=this.addLine(J,i)}else if("COORDINATES"==r.targetType){P="let dx = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.targetX,t,!1)+" - source.x;",F="let dy = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.targetY,t,!1)+" - source.y;",k="let d = play.util.distance(0,0,dx,dy);",J="let shotObject = play.level.addCustomObject(play.objectTypesMap.get(source.customObjectTypeUid), source.x, source.y);";var U="let speed = "+(H=this.expressionEvaluatorVisualScripts.evaluateExpression(r.speed,t,!1))+";",G="shotObject.setSpeedX(speed * dx / d);",Y="shotObject.setSpeedY(speed * dy / d);",W=this.generateSaveToVariableSourceCode(r,"shotObject",0);n+=this.addLine(P,i),n+=this.addLine(F,i),n+=this.addLine(k,i),n+=this.addLine(J,i),n+=this.addLine(U,i),n+=this.addLine(G,i),n+=this.addLine(Y,i),n+=this.addLine(W,i)}else if("ANGLE"==r.targetType){P="let shotObject = play.level.addCustomObject(play.objectTypesMap.get(source.customObjectTypeUid), source.x, source.y);",F="let angle = "+(Z=this.expressionEvaluatorVisualScripts.evaluateExpression(r.angle,t,!1)),k="let speed = "+(H=this.expressionEvaluatorVisualScripts.evaluateExpression(r.speed,t,!1)),J="shotObject.setSpeedX(Math.cos(angle) * speed);",U="shotObject.setSpeedY(-Math.sin(angle) * speed);",G=this.generateSaveToVariableSourceCode(r,"shotObject",0);n+=this.addLine(P,i),n+=this.addLine(F,i),n+=this.addLine(k,i),n+=this.addLine(J,i),n+=this.addLine(U,i),n+=this.addLine(G,i)}else if("MOUSE_POSITION"==r.targetType){P="if (play.mousePos != null) {",F="\tlet targetX = play.mousePos.x;",k="\tlet targetY = play.mousePos.y;",J="\tlet dx = targetX + play.screenX - source.x;",U="\tlet dy = targetY + play.screenY - source.y;",G="\tlet d = play.util.distance(0,0,dx,dy);",Y="\tlet shotObject = play.level.addCustomObject(play.objectTypesMap.get(source.customObjectTypeUid), source.x, source.y);",W="\tlet speed = "+(H=this.expressionEvaluatorVisualScripts.evaluateExpression(r.speed,t,!1))+";";var X=this.generateSaveToVariableSourceCode(r,"shotObject",1);n+=this.addLine(P,i),n+=this.addLine(F,i),n+=this.addLine(k,i),n+=this.addLine(J,i),n+=this.addLine(U,i),n+=this.addLine(G,i),n+=this.addLine(Y,i),n+=this.addLine(W,i),n+=this.addLine("\tshotObject.setSpeedX(speed * dx / d);",i),n+=this.addLine("\tshotObject.setSpeedY(speed * dy / d);",i),n+=this.addLine(X,i),n+=this.addLine("}",i)}else if("OBJECT"==r.targetType){var z=["let dx = targetObject.x - source.x;",M="let dy = targetObject.y - source.y;",R="let d = play.util.distance(0,0,dx,dy);",N="let shotObject = play.level.addCustomObject(play.objectTypesMap.get(source.customObjectTypeUid), source.x, source.y);",Q="let speed = "+(H=this.expressionEvaluatorVisualScripts.evaluateExpression(r.speed,t,!1))+";",$="shotObject.setSpeedX(speed * dx / d);","shotObject.setSpeedY(speed * dy / d);",this.generateSaveToVariableSourceCode(r,"shotObject",0)];n+=this.generateObjectLoopSourceCodeWithBody(r.targetObjectSelectorDefinition,"targetObject",i,z)}i--,n+=this.addLine("}",i)}else if(r.type.code==o.default.SET_CUSTOM_OBJECT_ATTRIBUTE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a="";"x"==r.attribute?a+="customObject.setX("+I+");":"y"==r.attribute?a+="customObject.setY("+I+");":"speedX"==r.attribute?a+="customObject.setSpeedX("+I+");":"speedY"==r.attribute?a+="customObject.setSpeedY("+I+");":"width"==r.attribute?a+="customObject.setWidth("+I+");":"height"==r.attribute?a+="customObject.setHeight("+I+");":"alpha"==r.attribute?a+="customObject.alpha = "+I+";":"zIndex"==r.attribute?a+="customObject.zIndex = "+I+";":"xLeft"==r.attribute?a+="customObject.setXLeft("+I+");":"xRight"==r.attribute?a+="customObject.setXRight("+I+");":"yTop"==r.attribute?a+="customObject.setYTop("+I+");":"yBottom"==r.attribute?a+="customObject.setYBottom("+I+");":"angle"==r.attribute?a+="customObject.setAngle("+I+");":"angularVelocity"==r.attribute&&(a+="customObject.setAngularVelocity("+I+");"),n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.ADD_TO_CUSTOM_OBJECT_ATTRIBUTE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a="";"x"==r.attribute?a+="customObject.setX(customObject.x + "+I+");":"y"==r.attribute?a+="customObject.setY(customObject.y + "+I+");":"speedX"==r.attribute?a+="customObject.setSpeedX(customObject.speedX + "+I+");":"speedY"==r.attribute?a+="customObject.setSpeedY(customObject.speedY + "+I+");":"width"==r.attribute?a+="customObject.setWidth(customObject.getWidth() + "+I+");":"height"==r.attribute?a+="customObject.setHeight(customObject.getHeight() + "+I+");":"alpha"==r.attribute?a+="customObject.alpha += "+I+";":"zIndex"==r.attribute?a+="customObject.zIndex += "+I+";":"xLeft"==r.attribute?a+="customObject.setXLeft(customObject.getXLeft() + "+I+");":"xRight"==r.attribute?a+="customObject.setXRight(customObject.getXRight() + "+I+");":"yTop"==r.attribute?a+="customObject.setYTop(customObject.getYTop() + "+I+");":"yBottom"==r.attribute?a+="customObject.setYBottom(customObject.getYBottom() + "+I+");":"angle"==r.attribute?a+="customObject.setAngle(customObject.angle + "+I+");":"angularVelocity"==r.attribute&&(a+="customObject.setAngularVelocity(customObject.getAngularVelocity() + "+I+");"),n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_CUSTOM_OBJECT_SPEED_AND_ANGLE.code){a="customObject.setSpeed(Math.cos("+(Z=this.expressionEvaluatorVisualScripts.evaluateExpression(r.angle,t,!1))+") * "+(H=this.expressionEvaluatorVisualScripts.evaluateExpression(r.speed,t,!1))+", -Math.sin("+Z+") * "+H+");";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_OBJECT_SPEED_AND_TARGET.code){var H=this.expressionEvaluatorVisualScripts.evaluateExpression(r.speed,t,!1);z=[a="let dx = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.targetX,t,!1)+" - customObject.x;",M="let dy = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.targetY,t,!1)+" - customObject.y;",R="let d = play.util.distance(0,0,dx,dy);",N="customObject.setSpeedX("+H+" * dx / d);",Q="customObject.setSpeedY("+H+" * dy / d);"];n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,z)}else if(r.type.code==o.default.SET_OBJECT_POSITION.code){z=[a="customObject.setPosition("+(s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x,t,!1))+","+(l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y,t,!1))+");"];n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,z)}else if(r.type.code==o.default.APPLY_FORCE_TO_OBJECT.code){var K=this.expressionEvaluatorVisualScripts.evaluateExpression(r.force,t,!1);if("ANGLE"==r.targetType){a="customObject.setSpeedX(customObject.speedX + Math.cos("+(Z=this.expressionEvaluatorVisualScripts.evaluateExpression(r.angle,t,!1))+") * "+K+");",M="customObject.setSpeedY(customObject.speedY - Math.sin("+Z+") * "+K+");";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a,M])}else if("COORDINATES"==r.targetType){z=[a="let dx = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.targetX,t,!1)+" - customObject.x;",M="let dy = "+this.expressionEvaluatorVisualScripts.evaluateExpression(r.targetY,t,!1)+" - customObject.y;",R="let d = play.util.distance(0,0,dx,dy);",N="if (d > 0) {",Q="\tcustomObject.setSpeedX(customObject.speedX + "+K+" * dx / d);",$="\tcustomObject.setSpeedY(customObject.speedY + "+K+" * dy / d);","}"];n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,z)}}else if(r.type.code==o.default.SET_OBJECT_IMAGE_ANGLE.code){a="customObject.imageAngle = "+(Z=this.expressionEvaluatorVisualScripts.evaluateExpression(r.angle,t,!1))+";";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_OBJECT_IMAGE.code){a="customObject.image = play.buildImageObject('"+r.image.imageSourceType+"', '"+r.image.imageId+"');";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_OBJECT_ANIMATION.code){a="customObject.setAnimationByUid('"+r.animation.uid+"');";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_OBJECT_ANIMATION_FRAME.code){a="customObject.setAnimationFrame("+this.expressionEvaluatorVisualScripts.evaluateExpression(r.animationFrame,t,!1)+");";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_OBJECT_ANIMATION_SPEED.code){a="customObject.setAnimationSpeed("+this.expressionEvaluatorVisualScripts.evaluateExpression(r.animationSpeed,t,!1)+");";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.SET_OBJECT_VARIABLE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a='customObject.setVariable("'+(q=r.variable)+'", '+I+");";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.ADD_TO_OBJECT_VARIABLE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a='customObject.addToVariable("'+(q=r.variable)+'", '+I+");";n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,[a])}else if(r.type.code==o.default.CONSOLE_LOG.code){I=null;r.textType==c.default.STATIC_TEXT?I="`"+r.expression+"`":r.textType==c.default.EXPRESSION&&(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.expression,t,!0));a="console.log("+I+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_CAMERA_CENTER_X.code){a="play.setCameraCenterX("+(s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_CAMERA_CENTER_Y.code){a="play.setCameraCenterY("+(l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_CAMERA_POSITION_X.code){a="play.setCameraPositionX("+(s=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_CAMERA_POSITION_Y.code){a="play.setCameraPositionY("+(l=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_GLOBAL_VARIABLE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a='play.setGlobalVariable("'+(q=r.variable)+'", '+I+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.ADD_TO_GLOBAL_VARIABLE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a='play.addToGlobalVariable("'+(q=r.variable)+'", '+I+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_ZOOM.code){a="play.setZoom("+(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.MULTIPLY_ZOOM.code){a="play.multiplyZoom("+(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1))+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_LOCAL_STORAGE_VARIABLE.code){var q=null;r.variableTextType==c.default.STATIC_TEXT?q="`"+r.variable+"`":r.variableTextType==c.default.EXPRESSION&&(q=this.expressionEvaluatorVisualScripts.evaluateExpression(r.variable,t,!0));I=null;r.valueTextType==c.default.STATIC_TEXT?I="`"+r.value+"`":r.valueTextType==c.default.EXPRESSION&&(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1));a="localStorage.setItem("+q+","+I+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_CANVAS_ANGLE.code){var Z;a="play.level.canvasAngle="+(Z=this.expressionEvaluatorVisualScripts.evaluateExpression(r.angle,t,!1))+";";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_BUTTON_ATTRIBUTE.code){if("borderSize"==r.attribute||"width"==r.attribute||"height"==r.attribute||"x"==r.attribute||"y"==r.attribute){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),a="for (let i=0; i<play.level.buttonArray.length; i++) {",M="\tlet button = play.level.buttonArray[i];",R='\tif (button.uid == "'+r.button.uid+'") {',N="\t\tbutton."+r.attribute+" = "+I+";";var Q="\t}",$="}";n+=this.addLine(a,i),n+=this.addLine(M,i),n+=this.addLine(R,i),n+=this.addLine(N,i),n+=this.addLine(Q,i),n+=this.addLine($,i)}else if("backgroundColor"==r.attribute||"borderColor"==r.attribute||"textColor"==r.attribute){n+=this.generateColorSourceCode(r.color,"color",t,i);a="for (let i=0; i<play.level.buttonArray.length; i++) {",M="\tlet button = play.level.buttonArray[i];",R='\tif (button.uid == "'+r.button.uid+'") {',N="\t\tbutton."+r.attribute+" = color;",Q="\t}",$="}";n+=this.addLine(a,i),n+=this.addLine(M,i),n+=this.addLine(R,i),n+=this.addLine(N,i),n+=this.addLine(Q,i),n+=this.addLine($,i)}}else if(r.type.code==o.default.SET_TEXT_ATTRIBUTE.code)if("color"!=r.attribute){I=null;r.textType==c.default.STATIC_TEXT?I="`"+r.value+"`":r.textType==c.default.EXPRESSION&&(I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1));a="for (let i=0; i<play.level.textArray.length; i++) {",M="\tlet textInstance = play.level.textArray[i];",R='\tif (textInstance.textDefinition.uid == "'+r.textDefinition.uid+'") {',N="\t\ttextInstance."+r.attribute+" = "+I+";",Q="\t}",$="}";n+=this.addLine(a,i),n+=this.addLine(M,i),n+=this.addLine(R,i),n+=this.addLine(N,i),n+=this.addLine(Q,i),n+=this.addLine($,i)}else{n+=this.generateColorSourceCode(r.color,"color",t,i);a="for (let i=0; i<play.level.textArray.length; i++) {",M="\tlet textInstance = play.level.textArray[i];",R='\tif (textInstance.textDefinition.uid == "'+r.textDefinition.uid+'") {',N="\t\ttextInstance."+r.attribute+" = color;",Q="\t}",$="}";n+=this.addLine(a,i),n+=this.addLine(M,i),n+=this.addLine(R,i),n+=this.addLine(N,i),n+=this.addLine(Q,i),n+=this.addLine($,i)}else if(r.type.code==o.default.REQUEST_FULLSCREEN.code){a="play.util.requestCanvasFullscreen();";n+=this.addLine(a,i)}else if(r.type.code==o.default.PLAY_AUDIO.code){var ee=this.expressionEvaluatorVisualScripts.evaluateExpression(r.volume,t,!1);if(r.audio.audioSourceType==d.default.LIBRARY){a='play.playLibraryAudio("'+r.audio.audioPath+'",'+ee+");";n+=this.addLine(a,i)}else if(r.audio.audioSourceType==d.default.UPLOAD){a='play.playCustomAudio("'+r.audio.customAudio.uid+'",'+ee+");";n+=this.addLine(a,i)}}else if(r.type.code==o.default.STOP_ALL_AUDIOS.code){a="play.stopAllAudios();";n+=this.addLine(a,i)}else if(r.type.code==o.default.RESTART_GAME.code){a="play.restart();";n+=this.addLine(a,i)}else if(r.type.code==o.default.RESTART_LEVEL.code){a="play.getCurrentLevel().restart();";n+=this.addLine(a,i)}else if(r.type.code==o.default.EXECUTE_JAVASCRIPT_CODE.code){a=""+r.javascriptCode;n+=this.addLine(a,i)}else if(r.type.code==o.default.ASSIGN_NEURAL_NETWORKS_TO_OBJECTS.code){V=r.customObjectType.uid;var te=r.variable;D="let neuralNetworks = play.getNeatExtension().getNeat('"+(ae=r.neat.uid)+"').getPopulation();";n+=this.addLine(D,i);a="let objects = play.getObjectsByType('"+V+"');";n+=this.addLine(a,i);M="for (let i=0; i<objects.length; i++) {";n+=this.addLine(M,i);R="let object = objects[i];";n+=this.addLine(R,i+1);N="object.setVariable('"+te+"', neuralNetworks[i]);";n+=this.addLine(N,i+1);Q="object.getVariable('"+te+"').score = 0;";n+=this.addLine(Q,i+1);$="}";n+=this.addLine($,i)}else if(r.type.code==o.default.ACTIVATE_OBJECT_NEURAL_NETWORK.code){var ie=r.objectVariable;(z=new Array).push("let inputs = [];");for(var ne=r.inputs,oe=0;oe<ne.length;oe++){var re=ne[oe];z.push("inputs.push("+re.value+");")}z.push("let outputs = customObject.getVariable('"+ie.name+"').activate(inputs);"),n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,z)}else if(r.type.code==o.default.ACTIVATE_NEURAL_NETWORK.code){var ae=r.neat.uid,se=this.expressionEvaluatorVisualScripts.evaluateExpression(r.index,t,!1);n+=this.addLine("let inputs = [];",i);for(ne=r.inputs,oe=0;oe<ne.length;oe++){re=ne[oe];n+=this.addLine("inputs.push("+re.value+");",i)}n+=this.addLine("play.getNeatExtension().getNeat('"+ae+"').neat.population["+se+"].activate(inputs);",i)}else if(r.type.code==o.default.SET_NEURAL_NETWORK_SCORE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),se=this.expressionEvaluatorVisualScripts.evaluateExpression(r.index,t,!1),a="play.getNeatExtension().getNeat('"+(ae=r.neat.uid)+"').neat.population["+se+"].score = "+I+";";n+=this.addLine(a,i)}else if(r.type.code==o.default.ADD_TO_NEURAL_NETWORK_SCORE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),se=this.expressionEvaluatorVisualScripts.evaluateExpression(r.index,t,!1),a="play.getNeatExtension().getNeat('"+(ae=r.neat.uid)+"').neat.population["+se+"].score += "+I+";";n+=this.addLine(a,i)}else if(r.type.code==o.default.SET_OBJECT_NEURAL_NETWORK_SCORE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),ie=r.objectVariable,z=new Array,a="customObject.getVariable('"+ie.name+"').score = "+I+";";z.push(a),n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,z)}else if(r.type.code==o.default.ADD_TO_OBJECT_NEURAL_NETWORK_SCORE.code){I=this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1),ie=r.objectVariable,z=new Array,a="customObject.getVariable('"+ie.name+"').score += "+I+";";z.push(a),n+=this.generateObjectLoopSourceCodeWithBody(r.objectSelectorDefinition,"customObject",i,z)}else if(r.type.code==o.default.EVOLVE.code){a="play.getNeatExtension().getNeat('"+(ae=r.neat.uid)+"').neat.evolve();";n+=this.addLine(a,i)}else if(r.type.code==o.default.GAMEPAD_VIBRATE.code){a="play.vibrateGamepad("+r.gamepadIndex+", "+r.duration+", "+r.startDelay+", "+r.weakMagnitude+", "+r.strongMagnitude+");";n+=this.addLine(a,i)}else if(r.type.code==o.default.EXECUTE_FUNCTION.code){a="play.executeVisualScriptFunction('"+r.visualScriptFunction.uid+"');";n+=this.addLine(a,i)}else if(r.type.code==o.default.ADD_CONSTRAINT.code){var le=this.expressionEvaluatorVisualScripts.evaluateExpression(r.stiffness,t,!1),ue=this.expressionEvaluatorVisualScripts.evaluateExpression(r.damping,t,!1),de=r.visible;A="2",h="0",u="1";de&&(A=this.expressionEvaluatorVisualScripts.evaluateExpression(r.lineWidth,t,!1),h=this.expressionEvaluatorVisualScripts.evaluateExpression(r.zIndex,t,!1),u=this.expressionEvaluatorVisualScripts.evaluateExpression(r.alpha,t,!1));E=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x1,t,!1),b=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y1,t,!1),g=this.expressionEvaluatorVisualScripts.evaluateExpression(r.x2,t,!1),T=this.expressionEvaluatorVisualScripts.evaluateExpression(r.y2,t,!1);n+=this.generateColorSourceCode(r.color,"color",t,i),n+=this.generateSimpleObjectSelectorSourceCode(r.objectSelectorDefinition1,"object1",i),r.constraintType==p.default.FIXED_DISTANCE_BETWEEN_TWO_OBJECTS?n+=this.generateSimpleObjectSelectorSourceCode(r.objectSelectorDefinition2,"object2",i):r.constraintType==p.default.FIXED_DISTANCE_BETWEEN_OBJECT_AND_POSITION&&(n+=this.addLine("object2 = null;",i)),n+=this.addLine("play.level.physicsEngine.addConstraint(object1, object2, "+E+", "+b+", "+g+", "+T+", "+le+", "+ue+", "+de+", "+A+", color, "+h+", "+u+");",i)}else if(r.type.code==o.default.SET_TIME_SCALE.code){a="play.setTimeScale("+this.expressionEvaluatorVisualScripts.evaluateExpression(r.value,t,!1)+");";n+=this.addLine(a,i)}return i--,n+=this.addLine("}",i)},e.prototype.generateSaveToVariableSourceCode=function(e,t,i){if(e.saveToVariable){if(e.variableCategory==h.default.GLOBAL_VARIABLE){var n='play.setGlobalVariable("'+e.globalVariable.name+'", '+t+");";return this.addLine(n,i)}if(e.variableCategory==h.default.LEVEL_VARIABLE){n='play.level.setVariable("'+e.levelVariable.name+'", '+t+");";return this.addLine(n,i)}e.variableCategory,h.default.OBJECT_VARIABLE}return""},e.prototype.generateColorSourceCode=function(e,t,i,n){if(null==e||""==e.red||""==e.green||""==e.blue){var o="let "+t+" = null;";return this.addLine(o,n)}var r="let "+t+" = play.util.newColor("+this.expressionEvaluatorVisualScripts.evaluateExpression(""+e.red,i,!1)+", "+this.expressionEvaluatorVisualScripts.evaluateExpression(""+e.green,i,!1)+", "+this.expressionEvaluatorVisualScripts.evaluateExpression(""+e.blue,i,!1)+");";return this.addLine(r,n)},e.prototype.generateTabs=function(e){for(var t="",i=0;i<e;i++)t+="\t";return t},e.prototype.generateObjectLoopSourceCodeWithBody=function(e,t,i,o){var r="",a=e.type==n.default.ALL_OBJECTS_OF_TYPE||e.type==n.default.ALL_OBJECTS;if(a)r+=this.generateObjectLoopSourceCode(e,t,i),i++;else if(e.type==n.default.LOOP_OBJECT){var s="let "+t+" = $"+e.loopVariableName+";";r+=this.addLine(s,i)}else if(e.type==n.default.GLOBAL_VARIABLE){s="let "+t+' = play.getGlobalVariable("'+e.variable.name+'");';r+=this.addLine(s,i)}else if(e.type==n.default.LEVEL_VARIABLE){s="let "+t+' = play.getLevelVariable("'+e.variable.name+'");';r+=this.addLine(s,i)}for(var l=0;l<o.length;l++)r+=this.addLine(o[l],i);return a&&(i--,r+=this.addLine("}",i)),r},e.prototype.generateObjectLoopSourceCode=function(e,t,i){var n=this.generateObjectSelectorSourceCode(e,"objectList",i);n+=this.addLine("for (var i=0; i<objectList.length; i++) {",i),i++;var o="let "+t+" = objectList[i];";return n+=this.addLine(o,i)},e.prototype.generateSimpleObjectSelectorSourceCode=function(e,t,i){var o="";if(e.type==n.default.LOOP_OBJECT){var r="let "+t+" = $"+e.loopVariableName+";";o+=this.addLine(r,i)}else if(e.type==n.default.GLOBAL_VARIABLE){r="let "+t+' = play.getGlobalVariable("'+e.variable.name+'");';o+=this.addLine(r,i)}else if(e.type==n.default.LEVEL_VARIABLE){r="let "+t+' = play.getLevelVariable("'+e.variable.name+'");';o+=this.addLine(r,i)}return o},e.prototype.generateObjectSelectorSourceCode=function(e,t,i){var o="";if(e.type==n.default.ALL_OBJECTS_OF_TYPE){var r="let "+t+' = play.util.getObjectsByType("'+e.objectType.uid+'", play);';o+=this.addLine(r,i)}else if(e.type==n.default.LOOP_OBJECT){r="let "+t+" = [$"+e.loopVariableName+"];";o+=this.addLine(r,i)}else if(e.type==n.default.GLOBAL_VARIABLE){r="let "+t+' = [play.getGlobalVariable("'+e.variable.name+'")];';var a="if ("+t+"[0] == null) "+t+" = [];";o+=this.addLine(r,i),o+=this.addLine(a,i)}else if(e.type==n.default.LEVEL_VARIABLE){r="let "+t+' = [play.getLevelVariable("'+e.variable.name+'")];',a="if ("+t+"[0] == null) "+t+" = [];";o+=this.addLine(r,i),o+=this.addLine(a,i)}return o},e.prototype.addLine=function(e,t){var i=this.generateTabs(t);return i+=e,i+="\n"},e}();t.default=m},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.PLATFORMER_PLAYER="PLATFORMER_PLAYER",e.KEYBOARD_MOVEMENT="KEYBOARD_MOVEMENT",e.MOUSE_MOVEMENT="MOUSE_MOVEMENT",e.GAMEPAD_MOVEMENT="GAMEPAD_MOVEMENT",e.STOP_ON_OBJECT="STOP_ON_OBJECT",e.BOUNCE_ON_OBJECT="BOUNCE_ON_OBJECT",e.JUMP_ON_PLATFORM="JUMP_ON_PLATFORM"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.SET_SPEED="SET_SPEED",e.SET_ACCELERATION="SET_ACCELERATION"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){this.templateVersion="v0.6.2"};t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.EQUAL="EQUAL",e.GREATER="GREATER",e.SMALLER="SMALLER",e.GREATER_OR_EQUAL="GREATER_OR_EQUAL",e.SMALLER_OR_EQUAL="SMALLER_OR_EQUAL",e.DIFFERENT="DIFFERENT"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.STATIC_TEXT="STATIC_TEXT",e.EXPRESSION="EXPRESSION"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(24),o=i(0),r=i(9),a=function(){function e(){this.util=new o.default,this.regexpFps=new RegExp("{fps}","g"),this.regexpScore=new RegExp("{score}","g"),this.regexpRandom=new RegExp("{random}","g"),this.regexpMousePosX=new RegExp("{mousePosX}","g"),this.regexpMousePosY=new RegExp("{mousePosY}","g"),this.regexpScreenX=new RegExp("{screenX}","g"),this.regexpScreenY=new RegExp("{screenY}","g"),this.regexpLoopCurrentIndex=new RegExp("{loop.currentIndex}","g"),this.regexpLevelName=new RegExp("{levelDefinition.name}","g"),this.regexpCurrentLevelFrame=new RegExp("{level.currentFrame}","g"),this.regexLocalStorageVariable=new RegExp("{localStorage.\\w+}"),this.regexDistanceLoopObjects=new RegExp("{distanceLoopObjects\\(\\w+,\\w+\\)}"),this.regexMap=new Map}return e.prototype.findRegexByString=function(e){var t=this.regexMap.get(e);return null==t&&(t=new RegExp(e,"g"),this.regexMap.set(e,t)),t},e.prototype.initObjectVariablesRegexp=function(e){},e.prototype.replaceLevelArrayVariables=function(e,t,i){for(var n=t.level.levelDefinition.levelVariables,o=0;o<n.length;o++)if(n[o].type==r.default.ARRAY){var a=n[o].name;e=this.replaceLevelArrayVariable(e,t,i,a)}return e},e.prototype.replaceLevelArrayVariable=function(e,t,i,n){for(var o=t.level.variables.get(n),r=new RegExp("{levelVariable."+n+"\\[\\d+\\]}"),a=r.exec(e);a;){var s=new RegExp("\\d+").exec(a[0]),l=parseInt(s[0]);e=e.replace(r,o[l]),a=r.exec(e)}return e},e.prototype.replaceLocalStorageVariables=function(e,t,i){for(var n=this.regexLocalStorageVariable.exec(e);n;){var o=n[0].substring(14,n[0].length-1);e=e.replace(this.regexLocalStorageVariable,localStorage.getItem(o)),n=this.regexLocalStorageVariable.exec(e)}return e},e.prototype.replaceDistanceLoopObjects=function(e,t,i){for(var o=this.regexDistanceLoopObjects.exec(e);o;){var r=o[0].substring(21,o[0].length-2).split(","),a=r[0],s=r[1],l=i.variables.get(a),u=i.variables.get(s),d=0;l instanceof n.default&&u instanceof n.default&&(d=this.util.distanceObjects(l,u)),e=e.replace(this.regexDistanceLoopObjects,"("+d+")"),o=this.regexDistanceLoopObjects.exec(e)}return e},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){this.zIndex=0};t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.OBJECTS="OBJECTS",e.TIME="TIME",e.KEYBOARD="KEYBOARD",e.MOUSE="MOUSE",e.BUTTON="BUTTON",e.TOUCH="TOUCH",e.GAMEPAD="GAMEPAD",e.EXPRESSION="EXPRESSION"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.SCORE="SCORE",e.RANDOM="RANDOM",e.RANDOM_NUMBER_BETWEEN="RANDOM_NUMBER_BETWEEN",e.RANDOM_INTEGER_BETWEEN="RANDOM_INTEGER_BETWEEN",e.PI="PI",e.SIN="SIN",e.COS="COS",e.TAN="TAN",e.ATAN2="ATAN2",e.SQRT="SQRT",e.ABS="ABS",e.CEIL="CEIL",e.FLOOR="FLOOR",e.MAX="MAX",e.MIN="MIN",e.ROUND="ROUND",e.MOUSE_POS_X="MOUSE_POS_X",e.MOUSE_POS_Y="MOUSE_POS_Y",e.CAMERA_POSITION_X="CAMERA_POSITION_X",e.CAMERA_POSITION_Y="CAMERA_POSITION_Y",e.CAMERA_CENTER_X="CAMERA_CENTER_X",e.CAMERA_CENTER_Y="CAMERA_CENTER_Y",e.CAMERA_ROTATION_RADIANS="CAMERA_ROTATION_RADIANS",e.CAMERA_ROTATION_DEGREES="CAMERA_ROTATION_DEGREES",e.ZOOM="ZOOM",e.GLOBAL_VARIABLE="GLOBAL_VARIABLE",e.LEVEL_VARIABLE="LEVEL_VARIABLE",e.OBJECT="OBJECT",e.OBJECT_ATTRIBUTE="OBJECT_ATTRIBUTE",e.OBJECT_VARIABLE="OBJECT_VARIABLE",e.OBJECT_METHOD="OBJECT_METHOD",e.OBJECT_COUNT="OBJECT_COUNT",e.LOOP_NUMBER="LOOP_NUMBER",e.LEVEL_NAME="LEVEL_NAME",e.CURRENT_LEVEL_FRAME="CURRENT_LEVEL_FRAME",e.DISTANCE_BETWEEN_LOOP_OBJECTS="DISTANCE_BETWEEN_LOOP_OBJECTS",e.LOCAL_STORAGE_VARIABLE="LOCAL_STORAGE_VARIABLE",e.FPS="FPS",e.DELTA="DELTA",e.DELTA_SECONDS="DELTA_SECONDS",e.TIME_SCALE="TIME_SCALE",e.ELAPSED_TIME_MILLIS="ELAPSED_TIME_MILLIS",e.ELAPSED_TIME_SECONDS="ELAPSED_TIME_SECONDS",e.LEVEL_ELAPSED_TIME_MILLIS="LEVEL_ELAPSED_TIME_MILLIS",e.LEVEL_ELAPSED_TIME_SECONDS="LEVEL_ELAPSED_TIME_SECONDS",e.LAST_TOUCH_X="LAST_TOUCH_X",e.LAST_TOUCH_Y="LAST_TOUCH_Y",e.ACCELEROMETER_X="ACCELEROMETER_X",e.ACCELEROMETER_Y="ACCELEROMETER_Y",e.ACCELEROMETER_Z="ACCELEROMETER_Z",e.CANVAS_WIDTH="CANVAS_WIDTH",e.CANVAS_HEIGHT="CANVAS_HEIGHT",e.NEAT_ATTRIBUTE="NEAT_ATTRIBUTE",e.NEURAL_NETWORK_ATTRIBUTE="NEURAL_NETWORK_ATTRIBUTE",e.OBJECT_NEURAL_NETWORK_ATTRIBUTE="OBJECT_NEURAL_NETWORK_ATTRIBUTE",e.OBJECT_NEURAL_NETWORK_OUTPUT="OBJECT_NEURAL_NETWORK_OUTPUT",e.GAMEPAD_BUTTON_VALUE="GAMEPAD_BUTTON_VALUE",e.GAMEPAD_AXIS_VALUE="GAMEPAD_AXIS_VALUE",e.GAMEPAD_BUTTONS_LENGTH="GAMEPAD_BUTTONS_LENGTH",e.GAMEPAD_AXES_LENGTH="GAMEPAD_AXES_LENGTH"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(55),r=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.description=this.description,t.action=this.action.toJSON(),t},e.fromJSON=function(t,i){if(null==t)return null;var n=i.getObject(t.uid);return null==n&&((n=new e).uid=t.uid,i.addObject(n)),n.description=t.description,n.action=o.default.fromJSON(t.action,i),n},e.prototype.duplicate=function(){var t=new n.default,i=new e;return i.uid=t.uid(),i.description=this.description,i.action=this.action.duplicate(),i},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4),o=i(19),r=i(1),a=i(20),s=i(36),l=i(5),u=i(78),d=i(56),c=i(22),h=i(3),p=i(21),m=i(11),f=i(0),y=i(10),v=i(30),E=function(){function e(){this.inputs=new Array}return e.prototype.toJSON=function(){var t=new f.default,i=new e;return i.category=this.category,i.type=this.type,null!=this.objectSelectorDefinition&&(i.objectSelectorDefinition=this.objectSelectorDefinition.toJSON()),null!=this.sourceObjectSelectorDefinition&&(i.sourceObjectSelectorDefinition=this.sourceObjectSelectorDefinition.toJSON()),null!=this.targetObjectSelectorDefinition&&(i.targetObjectSelectorDefinition=this.targetObjectSelectorDefinition.toJSON()),null!=this.objectSelectorDefinition1&&(i.objectSelectorDefinition1=this.objectSelectorDefinition1.toJSON()),null!=this.objectSelectorDefinition2&&(i.objectSelectorDefinition2=this.objectSelectorDefinition2.toJSON()),i.textType=this.textType,i.variableTextType=this.variableTextType,i.valueTextType=this.valueTextType,null!=this.button&&null!=this.button.uid&&(i.button=new a.default,i.button.uid=this.button.uid),null!=this.textDefinition&&null!=this.textDefinition.uid&&(i.textDefinition=new v.default,i.textDefinition.uid=this.textDefinition.uid),i.value=this.value,i.expression=this.expression,i.variable=this.variable,null!=this.levelVariable&&null!=this.levelVariable.uid&&(i.levelVariable=new h.default,i.levelVariable.uid=this.levelVariable.uid),null!=this.objectVariable&&null!=this.objectVariable.uid&&(i.objectVariable=new h.default,i.objectVariable.uid=this.objectVariable.uid),null!=this.globalVariable&&null!=this.globalVariable.uid&&(i.globalVariable=new h.default,i.globalVariable.uid=this.globalVariable.uid),i.variableCategory=this.variableCategory,null!=this.neat&&(i.neat=new m.default,i.neat.uid=this.neat.uid),i.index=this.index,i.inputs=t.arrayToJSON(this.inputs),i.attribute=this.attribute,i.x=this.x,i.y=this.y,i.x1=this.x1,i.y1=this.y1,i.x2=this.x2,i.y2=this.y2,i.sourceX=this.sourceX,i.sourceY=this.sourceY,i.targetX=this.targetX,i.targetY=this.targetY,i.width=this.width,i.height=this.height,i.fillStyle=this.fillStyle,i.angle=this.angle,i.startAngle=this.startAngle,i.endAngle=this.endAngle,i.speed=this.speed,i.speedX=this.speedX,i.speedY=this.speedY,i.force=this.force,i.radius=this.radius,i.text=this.text,i.alpha=this.alpha,i.rotation=this.rotation,i.font=this.font,i.fontSize=this.fontSize,i.fontFamily=this.fontFamily,i.textAlign=this.textAlign,i.drawType=this.drawType,null!=this.image&&(i.image=this.image.toJSON()),i.maxValue=this.maxValue,i.lineWidth=this.lineWidth,i.borderSize=this.borderSize,null!=this.color&&(i.color=this.color.toJSON()),null!=this.backgroundColor&&(i.backgroundColor=this.backgroundColor.toJSON()),null!=this.borderColor&&(i.borderColor=this.borderColor.toJSON()),i.sourceType=this.sourceType,i.targetType=this.targetType,i.split=this.split,i.visible=this.visible,i.customObjectTypeId=this.customObjectTypeId,null!=this.customObjectType&&null!=this.customObjectType.uid&&(i.customObjectType=new r.default,i.customObjectType.uid=this.customObjectType.uid),null!=this.levelDefinition&&null!=this.levelDefinition.uid&&(i.levelDefinition=new o.default,i.levelDefinition.uid=this.levelDefinition.uid),null!=this.audio&&(i.audio=this.audio.toJSON()),i.volume=this.volume,null!=this.animation&&null!=this.animation.uid&&(i.animation=new c.default,i.animation.uid=this.animation.uid),i.animationFrame=this.animationFrame,i.animationSpeed=this.animationSpeed,i.javascriptCode=this.javascriptCode,i.zIndex=this.zIndex,i.saveToVariable=this.saveToVariable,i.gamepadIndex=this.gamepadIndex,i.duration=this.duration,i.startDelay=this.startDelay,i.strongMagnitude=this.strongMagnitude,i.weakMagnitude=this.weakMagnitude,i.damping=this.damping,i.stiffness=this.stiffness,i.constraintType=this.constraintType,null!=this.visualScriptFunction&&null!=this.visualScriptFunction.uid&&(i.visualScriptFunction=new y.default,i.visualScriptFunction.uid=this.visualScriptFunction.uid),i},e.fromJSON=function(t,i){if(null==t)return null;var E=new e,b=new f.default;return E.category=t.category,E.type=t.type,E.objectSelectorDefinition=n.default.fromJSON(t.objectSelectorDefinition,i),E.sourceObjectSelectorDefinition=n.default.fromJSON(t.sourceObjectSelectorDefinition,i),E.targetObjectSelectorDefinition=n.default.fromJSON(t.targetObjectSelectorDefinition,i),E.objectSelectorDefinition1=n.default.fromJSON(t.objectSelectorDefinition1,i),E.objectSelectorDefinition2=n.default.fromJSON(t.objectSelectorDefinition2,i),E.textType=t.textType,E.variableTextType=t.variableTextType,E.valueTextType=t.valueTextType,null!=t.button&&null!=t.button.uid&&(E.button=i.getOrAddObject(t.button,a.default)),null!=t.textDefinition&&null!=t.textDefinition.uid&&(E.textDefinition=i.getOrAddObject(t.textDefinition,v.default)),E.value=t.value,E.expression=t.expression,E.variable=t.variable,null!=t.levelVariable&&null!=t.levelVariable.uid&&(E.levelVariable=i.getOrAddObject(t.levelVariable,u.default)),null!=t.objectVariable&&null!=t.objectVariable.uid&&(E.objectVariable=i.getOrAddObject(t.objectVariable,h.default)),null!=t.globalVariable&&null!=t.globalVariable.uid&&(E.globalVariable=i.getOrAddObject(t.globalVariable,h.default)),E.variableCategory=t.variableCategory||null,null!=t.neat&&null!=t.neat.uid&&(E.neat=i.getOrAddObject(t.neat,m.default)),E.index=t.index,E.inputs=b.arrayFromJSON(t.inputs,p.default.fromJSON,i),E.attribute=t.attribute,E.x=t.x,E.y=t.y,E.x1=t.x1,E.y1=t.y1,E.x2=t.x2,E.y2=t.y2,E.sourceX=t.sourceX,E.sourceY=t.sourceY,E.targetX=t.targetX,E.targetY=t.targetY,E.width=t.width,E.height=t.height,E.fillStyle=t.fillStyle,E.angle=t.angle,E.startAngle=t.startAngle,E.endAngle=t.endAngle,E.speed=t.speed,E.speedX=t.speedX,E.speedY=t.speedY,E.force=t.force,E.radius=t.radius,E.text=t.text,E.alpha=t.alpha,E.rotation=t.rotation,E.font=t.font,E.fontSize=t.fontSize,E.fontFamily=t.fontFamily,E.textAlign=t.textAlign,E.drawType=t.drawType,E.image=l.default.fromJSON(t.image,i),E.maxValue=t.maxValue,E.lineWidth=t.lineWidth,E.borderSize=t.borderSize,E.color=s.default.fromJSON(t.color,i),E.backgroundColor=s.default.fromJSON(t.backgroundColor,i),E.borderColor=s.default.fromJSON(t.borderColor,i),E.sourceType=t.sourceType,E.targetType=t.targetType,E.split=t.split,E.visible=t.visible,E.customObjectTypeId=t.customObjectTypeId,null!=t.customObjectType&&null!=t.customObjectType.uid&&(E.customObjectType=i.getOrAddObject(t.customObjectType,r.default)),null!=t.levelDefinition&&null!=t.levelDefinition.uid&&(E.levelDefinition=i.getOrAddObject(t.levelDefinition,o.default)),E.audio=d.default.fromJSON(t.audio,i),E.volume=t.volume,null!=t.animation&&null!=t.animation.uid&&(E.animation=i.getOrAddObject(t.animation,c.default)),E.animationFrame=t.animationFrame,E.animationSpeed=t.animationSpeed,E.javascriptCode=t.javascriptCode,E.zIndex=t.zIndex,E.saveToVariable=t.saveToVariable,E.gamepadIndex=t.gamepadIndex,E.duration=t.duration,E.startDelay=t.startDelay,E.strongMagnitude=t.strongMagnitude,E.weakMagnitude=t.weakMagnitude,E.damping=t.damping,E.stiffness=t.stiffness,E.constraintType=t.constraintType,null!=t.visualScriptFunction&&null!=t.visualScriptFunction.uid&&(E.visualScriptFunction=i.getOrAddObject(t.visualScriptFunction,y.default)),E},e.prototype.duplicate=function(){var t=new e;t.category=this.category,t.type=this.type,t.objectSelectorDefinition=this.objectSelectorDefinition.duplicate(),t.sourceObjectSelectorDefinition=this.sourceObjectSelectorDefinition.duplicate(),t.targetObjectSelectorDefinition=this.targetObjectSelectorDefinition.duplicate(),t.objectSelectorDefinition1=this.objectSelectorDefinition1.duplicate(),t.objectSelectorDefinition2=this.objectSelectorDefinition2.duplicate(),t.textType=this.textType,t.variableTextType=this.variableTextType,t.valueTextType=this.valueTextType,t.button=this.button,t.textDefinition=this.textDefinition,t.value=this.value,t.expression=this.expression,t.variable=this.variable,t.levelVariable=this.levelVariable,t.objectVariable=this.objectVariable,t.globalVariable=this.globalVariable,t.variableCategory=this.variableCategory,t.attribute=this.attribute,t.x=this.x,t.y=this.y,t.x1=this.x1,t.y1=this.y1,t.x2=this.x2,t.y2=this.y2,t.sourceX=this.sourceX,t.sourceY=this.sourceY,t.targetX=this.targetX,t.targetY=this.targetY,t.width=this.width,t.height=this.height,t.fillStyle=this.fillStyle,t.angle=this.angle,t.startAngle=this.startAngle,t.endAngle=this.endAngle,t.speed=this.speed,t.speedX=this.speedX,t.speedY=this.speedY,t.force=this.force,t.radius=this.radius,t.text=this.text,t.alpha=this.alpha,t.rotation=this.rotation,t.font=this.font,t.fontSize=this.fontSize,t.fontFamily=this.fontFamily,t.textAlign=this.textAlign,t.drawType=this.drawType,t.image=this.image.duplicate(),t.maxValue=this.maxValue,t.lineWidth=this.lineWidth,t.borderSize=this.borderSize,t.color=this.color.duplicate(),t.backgroundColor=this.backgroundColor.duplicate(),t.borderColor=this.borderColor.duplicate(),t.sourceType=this.sourceType,t.targetType=this.targetType,t.split=this.split,t.visible=this.visible,t.customObjectTypeId=this.customObjectTypeId,t.customObjectType=this.customObjectType,t.levelDefinition=this.levelDefinition,t.audio=this.audio.duplicate(),t.volume=this.volume,t.animation=this.animation,t.animationSpeed=this.animationSpeed,t.animationFrame=this.animationFrame,t.zIndex=this.zIndex,t.neat=this.neat,t.javascriptCode=this.javascriptCode,t.index=this.index,t.saveToVariable=this.saveToVariable,t.gamepadIndex=this.gamepadIndex,t.duration=this.duration,t.startDelay=this.startDelay,t.strongMagnitude=this.strongMagnitude,t.weakMagnitude=this.weakMagnitude,t.damping=this.damping,t.stiffness=this.stiffness,t.constraintType=this.constraintType,t.visualScriptFunction=this.visualScriptFunction;for(var i=new Array,n=0;n<this.inputs.length;n++){var o=this.inputs[n].duplicate();i.push(o)}return t.inputs=i,t},e}();t.default=E},function(e,t,i){"use strict";t.__esModule=!0;var n=i(38),o=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.audioSourceType=this.audioSourceType,t.audioPath=this.audioPath,null!=this.customAudio&&null!=this.customAudio.uid&&(t.customAudio=new n.default,t.customAudio.uid=this.customAudio.uid),t},e.fromJSON=function(t,i){if(null==t)return null;var o=new e;return o.audioSourceType=t.audioSourceType,o.audioPath=t.audioPath,null!=t.customAudio&&(o.customAudio=i.getOrAddObject(t.customAudio,n.default)),o},e.prototype.duplicate=function(){var t=new e;return t.audioSourceType=this.audioSourceType,t.audioPath=this.audioPath,t.customAudio=this.customAudio,t},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(58),r=i(31),a=function(){function e(){}return e.prototype.toJSON=function(){var t=new n.default,i=new e;return i.uid=this.uid,i.description=this.description,i.condition=this.condition.toJSON(),i.ifBlocks=t.arrayToJSON(this.ifBlocks),i.elseBlocks=t.arrayToJSON(this.elseBlocks),i.elseBlocksEnabled=this.elseBlocksEnabled,i},e.fromJSON=function(t,i){if(null==t)return null;var a=i.getObject(t.uid);null==a&&((a=new e).uid=t.uid,i.addObject(a)),a.description=t.description,a.condition=o.default.fromJSON(t.condition,i);var s=new n.default;return a.ifBlocks=s.arrayFromJSON(t.ifBlocks,r.default.fromJSON,i),a.elseBlocks=s.arrayFromJSON(t.elseBlocks,r.default.fromJSON,i),a.elseBlocksEnabled=t.elseBlocksEnabled,a},e.prototype.duplicate=function(t){var i=new n.default,o=new e;o.uid=i.uid(),o.description=this.description,o.condition=this.condition.duplicate();for(var r=new Array,a=0;a<this.ifBlocks.length;a++){var s=this.ifBlocks[a].duplicate(t);r.push(s)}o.ifBlocks=r;var l=new Array;for(a=0;a<this.elseBlocks.length;a++){var u=this.elseBlocks[a].duplicate(t);l.push(u)}return o.elseBlocks=l,o.elseBlocksEnabled=this.elseBlocksEnabled,o},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=i(20),o=i(4),r=i(0),a=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.uid=this.uid,t.category=this.category,t.type=this.type,t.expression=this.expression,t.keyCode=this.keyCode,t.mouseButton=this.mouseButton,null!=this.button&&null!=this.button.uid&&(t.button=new n.default,t.button.uid=this.button.uid),t.frames=this.frames,t.seconds=this.seconds,t.x1=this.x1,t.y1=this.y1,t.x2=this.x2,t.y2=this.y2,t.relation=this.relation,t.distance=this.distance,t.gamepadIndex=this.gamepadIndex,t.gamepadButtonIndex=this.gamepadButtonIndex,null!=this.objectSelectorDefinition&&(t.objectSelectorDefinition=this.objectSelectorDefinition.toJSON()),null!=this.object1&&(t.object1=this.object1.toJSON()),null!=this.object2&&(t.object2=this.object2.toJSON()),t},e.fromJSON=function(t,i){if(null==t)return null;var r=i.getObject(t.uid);return null==r&&((r=new e).uid=t.uid,i.addObject(r)),r.category=t.category,r.type=t.type,r.expression=t.expression,r.keyCode=t.keyCode,r.mouseButton=t.mouseButton,null!=t.button&&null!=t.button.uid&&(r.button=i.getOrAddObject(t.button,n.default)),r.frames=t.frames,r.seconds=t.seconds,r.x1=t.x1,r.y1=t.y1,r.x2=t.x2,r.y2=t.y2,r.relation=t.relation,r.distance=t.distance,r.gamepadIndex=t.gamepadIndex,r.gamepadButtonIndex=t.gamepadButtonIndex,r.objectSelectorDefinition=o.default.fromJSON(t.objectSelectorDefinition,i),r.object1=o.default.fromJSON(t.object1,i),r.object2=o.default.fromJSON(t.object2,i),r},e.prototype.duplicate=function(){var t,i,n,o=new r.default,a=new e;return a.uid=o.uid(),a.category=this.category,a.type=this.type,a.expression=this.expression,a.keyCode=this.keyCode,a.mouseButton=this.mouseButton,a.button=this.button,a.frames=this.frames,a.seconds=this.seconds,a.x1=this.x1,a.y1=this.y1,a.x2=this.x2,a.y2=this.y2,a.relation=this.relation,a.distance=this.distance,a.gamepadIndex=this.gamepadIndex,a.gamepadButtonIndex=this.gamepadButtonIndex,a.objectSelectorDefinition=null===(t=this.objectSelectorDefinition)||void 0===t?void 0:t.duplicate(),a.object1=null===(i=this.object1)||void 0===i?void 0:i.duplicate(),a.object2=null===(n=this.object2)||void 0===n?void 0:n.duplicate(),a},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(60),r=i(31),a=function(){function e(){}return e.prototype.toJSON=function(){var t=new n.default,i=new e;return i.uid=this.uid,i.description=this.description,i.loop=this.loop.toJSON(),i.blocks=t.arrayToJSON(this.blocks),i},e.fromJSON=function(t,i){if(null==t)return null;var a=i.getObject(t.uid);null==a&&((a=new e).uid=t.uid,i.addObject(a)),a.description=t.description,a.loop=o.default.fromJSON(t.loop,i);var s=new n.default;return a.blocks=s.arrayFromJSON(t.blocks,r.default.fromJSON,i),a},e.prototype.duplicate=function(t){var i=new n.default,o=new e;o.uid=i.uid(),o.description=this.description,o.loop=this.loop.duplicate();for(var r=new Array,a=0;a<this.blocks.length;a++){var s=this.blocks[a].duplicate(t);r.push(s)}return o.blocks=r,o},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4),o=function(){function e(){}return e.prototype.toJSON=function(){var t=new e;return t.type=this.type,null!=this.objectSelectorDefinition&&(t.objectSelectorDefinition=this.objectSelectorDefinition.toJSON()),t.loopVariableName=this.loopVariableName,t.from=this.from,t.to=this.to,t.increment=this.increment,t.times=this.times,t},e.fromJSON=function(t,i){var o=new e;return o.type=t.type,o.objectSelectorDefinition=n.default.fromJSON(t.objectSelectorDefinition,i),o.loopVariableName=t.loopVariableName,o.from=t.from,o.to=t.to,o.increment=t.increment,o.times=t.times,o},e.prototype.duplicate=function(){var t=new e;return t.type=this.type,t.objectSelectorDefinition=this.objectSelectorDefinition.duplicate(),t.loopVariableName=this.loopVariableName,t.from=this.from,t.to=this.to,t.increment=this.increment,t.times=this.times,t},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.deleteInitialObject=function(e,t){for(var i=0;i<e.initialObjects.length;i++)if(e.initialObjects[i]==t)return this.deleteObjectConstraints(e,t),void e.initialObjects.splice(i,1)},e.prototype.deleteObjectConstraints=function(e,t){for(var i=e.initialConstraints,n=i.length-1;n>=0;n--){var o=i[n];o.object1!=t&&o.object2!=t||e.initialConstraints.splice(n,1)}},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0,t.ActionTemplateController=void 0;var n=i(63),o=i(2),r=i(36),a=i(47),s=i(17),l=i(0),u=i(77),d=i(4),c=i(55),h=i(19),p=i(1),m=i(3),f=i(20),y=i(6),v=i(37),E=i(7),b=i(16),g=i(48),T=i(9),A=i(15),O=i(30),C=i(82),S=i(33),_=i(28),w=i(5),x=i(56),L=i(23),j=i(38),I=i(87),B=i(89),N=i(90),D=i(10),M=i(91),R=i(13),V=i(92),P=i(49),F=i(93),k=i(22),J=i(94),U=i(95),G=i(96),Y=i(97),W=i(21),X=i(11),z=i(98),H=i(99),K=i(100),q=i(101),Z=i(102),Q=i(25),$=i(103),ee=i(105),te=i(106),ie=i(35),ne=i(107),oe=i(108),re=i(18),ae=i(109),se=i(61),le=function(){function e(e){if(this.gameLoopBuilder=new ae.default(this),this.lastUpdateTime=null,this.fpsLimit=200,this.minDelta=1e3/this.fpsLimit,this.deltaCredit=0,this.isExported=!1,this.isAutoSaveEnabled=!0,this.gameSize=0,this.gameSizeFormatted="",this.localStorageGameSize=0,this.localStorageGameSizeFormatted="",this.showDebug=!1,this.customObjectTypeBehaviourController=null,this.customObjectTypeAnimationController=new J.default(this),this.customObjectTypeController=new q.default(this),this.editLoopController=new B.default(this),this.gamePropertiesController=new N.default(this),this.advancedSettingsController=new oe.default(this),this.visualScriptController=new M.default(this),this.visualScriptsController=new V.default(this),this.visualScriptFunctionController=new ee.default(this),this.extensionsController=new U.default(this),this.extensionNeatController=new G.default(this),this.insertExpressionController=new Y.default(this),this.objectVariableController=new z.default(this),this.globalVariableController=new H.default(this),this.levelVariableController=new K.default(this),this.eventActionController=new Z.default(this),this.levelController=new $.default(this),this.initialConstraintController=new ne.default(this),this.levelService=new se.default,this.onGameError=null,this.debugInfo={hasError:!1,currentBlockUid:null,errorMessage:null},this.keyup=null,this.keydown=null,this.environment=new a.default,this.util=new l.default,this.genericService=new s.default,this.gameDefinition=null,this.actionTemplate=null,this.sourceCode=null,this.canvas=document.getElementById("myCanvas"),this.ctx=null,this.levelPreviewViewModel=null,this.loading=!1,this.message=null,this.errorMessage=null,this.errorField=null,this.currentTab="GAME_PROPERTIES",this.currentTab2="",this.currentScreen="GAME_PROPERTIES",this.returnScreen="",this.previousLevelTab="INITIAL_OBJECTS",this.resourcesBaseUrl=null,this.isPlayingGame=!1,this.showObjectSelectorHelp=!1,this.hiscores=new Array,this.gameParamsJson=null,this.gameParamsJsonDecycled=null,this.newGameParamsJson=null,this.gameId=null,this.gameName="",this.gameDescription="",this.gameThumbnail="",this.newEventActionTypeCode=E.default.EMPTY.code,this.currentEventIndex=null,this.currentEvent=null,this.currentBlock=null,this.currentScript=null,this.editingPlayer=null,this.editingPlayerLevelIndex=null,this.newEventCondition=null,this.oldEventCondition=null,this.newEventAction=null,this.oldEventAction=null,this.newCustomText=null,this.oldCustomText=null,this.newCustomObject=null,this.oldCustomObject=null,this.newAttributeToShow=null,this.oldAttributeToShow=null,this.newLevelText=null,this.oldLevelText=null,this.oldButton=null,this.newButton=null,this.oldEvent=null,this.newEvent=null,this.oldCustomImage=null,this.newCustomImage=null,this.oldCustomAudio=null,this.newCustomAudio=null,this.objectVariables=new Array,this.objectAnimations=new Array,this.currentLocalVariables=new Array,this.buttons=new Array,this.mouseButtons=this.genericService.getMouseButtons(),this.conditionObjectSelectorTypes=this.genericService.getConditionObjectSelectorTypes(),this.actionObjectSelectorTypes=this.genericService.getActionObjectSelectorTypes(),this.keys=this.genericService.getKeyboardKeys(),this.backgroundTypes=[{code:A.default.IMAGE,name:"Image"},{code:A.default.SOLID_COLOR,name:"Solid color"}],this.renderTypes=this.genericService.getRenderTypes(),this.drawTypes=this.genericService.getDrawTypes(),this.eventActionCategories=this.genericService.getEventActionCategories(),this.eventActionTypes=this.genericService.getEventActionTypes(),this.eventConditionCategories=this.genericService.getEventConditionCategories(),this.eventConditionTypes=this.genericService.getEventConditionTypes(),this.relations=[{code:g.default.EQUAL},{code:g.default.GREATER},{code:g.default.SMALLER},{code:g.default.GREATER_OR_EQUAL},{code:g.default.SMALLER_OR_EQUAL},{code:g.default.DIFFERENT}],this.sourceTypes=[{code:"COORDINATES"},{code:"MOUSE_POSITION"},{code:"OBJECT"}],this.targetTypes=[{code:"COORDINATES"},{code:"MOUSE_POSITION"},{code:"SPEED_X_Y"},{code:"ANGLE"},{code:"OBJECT"}],this.forceTargetTypes=[{code:"COORDINATES"},{code:"ANGLE"}],this.customObjectAttributes=this.genericService.getCustomObjectAttributes(),this.buttonAttributes=[{code:"x"},{code:"y"},{code:"width"},{code:"height"},{code:"borderSize"},{code:"backgroundColor"},{code:"borderColor"},{code:"textColor"}],this.keyboardMovementDirections=this.genericService.getKeyboardMovementDirections(),this.keyboardMovementKeys=this.genericService.getKeyboardMovementKeys(),this.keyboardMovementTypes=[{code:"SET_SPEED_ON_KEY_DOWN",name:"Set speed on key down"},{code:"SET_ACCELERATION_ON_KEY_DOWN",name:"Set acceleration on key down"},{code:"ADD_POSITION_ON_KEY_DOWN",name:"Add position on key down"}],this.textAlignOptions=[{code:"center"},{code:"left"},{code:"right"}],this.drawTypeOptions=[{code:"FILL"},{code:"STROKE"},{code:"FILL_AND_STROKE"}],this.fontFamilyOptions=[{code:"serif"},{code:"sans-serif"},{code:"cursive"},{code:"fantasy"},{code:"monospace"},{code:"times"},{code:"courier"},{code:"arial"},{code:"Times New Roman"},{code:"Helvetica"},{code:"Arial Black"},{code:"Comic Sans MS"},{code:"Courier New"},{code:"Courier"},{code:"Lucida Console"},{code:"Verdana"}],this.miniaturesImages=new Map,this.customImagesWithMiniatures=new Array,this.objectTypesWithMiniatures=new Array,null!=e){var t=this;this.ctx=this.canvas.getContext("2d"),this.customObjectTypeBehaviourController=new I.default(this),this.resourcesBaseUrl=e,this.levelPreviewViewModel=new C.default(this,e),this.refreshSession(),this.canvas.addEventListener("mousemove",(function(e){if(null!=t.actionTemplate){var i=function(e,t){return n(e,t)}(t.canvas,e);t.actionTemplate.mousemove(i)}}),!1),this.canvas.addEventListener("click",(function(e){null!=t.actionTemplate&&t.actionTemplate.click()}),!1),this.canvas.addEventListener("mousedown",(function(e){null!=t.actionTemplate&&t.isPlayingGame&&(t.actionTemplate.mousedown(e.button),e.preventDefault(),e.stopPropagation())}),!1),this.canvas.addEventListener("mouseup",(function(e){null!=t.actionTemplate&&t.isPlayingGame&&(t.actionTemplate.mouseup(e.button),e.preventDefault(),e.stopPropagation())}),!1);this.keydown=function(e){null!=t.actionTemplate&&t.isPlayingGame&&(e.preventDefault(),t.actionTemplate.keydown(e))},this.keyup=function(e){null!=t.actionTemplate&&t.isPlayingGame&&(e.preventDefault(),t.actionTemplate.keyup(e))},document.addEventListener("keydown",this.keydown,!1),document.addEventListener("keyup",this.keyup,!1),window.addEventListener("devicemotion",(function(e){var i=e.accelerationIncludingGravity.x,n=e.accelerationIncludingGravity.y,o=e.accelerationIncludingGravity.z;t.actionTemplate.updateAccelerometer(i,n,o)}),!0),this.canvas.addEventListener("touchmove",(function(e){null!=t.actionTemplate&&t.isPlayingGame&&(e.preventDefault(),t.actionTemplate.play.touchMoveList.push(e),i(e))}),!1),this.canvas.addEventListener("touchstart",(function(e){null!=t.actionTemplate&&t.isPlayingGame&&(e.preventDefault(),t.actionTemplate.play.touchStartList.push(e),i(e))}),!1),this.canvas.addEventListener("touchend",(function(e){null!=t.actionTemplate&&t.isPlayingGame&&(e.preventDefault(),t.actionTemplate.play.touchEndList.push(e),i(e))}),!1),null==this.gameId&&this.startNewGame()}function i(e){for(var i=e.changedTouches,o=0;o<i.length;o++){var r=i[o],a=n(t.canvas,r);t.actionTemplate.play.lastTouchX=a.x,t.actionTemplate.play.lastTouchY=a.y}}function n(e,i){var n=e.getBoundingClientRect();if(!(null!=window.document.fullscreenElement))return{x:i.clientX-n.left,y:i.clientY-n.top};var o=window.screen.width,r=window.screen.height,a=r/t.gameDefinition.canvasHeight,s=o/t.gameDefinition.canvasWidth,l=Math.min(s,a),u=o-t.gameDefinition.canvasWidth*l,d=r-t.gameDefinition.canvasHeight*l;return{x:(i.clientX-n.left)/l-u/2/l,y:(i.clientY-n.top)/l-d/2/l}}}return e.prototype.updateObjectTypesWithMiniatures=function(){this.objectTypesWithMiniatures=new Array;for(var e=this.gameParamsJson.customObjectTypes,t=0;t<e.length;t++){var i=e[t],n=new S.default;i.image.imageSourceType==_.default.UPLOAD?(n.uid=i.image.customImage.uid,n.imageData=i.image.customImage.imageData):i.image.imageSourceType==_.default.LIBRARY&&(n.uid=i.image.imageId,n.imageData="");var o=this.getMiniatureImage(n);this.objectTypesWithMiniatures.push({objectType:i,miniatureImage:o})}},e.prototype.updateCustomImagesWithMiniatures=function(){this.customImagesWithMiniatures=new Array;for(var e=this.gameParamsJson.customImages,t=0;t<e.length;t++){var i=e[t],n=this.getMiniatureImage(i);this.customImagesWithMiniatures.push({customImage:i,miniatureImage:n})}},e.prototype.getMiniatureImage=function(e){var t=this.miniaturesImages.get(e.uid);if(null!=t);else{(t=new S.default).uid=this.util.uid(),t.imageData="",this.miniaturesImages.set(e.uid,t);this.util.resizeImage(e.imageData,128,128,(function(e){t.imageData=e}))}return t},e.prototype.updateGameUpdatedDate=function(){var e=(new Date).toISOString();this.gameParamsJson.updatedAt=e,null==this.gameParamsJson.createdAt&&(this.gameParamsJson.createdAt=e)},e.prototype.setGameSize=function(e){this.gameSize=e,this.gameSizeFormatted=this.util.formatBytes(e)},e.prototype.updateGameSize=function(){var e=this.buildJsonDecycled(0);this.setGameSize(e.length)},e.prototype.autoSave=function(){this.isAutoSaveEnabled&&this.saveJsonToLocalStorage()},e.prototype.saveJsonToLocalStorage=function(){this.updateGameUpdatedDate();if(this.gameSize<5242880){var e=this.buildJsonDecycled(0);this.setGameSize(e.length),localStorage.setItem("gameJSON",e)}},e.prototype.getGameDefinitionFromLocalStorage=function(){var e=localStorage.getItem("gameJSON");return null==e?null:(this.localStorageGameSize=e.length,this.localStorageGameSizeFormatted=this.util.formatBytes(this.localStorageGameSize),this.util.retrocycle(JSON.parse(e)))},e.prototype.loadJsonFromLocalStorage=function(){var e=localStorage.getItem("gameJSON");if(null!=e){var t=this.loadGameDecycled(e);return t.success&&(this.updateCustomImagesWithMiniatures(),this.updateObjectTypesWithMiniatures(),this.setGameSize(e.length)),t}},e.prototype.clearJsonFromLocalStorage=function(){localStorage.removeItem("gameJSON")},e.prototype.openAudioSelection=function(e){this.setCurrentScreen("AUDIO_SELECTION"),this.returnScreen=e},e.prototype.closeAudioSelection=function(){this.setCurrentScreen(this.returnScreen)},e.prototype.selectLibraryAudio=function(e){var t=new x.default;t.audioSourceType=L.default.LIBRARY,t.audioPath=e,"EDIT_EVENT_ACTION"==this.returnScreen&&(this.newEventAction.audio=t),this.closeAudioSelection()},e.prototype.selectUploadedAudio=function(e){var t=new x.default;t.audioSourceType=L.default.UPLOAD,t.customAudio=this.util.findElementByUid(this.gameParamsJson.customAudios,e),"EDIT_EVENT_ACTION"==this.returnScreen&&(this.newEventAction.audio=t),this.closeAudioSelection()},e.prototype.openImageSelection=function(e){this.setCurrentScreen("IMAGE_SELECTION"),this.returnScreen=e},e.prototype.selectCustomImage=function(e){var t=new w.default;t.imageSourceType=_.default.UPLOAD,t.imageId="custom:"+e,t.customImage=this.util.findElementByUid(this.gameParamsJson.customImages,e),"CUSTOM_OBJECT_TYPE_PROPERTIES"==this.returnScreen?this.customObjectTypeController.newCustomObjectType.image=t:"PROPERTIES"==this.returnScreen?this.levelController.newLevel.backgroundImage=t:"EDIT_EVENT_ACTION"==this.returnScreen?this.newEventAction.image=t:"CUSTOM_OBJECT_TYPE_ANIMATIONS"==this.returnScreen&&this.customObjectTypeAnimationController.addAnimationFrame(t),this.closeImageSelection()},e.prototype.selectImage=function(e){var t=new w.default;t.imageSourceType=_.default.LIBRARY,t.imageId=e,"CUSTOM_OBJECT_TYPE_PROPERTIES"==this.returnScreen?this.customObjectTypeController.newCustomObjectType.image=t:"PROPERTIES"==this.returnScreen?this.levelController.newLevel.backgroundImage=t:"EDIT_EVENT_ACTION"==this.returnScreen?this.newEventAction.image=t:"CUSTOM_OBJECT_TYPE_ANIMATIONS"==this.returnScreen&&this.customObjectTypeAnimationController.addAnimationFrame(t),this.closeImageSelection()},e.prototype.closeImageSelection=function(){this.setCurrentScreen(this.returnScreen)},e.prototype.openObjectTypeSelection=function(e){this.setCurrentScreen("OBJECT_TYPE_SELECTION"),this.returnScreen=e},e.prototype.selectObjectType=function(e){var t=this.util.findElementByUid(this.gameParamsJson.customObjectTypes,e);"EDIT_CUSTOM_OBJECT"==this.returnScreen?this.newCustomObject.objectType=t:"EDIT_CUSTOM_OBJECT_TYPE_BEHAVIOUR"==this.returnScreen&&this.customObjectTypeBehaviourController.addPlatformObjectType(t),this.closeImageSelection()},e.prototype.closeObjectTypeSelection=function(){this.setCurrentScreen(this.returnScreen)},e.prototype.filterEventConditionTypes=function(){this.eventConditionTypes=this.genericService.getEventConditionTypesByCategory(this.newEventCondition.category)},e.prototype.clearEventConditionType=function(){this.newEventCondition.type=null},e.prototype.filterEventActionTypes=function(){this.eventActionTypes=this.genericService.getEventActionTypesByCategory(this.newEventAction.category)},e.prototype.clearEventActionType=function(){this.newEventAction.type=E.default.EMPTY,this.newEventActionTypeCode=E.default.EMPTY.code},e.prototype.updateEventActionType=function(){null!=this.newEventActionTypeCode&&(this.newEventAction.type=E.default.findByCode(this.newEventActionTypeCode),this.newEventAction.value=null,this.fillEventActionDefaultValues())},e.prototype.fillEventActionDefaultValues=function(){this.newEventAction.type.code==E.default.DRAW_TEXT.code?(null==this.newEventAction.fontSize&&(this.newEventAction.fontSize="20"),null==this.newEventAction.fontFamily&&(this.newEventAction.fontFamily="arial"),null==this.newEventAction.textAlign&&(this.newEventAction.textAlign="left"),null!=this.newEventAction.color.red&&""!=this.newEventAction.color.red||(this.newEventAction.color.red="0"),null!=this.newEventAction.color.green&&""!=this.newEventAction.color.green||(this.newEventAction.color.green="0"),null!=this.newEventAction.color.blue&&""!=this.newEventAction.color.blue||(this.newEventAction.color.blue="0"),null==this.newEventAction.alpha&&(this.newEventAction.alpha="1")):this.newEventAction.type.code==E.default.DRAW_ARC.code?null==this.newEventAction.alpha&&(this.newEventAction.alpha="1"):this.newEventAction.type.code==E.default.DRAW_LINE.code?(null==this.newEventAction.lineWidth&&(this.newEventAction.lineWidth="1"),null==this.newEventAction.alpha&&(this.newEventAction.alpha="1")):this.newEventAction.type.code==E.default.DRAW_CIRCLE.code||this.newEventAction.type.code==E.default.DRAW_RECT.code?null==this.newEventAction.alpha&&(this.newEventAction.alpha="1"):this.newEventAction.type.code==E.default.DRAW_IMAGE.code?(null==this.newEventAction.alpha&&(this.newEventAction.alpha="1"),null==this.newEventAction.rotation&&(this.newEventAction.rotation="0")):this.newEventAction.type.code==E.default.DRAW_PERCENTAGE_BAR.code?(null==this.newEventAction.alpha&&(this.newEventAction.alpha="1"),null==this.newEventAction.borderSize&&(this.newEventAction.borderSize="1")):this.newEventAction.type.code==E.default.ADD_CONSTRAINT.code&&(null==this.newEventAction.stiffness&&(this.newEventAction.stiffness="1"),null==this.newEventAction.damping&&(this.newEventAction.damping="0"),null==this.newEventAction.x1&&(this.newEventAction.x1="0"),null==this.newEventAction.y1&&(this.newEventAction.y1="0"),null==this.newEventAction.x2&&(this.newEventAction.x2="0"),null==this.newEventAction.y2&&(this.newEventAction.y2="0"),null==this.newEventAction.constraintType&&(this.newEventAction.constraintType=ie.default.FIXED_DISTANCE_BETWEEN_TWO_OBJECTS),null==this.newEventAction.visible&&(this.newEventAction.visible=!0),null==this.newEventAction.color&&(this.newEventAction.color=new r.default("0","0","0")),""==this.newEventAction.color.red&&(this.newEventAction.color.red="0"),""==this.newEventAction.color.green&&(this.newEventAction.color.green="0"),""==this.newEventAction.color.blue&&(this.newEventAction.color.blue="0"),null==this.newEventAction.alpha&&(this.newEventAction.alpha="1"),null==this.newEventAction.lineWidth&&(this.newEventAction.lineWidth="2"))},e.prototype.toggleObjectSelectorHelp=function(){this.showObjectSelectorHelp=!this.showObjectSelectorHelp},e.prototype.newGame=function(){this.startNewGame()},e.prototype.startNewGame=function(){this.actionTemplate=null,this.isPlayingGame=!1,this.gameId=null,this.gameName="My Game",this.gameDescription="";var e=(new Date).toISOString(),t=new u.default;t.name="My Game",t.description="",t.engineVersion=this.environment.templateVersion,t.engineVersionOriginal=this.environment.templateVersion,t.createdAt=e,t.updatedAt=e,t.canvasHeight=500,t.canvasWidth=600,t.levels=new Array,t.customObjectTypes=new Array,t.globalVariables=new Array,t.customImages=new Array,t.customAudios=new Array,t.framerateType=re.default.UNLIMITED,t.maxFps=null,t.maxDeltaTime=50,this.gameParamsJson=t,this.gamePropertiesController.loadGameProperties(),this.levelController.addLevel(),this.updateGameSize(),this.clearDebugInfo()},e.prototype.requestCanvasFullscreen=function(){this.util.requestCanvasFullscreen()},e.prototype.refreshSession=function(){this.sessionId=this.util.getCookie("sessionId")},e.prototype.setCurrentTab=function(e){this.currentTab=e,this.insertExpressionController.closeExpressionHelp(),"SAVE"==e&&this.refreshSession(),"IMPORT_EXPORT"!=e&&"IMPORT_GAME"!=e&&"EXPORT_GAME"!=e||(this.gameParamsJsonDecycled=null),"VISUAL_SCRIPTS"==e&&this.visualScriptsController.updateCurrentScript(),"CUSTOM_IMAGES"==e&&this.updateCustomImagesWithMiniatures(),"CUSTOM_OBJECT_TYPES"==e&&this.updateObjectTypesWithMiniatures();for(var t=["GAME_PROPERTIES","LEVELS","CUSTOM_OBJECT_TYPES","CUSTOM_TEXTS","GLOBAL_VARIABLES","EVENTS","VISUAL_SCRIPTS","EXTENSIONS","IMPORT_EXPORT","IMPORT_GAME","EXPORT_GAME","SAVE","EDIT_LEVEL","EDIT_CUSTOM_OBJECT","EDIT_GLOBAL_VARIABLE","EDIT_CUSTOM_TEXT","EDIT_EVENT","EDIT_LOOP","EDIT_EVENT_CONDITION","EDIT_EVENT_ACTION","EDIT_BUTTON","EDIT_LEVEL_VARIABLE","EDIT_OBJECT_VARIABLE","EDIT_CUSTOM_OBJECT_TYPE","EDIT_CUSTOM_OBJECT_TYPE_BEHAVIOUR","CUSTOM_IMAGES","CUSTOM_AUDIOS"],i=0;i<t.length;i++){var n=document.getElementById("link-tab-"+t[i]);null!=n&&(n.className="nav-link")}var o=document.getElementById("link-tab-"+e);null!=o&&o.classList.add("active"),this.setCurrentTab2(""),this.setCurrentScreen(e)},e.prototype.setCurrentTab2=function(e){this.currentTab2=e;for(var t=["PROPERTIES","INITIAL_OBJECTS","LEVEL_TEXTS","BUTTONS","LEVEL_VARIABLES","LEVEL_EVENTS","CUSTOM_OBJECT_TYPE_PROPERTIES","CUSTOM_OBJECT_TYPE_BEHAVIOURS","CUSTOM_OBJECT_TYPE_PHYSICS","CUSTOM_OBJECT_TYPE_ANIMATIONS","CUSTOM_OBJECT_VARIABLES"],i=0;i<t.length;i++){var n=document.getElementById("link-tab-"+t[i]);null!=n&&(n.className="nav-link")}var o=document.getElementById("link-tab-"+e);null!=o&&o.classList.add("active"),"PROPERTIES"!=e&&"INITIAL_OBJECTS"!=e&&"LEVEL_TEXTS"!=e&&"BUTTONS"!=e&&"LEVEL_VARIABLES"!=e&&"LEVEL_EVENTS"!=e||(this.previousLevelTab=e),this.setCurrentScreen(e)},e.prototype.setCurrentScreen=function(e){this.currentScreen=e},e.prototype.addInput=function(){var e=new W.default;e.uid=this.util.uid(),e.value="",this.newEventAction.inputs.push(e)},e.prototype.buildEventAction=function(){var e=new c.default;e.category=v.default.GAME,e.type=E.default.ADD_TO_SCORE,e.textType=P.default.STATIC_TEXT,e.variableTextType=P.default.STATIC_TEXT,e.valueTextType=P.default.STATIC_TEXT,e.constraintType=ie.default.FIXED_DISTANCE_BETWEEN_TWO_OBJECTS,e.value="1",e.font=null,e.fillStyle=null,e.textAlign=null,e.attribute=null,e.variable=null,e.speed=null,e.angle=null,e.targetX=null,e.targetY=null,e.force=null,e.objectSelectorDefinition=new d.default,e.objectSelectorDefinition.objectType=new p.default,e.objectSelectorDefinition.variable=new m.default,e.sourceObjectSelectorDefinition=new d.default,e.sourceObjectSelectorDefinition.objectType=new p.default,e.sourceObjectSelectorDefinition.variable=new m.default,e.targetObjectSelectorDefinition=new d.default,e.targetObjectSelectorDefinition.objectType=new p.default,e.targetObjectSelectorDefinition.variable=new m.default,e.objectSelectorDefinition1=new d.default,e.objectSelectorDefinition1.objectType=new p.default,e.objectSelectorDefinition1.variable=new m.default,e.objectSelectorDefinition2=new d.default,e.objectSelectorDefinition2.objectType=new p.default,e.objectSelectorDefinition2.variable=new m.default,e.color=new r.default("","",""),e.borderColor=new r.default("","",""),e.backgroundColor=new r.default("","",""),e.levelDefinition=new h.default,e.button=new f.default,e.textDefinition=new O.default,e.globalVariable=new m.default,e.levelVariable=new m.default,e.objectVariable=new m.default,e.variableCategory=Q.default.GLOBAL_VARIABLE;var t=new w.default;t.imageSourceType=_.default.LIBRARY,t.imageId="images/asset-packs/kenney/2d/puzzle-2/png/balls/grey/edited/ball-red.png",e.image=t;var i=new x.default;return i.audioPath="audio/kenney/retro-sounds/jump1.ogg",i.audioSourceType=L.default.LIBRARY,i.customAudio=new j.default,e.audio=i,e.volume="100",e.zIndex="0",e.saveToVariable=!1,e},e.prototype.loadEventActionInputList=function(){var e,t,i=this;if(this.newEventAction.type.code==E.default.ACTIVATE_NEURAL_NETWORK.code){if(null==(l=this.gameParamsJson.extensions.neatExtension))return;var n=this.newEventAction.neat.uid;if(null==n)return;for(var o=l.neatList.find((function(e){return e.uid==n})),r=new Array,a=0;a<o.getInputSize();a++){var s=null===(e=this.newEventAction.inputs[a])||void 0===e?void 0:e.value;(u=new W.default).uid=o.inputDefinitions[a].uid,u.name=o.inputDefinitions[a].name,u.value=null!=s?s:"",r.push(u)}this.newEventAction.inputs=r}else if(this.newEventAction.type.code==E.default.ACTIVATE_OBJECT_NEURAL_NETWORK.code){var l;if(null==(l=this.gameParamsJson.extensions.neatExtension))return;if(this.loadLoopObjectVariables(this.newEventAction.objectSelectorDefinition.loopVariableName),null==(o=this.objectVariables.find((function(e){return e.uid==i.newEventAction.objectVariable.uid})).neat))return;for(r=new Array,a=0;a<o.getInputSize();a++){var u;s=null===(t=this.newEventAction.inputs[a])||void 0===t?void 0:t.value;(u=new W.default).uid=o.inputDefinitions[a].uid,u.name=o.inputDefinitions[a].name,u.value=null!=s?s:"",r.push(u)}this.newEventAction.inputs=r}},e.prototype.editEventAction=function(e){var t;this.currentBlock=e;var i=e.actionBlock.action;this.currentLocalVariables=this.getLocalVariablesByBlock(e),this.setCurrentScreen("EDIT_EVENT_ACTION"),this.oldEventAction=i,this.newEventAction=this.util.cloneObject(this.oldEventAction),this.newEventAction.textDefinition=this.newEventAction.textDefinition||new O.default,this.newEventAction.visualScriptFunction=this.newEventAction.visualScriptFunction||new D.default,this.newEventAction.customObjectType=this.newEventAction.customObjectType||new p.default,this.newEventAction.levelVariable=this.newEventAction.levelVariable||new m.default,this.newEventAction.objectVariable=this.newEventAction.objectVariable||new m.default,this.newEventAction.globalVariable=this.newEventAction.globalVariable||new m.default,this.newEventAction.variableCategory=this.newEventAction.variableCategory||Q.default.GLOBAL_VARIABLE,this.newEventAction.neat=this.newEventAction.neat||new X.default,this.newEventAction.inputs=this.newEventAction.inputs||new Array,this.loadEventActionInputList(),null!==(t=this.newEventAction.audio==this.newEventAction.audio)&&void 0!==t||new x.default,null==this.newEventAction.audio.customAudio&&(this.newEventAction.audio.customAudio=new j.default),null==this.newEventAction.objectSelectorDefinition&&(this.newEventAction.objectSelectorDefinition=new d.default),null==this.newEventAction.objectSelectorDefinition.objectType&&(this.newEventAction.objectSelectorDefinition.objectType=new p.default),null==this.newEventAction.objectSelectorDefinition.variable&&(this.newEventAction.objectSelectorDefinition.variable=new m.default),null==this.newEventAction.sourceObjectSelectorDefinition&&(this.newEventAction.sourceObjectSelectorDefinition=new d.default),null==this.newEventAction.sourceObjectSelectorDefinition.objectType&&(this.newEventAction.sourceObjectSelectorDefinition.objectType=new p.default),null==this.newEventAction.sourceObjectSelectorDefinition.variable&&(this.newEventAction.sourceObjectSelectorDefinition.variable=new m.default),null==this.newEventAction.targetObjectSelectorDefinition&&(this.newEventAction.targetObjectSelectorDefinition=new d.default),null==this.newEventAction.targetObjectSelectorDefinition.objectType&&(this.newEventAction.targetObjectSelectorDefinition.objectType=new p.default),null==this.newEventAction.targetObjectSelectorDefinition.variable&&(this.newEventAction.targetObjectSelectorDefinition.variable=new m.default),null==this.newEventAction.objectSelectorDefinition1&&(this.newEventAction.objectSelectorDefinition1=new d.default),null==this.newEventAction.objectSelectorDefinition1.objectType&&(this.newEventAction.objectSelectorDefinition1.objectType=new p.default),null==this.newEventAction.objectSelectorDefinition1.variable&&(this.newEventAction.objectSelectorDefinition1.variable=new m.default),null==this.newEventAction.objectSelectorDefinition2&&(this.newEventAction.objectSelectorDefinition2=new d.default),null==this.newEventAction.objectSelectorDefinition2.objectType&&(this.newEventAction.objectSelectorDefinition2.objectType=new p.default),null==this.newEventAction.objectSelectorDefinition2.variable&&(this.newEventAction.objectSelectorDefinition2.variable=new m.default),null==this.newEventAction.color&&(this.newEventAction.color=new r.default("","","")),null==this.newEventAction.borderColor&&(this.newEventAction.borderColor=new r.default("","","")),null==this.newEventAction.backgroundColor&&(this.newEventAction.backgroundColor=new r.default("","","")),null==this.newEventAction.levelDefinition&&(this.newEventAction.levelDefinition=new h.default),null==this.newEventAction.button&&(this.newEventAction.button=new f.default),null==this.newEventAction.animation&&(this.newEventAction.animation=new k.default),this.filterEventActionTypes(),this.newEventActionTypeCode=this.newEventAction.type.code,this.loadButtons(),this.eventActionController.loadTextDefinitions(),this.newEventAction.type.code!=E.default.SET_OBJECT_VARIABLE.code&&this.newEventAction.type.code!=E.default.ADD_TO_OBJECT_VARIABLE.code||(this.newEventAction.objectSelectorDefinition.type==y.default.LOOP_OBJECT?this.loadLoopObjectVariables(this.newEventAction.objectSelectorDefinition.loopVariableName):this.newEventAction.objectSelectorDefinition.type==y.default.ALL_OBJECTS_OF_TYPE?this.loadObjectVariables(this.newEventAction.objectSelectorDefinition.objectType.uid):this.newEventAction.objectSelectorDefinition.type==y.default.GLOBAL_VARIABLE?this.loadGlobalVariableObjectVariables(this.newEventAction.objectSelectorDefinition.variable.uid):this.newEventAction.objectSelectorDefinition.type==y.default.LEVEL_VARIABLE&&this.loadLevelVariableObjectVariables(this.newEventAction.objectSelectorDefinition.variable.uid)),this.newEventAction.type.code==E.default.ASSIGN_NEURAL_NETWORKS_TO_OBJECTS.code&&null!=this.newEventAction.customObjectType&&this.loadObjectVariables(this.newEventAction.customObjectType.uid),this.newEventAction.type.code==E.default.SET_OBJECT_ANIMATION.code&&(this.newEventAction.objectSelectorDefinition.type==y.default.LOOP_OBJECT?this.loadLoopObjectAnimations(this.newEventAction.objectSelectorDefinition.loopVariableName):this.newEventAction.objectSelectorDefinition.type==y.default.ALL_OBJECTS_OF_TYPE?this.loadObjectAnimations(this.newEventAction.objectSelectorDefinition.objectType.uid):this.newEventAction.objectSelectorDefinition.type==y.default.GLOBAL_VARIABLE?this.loadGlobalVariableObjectAnimations(this.newEventAction.objectSelectorDefinition.variable.uid):this.newEventAction.objectSelectorDefinition.type==y.default.LEVEL_VARIABLE&&this.loadLevelVariableObjectAnimations(this.newEventAction.objectSelectorDefinition.variable.uid))},e.prototype.updateEventAction=function(){var e,t,i,n,o,a,s=this;return!!this.eventActionController.validate()&&("LEVELS"==this.currentTab?this.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.currentTab&&this.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.oldEventAction.category=this.newEventAction.category,this.oldEventAction.type=E.default.findByCode(this.newEventAction.type.code),this.oldEventAction.visualScriptFunction=this.gameParamsJson.visualScriptFunctions.find((function(e){return e.uid==s.newEventAction.visualScriptFunction.uid})),this.oldEventAction.customObjectType=this.util.findElementByUid(this.gameParamsJson.customObjectTypes,this.newEventAction.customObjectType.uid),this.oldEventAction.sourceType=this.newEventAction.sourceType,this.oldEventAction.targetType=this.newEventAction.targetType,this.oldEventAction.x=this.newEventAction.x,this.oldEventAction.y=this.newEventAction.y,this.oldEventAction.attribute=this.newEventAction.attribute,this.oldEventAction.value=this.newEventAction.value,this.oldEventAction.valueTextType=this.newEventAction.valueTextType,this.oldEventAction.variable=this.newEventAction.variable,this.oldEventAction.variableTextType=this.newEventAction.variableTextType,this.oldEventAction.levelVariable=this.util.findElementByUid((null===(e=this.currentScript.level)||void 0===e?void 0:e.levelVariables)||[],this.newEventAction.levelVariable.uid),this.oldEventAction.objectVariable=this.objectVariables.find((function(e){return e.uid==s.newEventAction.objectVariable.uid})),this.oldEventAction.globalVariable=this.gameParamsJson.globalVariables.find((function(e){return e.uid==s.newEventAction.globalVariable.uid})),this.oldEventAction.variableCategory=this.newEventAction.variableCategory,this.oldEventAction.inputs=this.newEventAction.inputs,null!=this.gameParamsJson.extensions.neatExtension&&(this.oldEventAction.neat=this.gameParamsJson.extensions.neatExtension.neatList.find((function(e){return e.uid==s.newEventAction.neat.uid}))),null!=this.newEventAction.levelDefinition&&(this.oldEventAction.levelDefinition=this.util.findLevelDefinitionByUid(this.gameParamsJson.levels,this.newEventAction.levelDefinition.uid)),this.oldEventAction.audio.audioSourceType=this.newEventAction.audio.audioSourceType,this.oldEventAction.audio.audioPath=this.newEventAction.audio.audioPath,null!=this.newEventAction.audio.customAudio?this.oldEventAction.audio.customAudio=this.util.findElementByUid(this.gameParamsJson.customAudios,this.newEventAction.audio.customAudio.uid):this.oldEventAction.audio.customAudio=null,this.oldEventAction.sourceX=this.newEventAction.sourceX,this.oldEventAction.sourceY=this.newEventAction.sourceY,this.oldEventAction.targetX=this.newEventAction.targetX,this.oldEventAction.targetY=this.newEventAction.targetY,this.oldEventAction.x1=this.newEventAction.x1,this.oldEventAction.y1=this.newEventAction.y1,this.oldEventAction.x2=this.newEventAction.x2,this.oldEventAction.y2=this.newEventAction.y2,this.oldEventAction.lineWidth=this.newEventAction.lineWidth,this.oldEventAction.width=this.newEventAction.width,this.oldEventAction.height=this.newEventAction.height,this.oldEventAction.radius=this.newEventAction.radius,this.oldEventAction.speed=this.newEventAction.speed,this.oldEventAction.speedX=this.newEventAction.speedX,this.oldEventAction.speedY=this.newEventAction.speedY,this.oldEventAction.force=this.newEventAction.force,this.oldEventAction.angle=this.newEventAction.angle,this.oldEventAction.startAngle=this.newEventAction.startAngle,this.oldEventAction.endAngle=this.newEventAction.endAngle,this.oldEventAction.expression=this.newEventAction.expression,this.oldEventAction.text=this.newEventAction.text,this.oldEventAction.textType=this.newEventAction.textType,this.oldEventAction.fontSize=this.newEventAction.fontSize,this.oldEventAction.fontFamily=this.newEventAction.fontFamily,this.oldEventAction.textAlign=this.newEventAction.textAlign,this.oldEventAction.fillStyle=this.newEventAction.fillStyle,this.oldEventAction.alpha=this.newEventAction.alpha,this.oldEventAction.rotation=this.newEventAction.rotation,this.oldEventAction.maxValue=this.newEventAction.maxValue,this.oldEventAction.split=this.newEventAction.split,this.oldEventAction.visible=this.newEventAction.visible,this.oldEventAction.borderSize=this.newEventAction.borderSize,this.oldEventAction.drawType=this.newEventAction.drawType,this.oldEventAction.volume=this.newEventAction.volume,this.oldEventAction.javascriptCode=this.newEventAction.javascriptCode,this.oldEventAction.index=this.newEventAction.index,this.oldEventAction.zIndex=this.newEventAction.zIndex,this.oldEventAction.saveToVariable=this.newEventAction.saveToVariable,this.oldEventAction.gamepadIndex=this.newEventAction.gamepadIndex,this.oldEventAction.duration=this.newEventAction.duration,this.oldEventAction.startDelay=this.newEventAction.startDelay,this.oldEventAction.strongMagnitude=this.newEventAction.strongMagnitude,this.oldEventAction.weakMagnitude=this.newEventAction.weakMagnitude,this.oldEventAction.damping=this.newEventAction.damping,this.oldEventAction.stiffness=this.newEventAction.stiffness,this.oldEventAction.constraintType=this.newEventAction.constraintType,this.oldEventAction.image.imageSourceType=this.newEventAction.image.imageSourceType,this.oldEventAction.image.imageId=this.newEventAction.image.imageId,this.newEventAction.image.imageSourceType==_.default.UPLOAD?this.oldEventAction.image.customImage=this.util.findElementByUid(this.gameParamsJson.customImages,this.newEventAction.image.customImage.uid):this.oldEventAction.image.customImage=null,null!=this.newEventAction.button&&(this.oldEventAction.button=this.util.findElementByUid(this.buttons,this.newEventAction.button.uid)),null!=this.newEventAction.textDefinition&&(this.oldEventAction.textDefinition=this.util.findElementByUid(this.eventActionController.textDefinitions,this.newEventAction.textDefinition.uid)),null!=this.newEventAction.animation&&(this.oldEventAction.animation=this.util.findElementByUid(this.objectAnimations,this.newEventAction.animation.uid)),this.oldEventAction.animationFrame=this.newEventAction.animationFrame,this.oldEventAction.animationSpeed=this.newEventAction.animationSpeed,this.oldEventAction.objectSelectorDefinition=this.util.buildObjectSelectorDefinition(this.newEventAction.objectSelectorDefinition,this.gameParamsJson,null===(t=this.currentScript)||void 0===t?void 0:t.level),this.oldEventAction.sourceObjectSelectorDefinition=this.util.buildObjectSelectorDefinition(this.newEventAction.sourceObjectSelectorDefinition,this.gameParamsJson,null===(i=this.currentScript)||void 0===i?void 0:i.level),this.oldEventAction.targetObjectSelectorDefinition=this.util.buildObjectSelectorDefinition(this.newEventAction.targetObjectSelectorDefinition,this.gameParamsJson,null===(n=this.currentScript)||void 0===n?void 0:n.level),this.oldEventAction.objectSelectorDefinition1=this.util.buildObjectSelectorDefinition(this.newEventAction.objectSelectorDefinition1,this.gameParamsJson,null===(o=this.currentScript)||void 0===o?void 0:o.level),this.oldEventAction.objectSelectorDefinition2=this.util.buildObjectSelectorDefinition(this.newEventAction.objectSelectorDefinition2,this.gameParamsJson,null===(a=this.currentScript)||void 0===a?void 0:a.level),null!=this.newEventAction.color&&(this.oldEventAction.color=new r.default(this.newEventAction.color.red,this.newEventAction.color.green,this.newEventAction.color.blue)),null!=this.newEventAction.backgroundColor&&(this.oldEventAction.backgroundColor=new r.default(this.newEventAction.backgroundColor.red,this.newEventAction.backgroundColor.green,this.newEventAction.backgroundColor.blue)),null!=this.newEventAction.borderColor&&(this.oldEventAction.borderColor=new r.default(this.newEventAction.borderColor.red,this.newEventAction.borderColor.green,this.newEventAction.borderColor.blue)),this.oldEventAction=null,this.newEventAction=null,this.visualScriptController.selectBlock(this.currentBlock),this.autoSave(),!0)},e.prototype.cancelChangesEventAction=function(){"LEVELS"==this.currentTab?this.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.currentTab&&this.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.eventActionController.errorMessage=null,this.eventActionController.errorField=null,this.oldEventAction=null,this.newEventAction=null,this.visualScriptController.selectBlock(this.currentBlock)},e.prototype.deleteCustomObject=function(e,t){var i=this.gameParamsJson.levels[e],n=i.initialObjects[t];this.levelService.deleteInitialObject(i,n)},e.prototype.editCustomObject=function(e){this.setCurrentScreen("EDIT_CUSTOM_OBJECT"),this.oldCustomObject=e,this.newCustomObject=this.util.cloneObject(this.oldCustomObject)},e.prototype.cancelChangesCustomObject=function(){this.setCurrentTab2("INITIAL_OBJECTS"),this.oldCustomObject=null,this.newCustomObject=null},e.prototype.updateCustomObject=function(){this.setCurrentTab2("INITIAL_OBJECTS"),this.oldCustomObject.objectType=this.util.findElementByUid(this.gameParamsJson.customObjectTypes,this.newCustomObject.objectType.uid),this.oldCustomObject.x=Number(this.newCustomObject.x),this.oldCustomObject.y=Number(this.newCustomObject.y),this.oldCustomObject.repeatTimes=this.util.numberOrNull(this.newCustomObject.repeatTimes),this.oldCustomObject.dx=this.util.numberOrNull(this.newCustomObject.dx),this.oldCustomObject.dy=this.util.numberOrNull(this.newCustomObject.dy),this.oldCustomObject.repeatTimes2=this.util.numberOrNull(this.newCustomObject.repeatTimes2),this.oldCustomObject.dx2=this.util.numberOrNull(this.newCustomObject.dx2),this.oldCustomObject.dy2=this.util.numberOrNull(this.newCustomObject.dy2),this.oldCustomObject.zIndex=Number(this.newCustomObject.zIndex),this.oldCustomObject.inheritZIndex=Boolean(this.newCustomObject.inheritZIndex),this.oldCustomObject=null,this.newCustomObject=null,this.autoSave()},e.prototype.deleteButton=function(e,t){this.gameParamsJson.levels[e].buttons.splice(t,1)},e.prototype.editButton=function(e){this.setCurrentScreen("EDIT_BUTTON"),this.oldButton=e,this.newButton=this.util.cloneObject(this.oldButton)},e.prototype.cancelChangesButton=function(){this.setCurrentTab2("INITIAL_OBJECTS"),this.oldCustomObject=null,this.newCustomObject=null},e.prototype.updateButton=function(){this.setCurrentTab2("INITIAL_OBJECTS"),this.oldButton.name=this.newButton.name,this.oldButton.x=Number(this.newButton.x),this.oldButton.y=Number(this.newButton.y),this.oldButton.width=Number(this.newButton.width),this.oldButton.height=Number(this.newButton.height),this.oldButton.borderSize=Number(this.newButton.borderSize),this.oldButton.borderSizeMouseOver=Number(this.newButton.borderSizeMouseOver),this.oldButton.borderRadius=Number(this.newButton.borderRadius),this.oldButton.fontSize=Number(this.newButton.fontSize),this.oldButton.text=this.newButton.text,this.oldButton.backgroundColor=new o.default(Number(this.newButton.backgroundColor.red),Number(this.newButton.backgroundColor.green),Number(this.newButton.backgroundColor.blue),100),this.oldButton.backgroundColorMouseOver=new o.default(Number(this.newButton.backgroundColorMouseOver.red),Number(this.newButton.backgroundColorMouseOver.green),Number(this.newButton.backgroundColorMouseOver.blue),100),this.oldButton.borderColor=new o.default(Number(this.newButton.borderColor.red),Number(this.newButton.borderColor.green),Number(this.newButton.borderColor.blue),100),this.oldButton.borderColorMouseOver=new o.default(Number(this.newButton.borderColorMouseOver.red),Number(this.newButton.borderColorMouseOver.green),Number(this.newButton.borderColorMouseOver.blue),100),this.oldButton.textColor=new o.default(Number(this.newButton.textColor.red),Number(this.newButton.textColor.green),Number(this.newButton.textColor.blue),100),this.oldButton=null,this.newButton=null},e.prototype.deleteLevelText=function(e,t){this.gameParamsJson.levels[e].texts.splice(t,1)},e.prototype.editLevelText=function(e){this.setCurrentScreen("EDIT_LEVEL_TEXT"),this.oldLevelText=e,this.newLevelText=this.util.cloneObject(this.oldLevelText)},e.prototype.cancelChangesLevelText=function(){this.setCurrentTab2("INITIAL_OBJECTS"),this.oldLevelText=null,this.newLevelText=null},e.prototype.updateLevelText=function(){this.setCurrentTab2("INITIAL_OBJECTS"),this.oldLevelText.text=this.newLevelText.text,this.oldLevelText.name=this.newLevelText.name,this.oldLevelText.fontFamily=this.newLevelText.fontFamily,this.oldLevelText.align=this.newLevelText.align,this.oldLevelText.x=Number(this.newLevelText.x),this.oldLevelText.y=Number(this.newLevelText.y),this.oldLevelText.fontSize=Number(this.newLevelText.fontSize),this.oldLevelText.zIndex=Number(this.newLevelText.zIndex),this.oldLevelText.alpha=Number(this.newLevelText.alpha),this.oldLevelText.angle=Number(this.newLevelText.angle),this.oldLevelText.color=new o.default(this.newLevelText.color.red,this.newLevelText.color.green,this.newLevelText.color.blue),this.oldLevelText=null,this.newLevelText=null},e.prototype.goToAddCustomImage=function(){this.setCurrentScreen("ADD_CUSTOM_IMAGE"),this.newCustomImage=new S.default},e.prototype.initCustomImage=function(){this.newCustomImage=new S.default},e.prototype.addCustomImage=function(){this.newCustomImage.uid=this.util.uid(),this.gameParamsJson.customImages.push(this.newCustomImage),this.setCurrentTab("CUSTOM_IMAGES")},e.prototype.deleteCustomImage=function(e){this.gameParamsJson.customImages.splice(e,1),this.updateCustomImagesWithMiniatures()},e.prototype.editCustomImage=function(e){this.setCurrentScreen("EDIT_CUSTOM_IMAGE"),this.oldCustomImage=e,this.newCustomImage=this.util.cloneObject(this.oldCustomImage)},e.prototype.updateCustomImage=function(){this.setCurrentTab("CUSTOM_IMAGES"),this.oldCustomImage.name=this.newCustomImage.name,this.oldCustomImage.imageData=this.newCustomImage.imageData,this.oldCustomImage=null,this.newCustomImage=null},e.prototype.cancelAddCustomImage=function(){this.setCurrentTab("CUSTOM_IMAGES")},e.prototype.goToAddCustomAudio=function(){this.setCurrentScreen("ADD_CUSTOM_AUDIO"),this.newCustomAudio=new j.default},e.prototype.initCustomAudio=function(){this.newCustomAudio=new j.default},e.prototype.addCustomAudio=function(){this.newCustomAudio.uid=this.util.uid(),this.gameParamsJson.customAudios.push(this.newCustomAudio),this.setCurrentTab("CUSTOM_AUDIOS")},e.prototype.deleteCustomAudio=function(e){this.gameParamsJson.customAudios.splice(e,1)},e.prototype.editCustomAudio=function(e){this.setCurrentScreen("EDIT_CUSTOM_AUDIO"),this.oldCustomAudio=e,this.newCustomAudio=this.util.cloneObject(this.oldCustomAudio)},e.prototype.updateCustomAudio=function(){this.setCurrentTab("CUSTOM_AUDIOS"),this.oldCustomAudio.name=this.newCustomAudio.name,this.oldCustomAudio.audioData=this.newCustomAudio.audioData,this.oldCustomAudio=null,this.newCustomAudio=null},e.prototype.cancelAddCustomAudio=function(){this.setCurrentTab("CUSTOM_AUDIOS")},e.prototype.editEventCondition=function(e){this.currentBlock=e;var t=e.conditionBlock.condition;this.setCurrentScreen("EDIT_EVENT_CONDITION"),this.oldEventCondition=t;var i=this.util.cloneObject(this.oldEventCondition);null==i.object1&&(i.object1=new d.default),null==i.object1.objectType&&(i.object1.objectType=new p.default),null==i.object1.variable&&(i.object1.variable=new m.default),null==i.object2&&(i.object2=new d.default),null==i.object2.objectType&&(i.object2.objectType=new p.default),null==i.object2.variable&&(i.object2.variable=new m.default),null==i.button&&(i.button=new f.default),null==i.objectSelectorDefinition&&(i.objectSelectorDefinition=new d.default),null==i.objectSelectorDefinition.objectType&&(i.objectSelectorDefinition.objectType=new p.default),null==i.objectSelectorDefinition.variable&&(i.objectSelectorDefinition.variable=new m.default),this.newEventCondition=i,this.loadButtons(),this.currentLocalVariables=this.getLocalVariablesByBlock(e),this.filterEventConditionTypes()},e.prototype.updateEventCondition=function(){"LEVELS"==this.currentTab?this.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.currentTab&&this.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.oldEventCondition.type=this.newEventCondition.type,this.oldEventCondition.category=this.newEventCondition.category,this.oldEventCondition.expression=this.newEventCondition.expression,this.oldEventCondition.keyCode=this.newEventCondition.keyCode,this.oldEventCondition.mouseButton=this.newEventCondition.mouseButton,this.oldEventCondition.frames=Number(this.newEventCondition.frames),this.oldEventCondition.seconds=Number(this.newEventCondition.seconds),this.oldEventCondition.x1=this.newEventCondition.x1,this.oldEventCondition.y1=this.newEventCondition.y1,this.oldEventCondition.x2=this.newEventCondition.x2,this.oldEventCondition.y2=this.newEventCondition.y2,this.oldEventCondition.distance=this.newEventCondition.distance,this.oldEventCondition.relation=this.newEventCondition.relation,this.oldEventCondition.gamepadIndex=this.newEventCondition.gamepadIndex,this.oldEventCondition.gamepadButtonIndex=this.newEventCondition.gamepadButtonIndex,this.oldEventCondition.objectSelectorDefinition=this.util.buildObjectSelectorDefinition(this.newEventCondition.objectSelectorDefinition,this.gameParamsJson,this.currentScript.level),this.oldEventCondition.object1=this.util.buildObjectSelectorDefinition(this.newEventCondition.object1,this.gameParamsJson,this.currentScript.level),this.oldEventCondition.object2=this.util.buildObjectSelectorDefinition(this.newEventCondition.object2,this.gameParamsJson,this.currentScript.level),null!=this.newEventCondition.button&&(this.oldEventCondition.button=this.util.findElementByUid(this.buttons,this.newEventCondition.button.uid)),this.oldEventCondition=null,this.newEventCondition=null,this.visualScriptController.selectBlock(this.currentBlock),this.autoSave()},e.prototype.cancelChangesEventCondition=function(){"LEVELS"==this.currentTab?this.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.currentTab&&this.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.oldEventCondition=null,this.newEventCondition=null,this.visualScriptController.selectBlock(this.currentBlock)},e.prototype.buildJsonDecycled=function(e){var t=this.gameParamsJson.toJSON(),i=this.util.decycle(t,void 0);return JSON.stringify(i,null,e)},e.prototype.buildJsonDecycledWithoutResourceData=function(e){var t=this.gameParamsJson.toJSON();this.removeImageData(t),this.removeAudioData(t);var i=this.util.decycle(t,void 0);return JSON.stringify(i,null,e)},e.prototype.removeImageData=function(e){for(var t=e.customImages,i=0;i<t.length;i++){t[i].imageData=""}},e.prototype.removeAudioData=function(e){for(var t=e.customAudios,i=0;i<t.length;i++){t[i].audioData=""}},e.prototype.cleanExportedJson=function(){this.gameParamsJsonDecycled=null},e.prototype.downloadGameJSON=function(){this.updateGameUpdatedDate();var e=this.buildJsonDecycled(0),t=this.gameParamsJson.name,i=(t=t.replace(/ /g,"_"))+"_"+this.util.buildTimestamp()+".json",n=new Blob([e],{type:"text/plain;charset=utf-8"});F.saveAs(n,i)},e.prototype.exportDecycled=function(){this.gameParamsJsonDecycled=this.buildJsonDecycled(4)},e.prototype.importDecycled=function(){var e=this.loadGameDecycled(this.newGameParamsJson);return this.updateCustomImagesWithMiniatures(),this.updateObjectTypesWithMiniatures(),e},e.prototype.cancelImportExport=function(){this.setCurrentScreen(this.currentTab)},e.prototype.splitEngineVersion=function(e){var t=e.substring(1).split(".");return{major:t[0],minor:t[1],patch:t[2]}},e.prototype.loadGameDecycled=function(e){var t,i=this.util.retrocycle(JSON.parse(e)),n=new te.default;n.adjustGameDefinitionPreliminary(i),i=u.default.fromJSON(i),n.adjustGameDefinition(i);var o=null!==(t=i.engineVersion)&&void 0!==t?t:"v0.1.5",r=this.environment.templateVersion;if("snapshot"!=o&&"snapshot"!=r&&!this.util.isEngineVersionCompatible(o,r))return{success:!1,sourceEngineVersion:o};return this.gameParamsJson=i,"snapshot"!=o&&"snapshot"!=r&&(this.gameParamsJson.engineVersion=r),this.gamePropertiesController.loadGameProperties(),{success:!0,sourceEngineVersion:o}},e.prototype.setGame=function(e){this.loadGameDecycled(e.paramsJson.S)},e.prototype.setGameJson=function(e){this.loadGameDecycled(e)},e.prototype.updateGameParamsJson=function(){this.gameParamsJson=JSON.parse(this.newGameParamsJson),this.gamePropertiesController.loadGameProperties()},e.prototype.loadButtons=function(){this.buttons=[];for(var e=0;e<this.gameParamsJson.levels.length;e++)for(var t=this.gameParamsJson.levels[e],i=0;i<t.buttons.length;i++){var n=t.buttons[i];this.buttons.push(n)}},e.prototype.getLocalVariablesByBlock=function(e){var t=new Array;if(e.blockType==R.default.LOOP){var i=e.loopBlock;if(i.loop.type==b.default.OBJECT)(n=new m.default).type=T.default.CUSTOM_OBJECT_TYPE,n.name=i.loop.loopVariableName,i.loop.objectSelectorDefinition.type==y.default.ALL_OBJECTS_OF_TYPE&&(n.objectType=i.loop.objectSelectorDefinition.objectType),t.push(n);else if(i.loop.type==b.default.NUMBER){var n;(n=new m.default).type=T.default.NUMBER,n.name=i.loop.loopVariableName,t.push(n)}}else e.blockType,R.default.ACTION;var o=e.parentBlock;if(null!=o)for(var r=this.getLocalVariablesByBlock(o),a=0;a<r.length;a++){var s=r[a];t.push(s)}return t},e.prototype.loadLoopObjectVariables=function(e){var t=this.currentLocalVariables.find((function(t){return t.name==e}));null!=t&&null!=t.objectType&&(this.objectVariables=t.objectType.objectVariables)},e.prototype.loadGlobalVariableObjectVariables=function(e){var t=this.gameParamsJson.globalVariables.find((function(t){return t.uid==e}));t.type==T.default.CUSTOM_OBJECT_TYPE&&null!=t.objectType?this.objectVariables=t.objectType.objectVariables:this.objectVariables=[]},e.prototype.loadLevelVariableObjectVariables=function(e){var t=this.currentScript.level.levelVariables.find((function(t){return t.uid==e}));t.type==T.default.CUSTOM_OBJECT_TYPE&&null!=t.objectType?this.objectVariables=t.objectType.objectVariables:this.objectVariables=[]},e.prototype.loadObjectVariables=function(e){var t=this.gameParamsJson.customObjectTypes.find((function(t){return t.uid==e}));this.objectVariables=t.objectVariables},e.prototype.loadObjectAnimations=function(e){var t=this.gameParamsJson.customObjectTypes.find((function(t){return t.uid==e}));this.objectAnimations=t.animations},e.prototype.loadLoopObjectAnimations=function(e){var t=this.currentLocalVariables.find((function(t){return t.name==e}));null!=t&&null!=t.objectType&&(this.objectAnimations=t.objectType.animations)},e.prototype.loadGlobalVariableObjectAnimations=function(e){var t=this.gameParamsJson.globalVariables.find((function(t){return t.uid==e}));t.type==T.default.CUSTOM_OBJECT_TYPE&&null!=t.objectType?this.objectAnimations=t.objectType.animations:this.objectAnimations=[]},e.prototype.loadLevelVariableObjectAnimations=function(e){var t=this.currentScript.level.levelVariables.find((function(t){return t.uid==e}));t.type==T.default.CUSTOM_OBJECT_TYPE&&null!=t.objectType?this.objectAnimations=t.objectType.animations:this.objectAnimations=[]},e.prototype.updateFpsLimit=function(){this.fpsLimit=this.gameDefinition.getFpsLimit(),null!=this.fpsLimit?this.minDelta=1e3/this.fpsLimit:this.minDelta=null,this.deltaCredit=0},e.prototype.initGame=function(e){this.autoSave(),null!=this.actionTemplate&&this.actionTemplate.game.stopAllAudios();var t=new u.default;null!=this.gameParamsJson&&(t=this.gameParamsJson);var i=new n.default(null,t,this.ctx,this.resourcesBaseUrl,this.isExported,e);i.game.updateProcessEventsSourceCode(),this.actionTemplate=i,this.gameDefinition=t,this.updateFpsLimit(),this.isPlayingGame=!0,this.clearDebugInfo(),1==this.gameDefinition.hasFixedDeltaTime?this.gameLoopBuilder.startLoopFixedDelta():this.gameDefinition.framerateType==re.default.UNLIMITED?this.gameLoopBuilder.startLoopUnlimitedFps():this.gameLoopBuilder.startLoopLimitedFps()},e.prototype.clearDebugInfo=function(){this.debugInfo.hasError=!1,this.debugInfo.currentBlockUid=null,this.debugInfo.errorMessage=null},e.prototype.setIsExported=function(e){this.isExported=e},e.prototype.setIsAutoSaveEnabled=function(e){this.isAutoSaveEnabled=e},e.prototype.playCurrentLevel=function(){this.initGame(this.levelController.currentLevelIndex)},e.prototype.playLevel=function(e){this.initGame(e)},e.prototype.editGame=function(){null!=this.actionTemplate&&this.actionTemplate.game.stopAllAudios(),this.actionTemplate=null,this.isPlayingGame=!1,this.gameLoopBuilder.startLoopLevelEditor()},e.prototype.pauseGame=function(){this.actionTemplate.play.pause()},e.prototype.unpauseGame=function(){this.actionTemplate.play.unpause()},e.prototype.removeEventListeners=function(){document.removeEventListener("keydown",this.keydown,!1),document.removeEventListener("keyup",this.keyup,!1)},e.prototype.listImageIds=function(){return this.util.listImageIds(this.gameParamsJson)},e.prototype.listLibraryAudioPaths=function(){return this.util.listAudios(this.gameParamsJson,L.default.LIBRARY)},e.prototype.listCustomAudioUids=function(){return this.util.listAudios(this.gameParamsJson,L.default.UPLOAD)},e}();t.ActionTemplateController=le},function(e,t,i){"use strict";t.__esModule=!0;var n=i(64),o=i(67),r=i(68),a=i(0),s=i(75),l=function(){function e(e,t,i,r,l,u){this.mousePos=null,this.isLoadingComplete=!1,this.initialLevel=null,this.loadingStartTime=null,this.minimumSplashScrenTime=2e3,this.elapsedTimeRealWorld=0,this.isExported=l,this.initialLevel=u,this.loadingStartTime=performance.now();var d=this;this.game=new n.default(t,i,r,l),this.game.loadResources((function(){d.isLoadingComplete=!0})),this.ctx=i,this.util=new a.default,this.gameRenderer=new o.default,this.splashScreenRenderer=new s.default}return e.prototype.startPlay=function(){this.play=new r.default(this.game),null!=this.initialLevel&&this.play.goToLevelIndex(this.initialLevel),this.elapsedTimeRealWorld=0,window.document.getElementById("myCanvas").style.cursor="default"},e.prototype.getElapsedTimeRealWorld=function(){return this.elapsedTimeRealWorld},e.prototype.getScore=function(){return null==this.play?0:this.play.score},e.prototype.setMousePos=function(e){if(null==this.play)return this.mousePos=e,void(this.splashScreenRenderer.mousePos=e);this.play.mousePos=e},e.prototype.updateAccelerometer=function(e,t,i){null!=this.play&&(this.play.accelerometer.x=e,this.play.accelerometer.y=t,this.play.accelerometer.z=i)},e.prototype.step=function(e){this.play.clearCustomElementsToDraw(),this.play.updateDelta(e,e),this.gameRenderer.render(this.play.level)},e.prototype.loop=function(e,t){(this.elapsedTimeRealWorld+=t,null!=this.play)?this.play.paused||(this.play.clearCustomElementsToDraw(),this.play.updateDelta(e,t),this.gameRenderer.render(this.play.level)):(this.splashScreenRenderer.renderLoading(this.game),this.isLoadingComplete&&(this.game.isGameExported?performance.now()-this.loadingStartTime>this.minimumSplashScrenTime&&this.startPlay():this.startPlay()))},e.prototype.startNewGame=function(){this.play=new r.default(this.game)},e.prototype.keydown=function(e){if(null!=this.play){var t=this.play;e.repeat||t.registerKeyDown(e.code)}},e.prototype.keyup=function(e){null!=this.play&&this.play.registerKeyUp(e.code)},e.prototype.click=function(){},e.prototype.mousemove=function(e){if(this.setMousePos(e),null==this.play){var t=this.splashScreenRenderer.isInsideLogo(e.x,e.y);window.document.getElementById("myCanvas").style.cursor=t?"pointer":"default"}},e.prototype.mousedown=function(e){null!=this.play?this.play.mousedown(e):this.splashScreenRenderer.isInsideLogo(this.mousePos.x,this.mousePos.y)&&window.open("https://www.easygamemaker.com")},e.prototype.mouseup=function(e){null!=this.play&&this.play.mouseup(e)},e}();t.default=l},function(e,t,i){"use strict";t.__esModule=!0;var n=i(65),o=i(0),r=i(23),a=i(44),s=function(){function e(e,t,i,n){this.images=new Map,this.numImagesLoaded=0,this.numImages=null,this.resourcesBaseUrl=null,this.imageIds=null,this.audios=new Map,this.numAudiosLoaded=0,this.numAudios=null,this.audioPathsArray=null,this.audioUidsArray=null,this.levelScriptsOnLevelStart=new Map,this.levelScriptsOnAnimationFrame=new Map,this.objectScriptsOnCreate=new Map,this.objectScriptsOnAnimationFrame=new Map,this.visualScriptFunctions=new Map,this.util=new o.default,this.ctx=t,this.gameDefinition=e,this.resourcesBaseUrl=i,this.isGameExported=n}return e.prototype.updateProcessEventsSourceCode=function(){this.levelScriptsOnLevelStart=new Map,this.levelScriptsOnAnimationFrame=new Map,this.visualScriptFunctions=new Map;for(var e=new a.default,t=!this.isGameExported,i=this.gameDefinition.levels,n=0;n<i.length;n++){var o=i[n],r=o.scriptOnAnimationFrame,s=e.generateVisualScriptSourceCode(r,this.gameDefinition,0,t),l=new Function("play",s);this.levelScriptsOnAnimationFrame.set(o.uid,l);var u=o.scriptOnLevelStart,d=e.generateVisualScriptSourceCode(u,this.gameDefinition,0,t),c=new Function("play",d);this.levelScriptsOnLevelStart.set(o.uid,c)}for(n=0;n<this.gameDefinition.visualScriptFunctions.length;n++){var h=this.gameDefinition.visualScriptFunctions[n],p=(s=e.generateVisualScriptSourceCode(h,this.gameDefinition,0,t),new Function("play",s));this.visualScriptFunctions.set(h.uid,p)}},e.prototype.loadResources=function(e){var t=this;this.imageIds=this.util.listImageIds(this.gameDefinition),this.numImages=this.imageIds.size;var i=this.util.listAudios(this.gameDefinition,r.default.LIBRARY);this.audioPathsArray=Array.from(i);var n=this.util.listAudios(this.gameDefinition,r.default.UPLOAD);this.audioUidsArray=Array.from(n),this.numAudios=this.audioPathsArray.length+this.audioUidsArray.length;this.loadImages((function(){t.loadAudios(e)}))},e.prototype.loadImages=function(e){var t=this;if(0!=this.imageIds.size)for(var i=Array.from(this.imageIds),n=0;n<i.length;n++){var o=i[n],r=new Image;if(r.onload=function(){t.numImagesLoaded++,t.isImageLoadingCompleted()&&e()},o.startsWith("custom:"))if(this.isGameExported){a=o.substring(7);r.src=this.resourcesBaseUrl+"images/custom/"+a+".png"}else{var a=o.substring(7),s=this.util.findElementByUid(this.gameDefinition.customImages,a);r.src=s.imageData}else r.src=this.resourcesBaseUrl+o;this.images.set(o,r)}else e()},e.prototype.getImage=function(e){return this.images.get(e)},e.prototype.isImageLoadingCompleted=function(){return this.numImagesLoaded==this.numImages},e.prototype.isAudioLoadingCompleted=function(){return this.numAudiosLoaded==this.numAudios},e.prototype.isLoadingCompleted=function(){return this.isImageLoadingCompleted()&&this.isAudioLoadingCompleted()},e.prototype.loadAudios=function(e){if(0!=this.numAudios){for(var t=0;t<this.audioPathsArray.length;t++){var i=this.audioPathsArray[t];this.loadLibraryAudio(i,e)}for(t=0;t<this.audioUidsArray.length;t++){var n=this.audioUidsArray[t];this.loadCustomAudio(n,e)}}else e()},e.prototype.updateNumAudiosLoaded=function(e,t){if("loaded"==e.state())this.numAudiosLoaded++,this.isAudioLoadingCompleted()&&t();else{var i=this;e.once("load",(function(){i.numAudiosLoaded++,i.isAudioLoadingCompleted()&&t()}))}},e.prototype.loadLibraryAudio=function(e,t){var i=this.resourcesBaseUrl+e,o=new n.Howl({src:[i]});this.audios.set(e,o),this.updateNumAudiosLoaded(o,t)},e.prototype.loadCustomAudio=function(e,t){if(this.isGameExported){var i="audio/custom/"+e+".mp3",o=this.resourcesBaseUrl+i;a=new n.Howl({src:[o]});this.audios.set(e,a),this.updateNumAudiosLoaded(a,t)}else{var r=this.util.findElementByUid(this.gameDefinition.customAudios,e),a=new n.Howl({src:[r.audioData]});this.audios.set(r.uid,a),this.updateNumAudiosLoaded(a,t)}},e.prototype.playCustomAudio=function(e,t){var i=this.audios.get(e);if(null!=i){var n=i.play();i.volume(.01*t,n)}else console.log("Custom audio not found: "+e)},e.prototype.playLibraryAudio=function(e,t){var i=this.audios.get(e);if(null!=i){var n=i.play();i.volume(.01*t,n)}else console.log("Library audio not found: "+e)},e.prototype.stopAudio=function(e){var t=this.audios.get(e);null!=t?t.stop():console.log("Library key not found: "+e)},e.prototype.stopAllAudios=function(){for(var e=this.audios.keys(),t=Array.from(e),i=0;i<t.length;i++){var n=t[i];this.stopAudio(n)}},e}();t.default=s},function(e,t,i){(function(i){var n;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||r;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var n=t._howls[i]._getSoundIds(),o=0;o<n.length;o++){var a=t._howls[i]._soundById(n[o]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||r;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,r.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var n=t._howls[i]._getSoundIds(),o=0;o<n.length;o++){var a=t._howls[i]._soundById(n[o]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||r,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||r,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator?e._navigator.userAgent:"",o=n.match(/OPR\/([0-6].)/g),a=o&&parseInt(o[0].split("/")[1],10)<33,s=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),l=n.match(/Version\/(.*?) /),u=s&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(a||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(i){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(i){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var r=e._howls[o]._getSoundIds(),a=0;a<r.length;a++){var s=e._howls[o]._soundById(r[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var i=0;i<e._howls.length;i++)e._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||r;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&r.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&r.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var r=new o,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return r.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=r.usingWebAudio&&!t._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(r.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var i,n;if(this._format&&this._format[t])i=this._format[t];else{if("string"!=typeof(n=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(n))||(i=/\.([^.]+)$/.exec(n.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&r.codecs(i)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var i=this,n=null;if("number"==typeof e)n=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var o=0,a=0;a<i._sounds.length;a++)i._sounds[a]._paused&&!i._sounds[a]._ended&&(o++,n=i._sounds[a]._id);1===o?e=null:n=null}}var s=n?i._soundById(n):i._inactiveSound();if(!s)return null;if(n&&!e&&(e=s._sprite||"__default"),"loaded"!==i._state){s._sprite=e,s._ended=!1;var l=s._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(n&&!s._paused)return t||i._loadQueue("play"),s._id;i._webAudio&&r._autoResume();var u=Math.max(0,s._seek>0?s._seek:i._sprite[e][0]/1e3),d=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-u),c=1e3*d/Math.abs(s._rate),h=i._sprite[e][0]/1e3,p=(i._sprite[e][0]+i._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var m=function(){s._paused=!1,s._seek=u,s._start=h,s._stop=p,s._loop=!(!s._loop&&!i._sprite[e][2])};if(!(u>=p)){var f=s._node;if(i._webAudio){var y=function(){i._playLock=!1,m(),i._refreshBuffer(s);var e=s._muted||i._muted?0:s._volume;f.gain.setValueAtTime(e,r.ctx.currentTime),s._playStart=r.ctx.currentTime,void 0===f.bufferSource.start?s._loop?f.bufferSource.noteGrainOn(0,u,86400):f.bufferSource.noteGrainOn(0,u,d):s._loop?f.bufferSource.start(0,u,86400):f.bufferSource.start(0,u,d),c!==1/0&&(i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),c)),t||setTimeout((function(){i._emit("play",s._id),i._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?y():(i._playLock=!0,i.once("resume",y),i._clearTimer(s._id))}else{var v=function(){f.currentTime=u,f.muted=s._muted||i._muted||r._muted||f.muted,f.volume=s._volume*r.volume(),f.playbackRate=s._rate;try{var n=f.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,m(),n.then((function(){i._playLock=!1,f._unlocked=!0,t?i._loadQueue():i._emit("play",s._id)})).catch((function(){i._playLock=!1,i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(i._playLock=!1,m(),i._emit("play",s._id)),f.playbackRate=s._rate,f.paused)return void i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),c):(i._endTimers[s._id]=function(){i._ended(s),f.removeEventListener("ended",i._endTimers[s._id],!1)},f.addEventListener("ended",i._endTimers[s._id],!1))}catch(e){i._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===f.src&&(f.src=i._src,f.load());var E=window&&window.ejecta||!f.readyState&&r._navigator.isCocoonJS;if(f.readyState>=3||E)v();else{i._playLock=!0,i._state="loading";var b=function(){i._state="loaded",v(),f.removeEventListener(r._canPlayEvent,b,!1)};f.addEventListener(r._canPlayEvent,b,!1),i._clearTimer(s._id)}}return s._id}i._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),n=0;n<i.length;n++){t._clearTimer(i[n]);var o=t._soundById(i[n]);if(o&&!o._paused&&(o._seek=t.seek(i[n]),o._rateSeek=0,o._paused=!0,t._stopFade(i[n]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var n=i._getSoundIds(e),o=0;o<n.length;o++){i._clearTimer(n[o]);var r=i._soundById(n[o]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[o]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&i._clearSound(r._node))),t||i._emit("stop",r._id))}return i},mute:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(void 0===t){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var n=i._getSoundIds(t),o=0;o<n.length;o++){var a=i._soundById(n[o]);a&&(a._muted=e,a._interval&&i._stopFade(a._id),i._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,r.ctx.currentTime):a._node&&(a._node.muted=!!r._muted||e),i._emit("mute",a._id))}return i},volume:function(){var e,t,i,n=this,o=arguments;if(0===o.length)return n._volume;if(1===o.length||2===o.length&&void 0===o[1]){var a=n._getSoundIds(),s=a.indexOf(o[0]);s>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(i=t?n._soundById(t):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,o)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var l=0;l<t.length;l++)(i=n._soundById(t[l]))&&(i._volume=e,o[2]||n._stopFade(t[l]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e,r.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=e*r.volume()),n._emit("volume",i._id));return n},fade:function(e,t,i,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,i,n)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),i=parseFloat(i),o.volume(e,n);for(var a=o._getSoundIds(n),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if(n||o._stopFade(a[s]),o._webAudio&&!l._muted){var u=r.ctx.currentTime,d=u+i/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,d)}o._startFadeInterval(l,e,t,i,a[s],void 0===n)}}return o},_startFadeInterval:function(e,t,i,n,o,r){var a=this,s=t,l=i-t,u=Math.abs(l/.01),d=Math.max(4,u>0?n/u:n),c=Date.now();e._fadeTo=i,e._interval=setInterval((function(){var o=(Date.now()-c)/n;c=Date.now(),s+=l*o,s=Math.round(100*s)/100,s=l<0?Math.max(i,s):Math.min(i,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),r&&(a._volume=s),(i<t&&s<=i||i>t&&s>=i)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(i,e._id),a._emit("fade",e._id))}),d)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,i,n=this,o=arguments;if(0===o.length)return n._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(i=n._soundById(parseInt(o[0],10)))&&i._loop;e=o[0],n._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var r=n._getSoundIds(t),a=0;a<r.length;a++)(i=n._soundById(r[a]))&&(i._loop=e,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(r[a])&&(n.pause(r[a],!0),n.play(r[a],!0)))));return n},rate:function(){var e,t,i,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var a=n._getSoundIds(),s=a.indexOf(o[0]);s>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("number"!=typeof e)return(i=n._soundById(t))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,o)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var l=0;l<t.length;l++)if(i=n._soundById(t[l])){n.playing(t[l])&&(i._rateSeek=n.seek(t[l]),i._playStart=n._webAudio?r.ctx.currentTime:i._playStart),i._rate=e,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,r.ctx.currentTime):i._node&&(i._node.playbackRate=e);var u=n.seek(t[l]),d=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-u,c=1e3*d/Math.abs(i._rate);!n._endTimers[t[l]]&&i._paused||(n._clearTimer(t[l]),n._endTimers[t[l]]=setTimeout(n._ended.bind(n,i),c)),n._emit("rate",i._id)}return n},seek:function(){var e,t,i=this,n=arguments;if(0===n.length)i._sounds.length&&(t=i._sounds[0]._id);else if(1===n.length){var o=i._getSoundIds(),a=o.indexOf(n[0]);a>=0?t=parseInt(n[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(n[0]))}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var s=i._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var l=i.playing(t)?r.ctx.currentTime-s._playStart:0,u=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(u+l*Math.abs(s._rate))}return s._node.currentTime}var d=i.playing(t);d&&i.pause(t,!0),s._seek=e,s._ended=!1,i._clearTimer(t),i._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var c=function(){d&&i.play(t,!0),i._emit("seek",t)};if(d&&!i._webAudio){var h=function(){i._playLock?setTimeout(h,0):c()};setTimeout(h,0)}else c()}return i},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(e){var t=this._duration,i=this._soundById(e);return i&&(t=this._sprite[i._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(e._clearSound(t[i]._node),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(r._canPlayEvent,t[i]._loadFn,!1),t[i]._node.removeEventListener("ended",t[i]._endFn,!1),r._releaseHtml5Audio(t[i]._node)),delete t[i]._node,e._clearTimer(t[i]._id);var n=r._howls.indexOf(e);n>=0&&r._howls.splice(n,1);var o=!0;for(i=0;i<r._howls.length;i++)if(r._howls[i]._src===e._src||e._src.indexOf(r._howls[i]._src)>=0){o=!1;break}return l&&o&&delete l[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,n){var o=this["_on"+e];return"function"==typeof t&&o.push(n?{id:i,fn:t,once:n}:{id:i,fn:t}),this},off:function(e,t,i){var n=this["_on"+e],o=0;if("number"==typeof t&&(i=t,t=null),t||i)for(o=0;o<n.length;o++){var r=i===n[o].id;if(t===n[o].fn&&r||!t&&r){n.splice(o,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(this[a[o]])&&(this[a[o]]=[])}return this},once:function(e,t,i){return this.on(e,t,i,1),this},_emit:function(e,t,i){for(var n=this["_on"+e],o=n.length-1;o>=0;o--)n[o].id&&n[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(this,n[o].fn),0),n[o].once&&this.off(e,n[o].fn,n[o].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var i=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&i&&this.stop(e._id,!0).play(e._id),this._webAudio&&i){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var n=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),n)}return this._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),r._autoSuspend()),this._webAudio||i||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,i=0;if(!(this._sounds.length<e)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&t++;for(i=this._sounds.length-1;i>=0;i--){if(t<=e)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],i=0;i<this._sounds.length;i++)t.push(this._sounds[i]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),this},_cleanBuffer:function(e){var t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=r._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),this._node.gain.setValueAtTime(t,r.ctx.currentTime),this._node.paused=!0,this._node.connect(r.masterGain)):r.noAudio||(this._node=r._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(r._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*r.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(r._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),n=new Uint8Array(i.length),o=0;o<i.length;++o)n[o]=i.charCodeAt(o);c(n.buffer,e)}else{var r=new XMLHttpRequest;r.open(e._xhr.method,t,!0),r.withCredentials=e._xhr.withCredentials,r.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){r.setRequestHeader(t,e._xhr.headers[t])})),r.onload=function(){var t=(r.status+"")[0];"0"===t||"2"===t||"3"===t?c(r.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},d(r)}},d=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var i=function(){t._emit("loaderror",null,"Decoding audio data failed.")},n=function(e){e&&t._sounds.length>0?(l[t._src]=e,h(t,e)):i()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(e).then(n).catch(i):r.ctx.decodeAudioData(e,n,i)},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(e){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),t=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var n=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!n&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(n=function(){return{Howler:r,Howl:a}}.apply(t,[]))||(e.exports=n),t.Howler=r,t.Howl=a,void 0!==i?(i.HowlerGlobal=o,i.Howler=r,i.Howl=a,i.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=r,window.Howl=a,window.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,i){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof e?this._pos:(this._pos=[e,t,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,i,n,o,r){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,o="number"!=typeof o?a[4]:o,r="number"!=typeof r?a[5]:r,"number"!=typeof e?a:(this._orientation=[e,t,i,n,o,r],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,i,n,o,r),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var r=n._getSoundIds(i),a=0;a<r.length;a++){var s=n._soundById(r[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,o),"spatial"===o?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",s._id)}}return n},Howl.prototype.pos=function(e,i,n,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(e,i,n,o)}}),r;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===o){if("number"!=typeof e)return r._pos;r._pos=[e,i,n]}for(var a=r._getSoundIds(o),s=0;s<a.length;s++){var l=r._soundById(a[s]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,i,n],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(e,i,n)),r._emit("pos",l._id)}}return r},Howl.prototype.orientation=function(e,i,n,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(e,i,n,o)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,n="number"!=typeof n?r._orientation[2]:n,void 0===o){if("number"!=typeof e)return r._orientation;r._orientation=[e,i,n]}for(var a=r._getSoundIds(o),s=0;s<a.length;s++){var l=r._soundById(a[s]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,i,n],l._node&&(l._panner||(l._pos||(l._pos=r._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(e,i,n)),r._emit("orientation",l._id)}}return r},Howl.prototype.pannerAttr=function(){var e,i,n,o=this,r=arguments;if(!o._webAudio)return o;if(0===r.length)return o._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(n=o._soundById(parseInt(r[0],10)))?n._pannerAttr:o._pannerAttr;e=r[0],void 0===i&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===r.length&&(e=r[0],i=parseInt(r[1],10));for(var a=o._getSoundIds(i),s=0;s<a.length;s++)if(n=o._soundById(a[s])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var u=n._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(n._pos||(n._pos=o._pos||[0,0,-.5]),t(n,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,i(40))},function(e,t,i){"use strict";t.__esModule=!0;var n=i(24),o=i(47),r=i(0),a=i(9),s=function(){function e(){this.util=new r.default,this.environment=new o.default,this.regexpEngineVersion=new RegExp("{engineVersion}","g"),this.regexpFps=new RegExp("{fps}","g"),this.regexpScore=new RegExp("{score}","g"),this.regexpRandom=new RegExp("{random}","g"),this.regexpAccelerometerX=new RegExp("{accelerometer.x}","g"),this.regexpAccelerometerY=new RegExp("{accelerometer.y}","g"),this.regexpAccelerometerZ=new RegExp("{accelerometer.z}","g"),this.regexpLastTouchX=new RegExp("{lastTouchX}","g"),this.regexpLastTouchY=new RegExp("{lastTouchY}","g"),this.regexpMousePosX=new RegExp("{mousePosX}","g"),this.regexpMousePosY=new RegExp("{mousePosY}","g"),this.regexpScreenX=new RegExp("{screenX}","g"),this.regexpScreenY=new RegExp("{screenY}","g"),this.regexpLoopCurrentIndex=new RegExp("{loop.currentIndex}","g"),this.regexpLevelName=new RegExp("{levelDefinition.name}","g"),this.regexpCurrentLevelFrame=new RegExp("{level.currentFrame}","g"),this.regexLocalStorageVariable=new RegExp("{localStorage.\\w+}"),this.regexDistanceLoopObjects=new RegExp("{distanceLoopObjects\\(\\w+,\\w+\\)}"),this.regexMap=new Map}return e.prototype.findRegexByString=function(e){var t=this.regexMap.get(e);return null==t&&(t=new RegExp(e,"g"),this.regexMap.set(e,t)),t},e.prototype.initObjectVariablesRegexp=function(e){},e.prototype.evaluateExpression=function(e,t,i){return e=this.replaceVariables(e,t,i)},e.prototype.replaceVariables=function(e,t,i){return e=e.replace(this.regexpEngineVersion,this.environment.templateVersion)},e.prototype.replaceLevelArrayVariables=function(e,t,i){for(var n=t.level.levelDefinition.levelVariables,o=0;o<n.length;o++)if(n[o].type==a.default.ARRAY){var r=n[o].name;e=this.replaceLevelArrayVariable(e,t,i,r)}return e},e.prototype.replaceLevelArrayVariable=function(e,t,i,n){for(var o=t.level.variables.get(n),r=new RegExp("{levelVariable."+n+"\\[\\d+\\]}"),a=r.exec(e);a;){var s=new RegExp("\\d+").exec(a[0]),l=parseInt(s[0]);e=e.replace(r,o[l]),a=r.exec(e)}return e},e.prototype.replaceLocalStorageVariables=function(e,t,i){for(var n=this.regexLocalStorageVariable.exec(e);n;){var o=n[0].substring(14,n[0].length-1);e=e.replace(this.regexLocalStorageVariable,localStorage.getItem(o)),n=this.regexLocalStorageVariable.exec(e)}return e},e.prototype.replaceDistanceLoopObjects=function(e,t,i){for(var o=this.regexDistanceLoopObjects.exec(e);o;){var r=o[0].substring(21,o[0].length-2).split(","),a=r[0],s=r[1],l=i.variables.get(a),u=i.variables.get(s),d=0;l instanceof n.default&&u instanceof n.default&&(d=this.util.distanceObjects(l,u)),e=e.replace(this.regexDistanceLoopObjects,"("+d+")"),o=this.regexDistanceLoopObjects.exec(e)}return e},e}();t.default=s},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(24),r=i(50),a=i(0),s=i(26),l=i(14),u=i(15),d=i(27),c=i(51),h=function(){function e(){this.expressionEvaluator=new r.default,this.progressBarColor=new n.default(32,32,128,100),this.util=new a.default,this.renderUtil=new d.default,this.elementsToDraw=new Map,this.sortFunction=function(e,t){return e-t}}return e.prototype.drawElements=function(e){var t=new Array;this.elementsToDraw.forEach((function(e,i){t.push(i)})),t.sort(this.sortFunction);for(var i=0;i<t.length;i++){var n=t[i];this.drawElementsByZIndex(n,e)}},e.prototype.drawElementsByZIndex=function(e,t){var i=this.elementsToDraw.get(e);if(null!=i)for(var n=0;n<i.length;n++){var r=i[n];if(r instanceof o.default){var a=r;this.drawCustomObject(a,t)}else if(r instanceof c.default){var s=r;this.drawTextInstance(s,t)}else this.drawCustomElement(r,t)}},e.prototype.addElementToDraw=function(e,t){var i=this.elementsToDraw.get(t);null==i&&(this.elementsToDraw.set(t,new Array),i=this.elementsToDraw.get(t)),i.push(e)},e.prototype.drawTextInstance=function(e,t){var i=this.buildFillStyleFromColor(e.color),n=e.fontSize+"px "+e.fontFamily,o=t.play.game.ctx;o.globalAlpha=e.alpha,0!=e.angle&&this.rotateCanvasAt(-e.angle,t.play.game,e.x,e.y),this.util.drawText(t.play.game.ctx,e.text,e.x,e.y,n,i,e.align,"middle"),0!=e.angle&&this.rotateCanvasAt(e.angle,t.play.game,e.x,e.y),o.globalAlpha=1},e.prototype.addTextsToDraw=function(e){var t=e.textArray;if(null!=t)for(var i=0;i<t.length;i++){var n=t[i];this.addElementToDraw(n,n.zIndex)}},e.prototype.render=function(e){this.elementsToDraw=new Map;var t=e.play,i=t.game;t.game.ctx.clearRect(0,0,i.gameDefinition.canvasWidth,i.gameDefinition.canvasHeight),this.rotateCanvas(e.canvasAngle,i),this.drawBackground(e);var n=this;t.level.customObjectsMap.forEach((function(e,i){for(var o=t.level.customObjectsMap.get(i),r=0;r<o.length;r++){var a=o[r];n.addElementToDraw(a,a.zIndex)}})),this.addTextsToDraw(e),this.addCustomElementsToDraw(t),this.addConstraintsToDraw(e),this.drawElements(e),this.rotateCanvas(-e.canvasAngle,i),this.drawButtons(e)},e.prototype.drawButtons=function(e){for(var t=e.play.game.ctx,i=0;i<e.buttonArray.length;i++){var n=e.buttonArray[i];this.drawButton(t,n)}},e.prototype.rotateCanvas=function(e,t){var i=t.ctx;i.translate(t.gameDefinition.canvasWidth/2,t.gameDefinition.canvasHeight/2),i.rotate(e),i.translate(-t.gameDefinition.canvasWidth/2,-t.gameDefinition.canvasHeight/2)},e.prototype.rotateCanvasAt=function(e,t,i,n){var o=t.ctx;o.translate(i,n),o.rotate(e),o.translate(-i,-n)},e.prototype.renderInfo=function(e){var t=e.play,i=t.game.ctx;i.fillStyle="#000000",t.gameOver?(i.font="30px Arial",i.fillText("GAME OVER",t.game.gameDefinition.canvasWidth/2-100,t.game.gameDefinition.canvasHeight/2-60)):t.paused&&(i.font="30px Arial",i.fillText("PAUSED",t.game.gameDefinition.canvasWidth/2-100,t.game.gameDefinition.canvasHeight/2-60)),i.font="10px Arial"},e.prototype.drawPercentageBar=function(e,t,i,n,o,r,a,s,l,u,d,c){var h=this.buildFillStyleFromColor(u),p=this.buildFillStyleFromColor(d),m=this.buildFillStyleFromColor(c);if(this.drawBar(e,t-l,i-l,n+2*l,o+2*l,m),this.drawBar(e,t,i,n,o,p),this.drawBar(e,t,i,n*r/a,o,h),s)for(var f=n/a,y=1;y<a;y++)this.drawBar(e,Math.round(t+f*y-l/2),i,l,o,m)},e.prototype.drawBar=function(e,t,i,n,o,r){e.fillStyle=r,e.beginPath(),e.rect(t,i,n,o),e.closePath(),e.fill()},e.prototype.buildFillStyleFromColor=function(e){return this.util.buildFillStyleFromColor(e)},e.prototype.drawBackground=function(e){var t=e.play;if(e.levelDefinition.backgroundType==u.default.SOLID_COLOR){var i=e.levelDefinition.backgroundColor;t.game.ctx.fillStyle=this.buildFillStyleFromColor(i),t.game.ctx.fillRect(0,0,t.game.gameDefinition.canvasWidth,t.game.gameDefinition.canvasHeight)}else if(e.levelDefinition.backgroundType==u.default.IMAGE){var n=t.game.getImage(e.levelDefinition.backgroundImage.imageId),o=e.levelDefinition.backgroundImageWidth||64,r=e.levelDefinition.backgroundImageHeight||64,a=-t.screenX%o,s=-t.screenY%r;s>0&&(s-=r),a>0&&(a-=o);for(var l=this.calculateSafetyMarginX(e),d=this.calculateSafetyMarginY(e),c=a-=l,h=s-=d;h<t.game.gameDefinition.canvasHeight/t.zoom+r+d;){for(;c<t.game.gameDefinition.canvasWidth/t.zoom+o+l;)t.game.ctx.drawImage(n,c*t.zoom,h*t.zoom,o*t.zoom+1,r*t.zoom+1),c+=o;c=a,h+=r}}},e.prototype.calculateSafetyMarginX=function(e){var t=e.play,i=Math.sqrt(t.game.gameDefinition.canvasWidth*t.game.gameDefinition.canvasWidth+t.game.gameDefinition.canvasHeight*t.game.gameDefinition.canvasHeight)/2-t.game.gameDefinition.canvasWidth/2;return i=(i/=t.zoom)-i%e.levelDefinition.backgroundImageWidth+e.levelDefinition.backgroundImageWidth},e.prototype.calculateSafetyMarginY=function(e){var t=e.play,i=Math.sqrt(t.game.gameDefinition.canvasWidth*t.game.gameDefinition.canvasWidth+t.game.gameDefinition.canvasHeight*t.game.gameDefinition.canvasHeight)/2-t.game.gameDefinition.canvasHeight/2;return i=(i/=t.zoom)-i%e.levelDefinition.backgroundImageHeight+e.levelDefinition.backgroundImageHeight},e.prototype.addCustomElementsToDraw=function(e){for(var t=0;t<e.customElementsToDraw.length;t++){var i=e.customElementsToDraw[t];this.addElementToDraw(i,i.zIndex)}},e.prototype.drawCustomElement=function(e,t){var i=t.play.game.ctx;if(i.save(),i.globalAlpha=e.alpha||1,"LINE"==e.type)i.strokeStyle=this.buildFillStyleFromColor(e.color),i.lineWidth=e.lineWidth,i.beginPath(),i.moveTo(e.x1,e.y1),i.lineTo(e.x2,e.y2),i.stroke();else if("RECT"==e.type)i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.closePath(),"FILL"==e.drawType?(i.fillStyle=this.buildFillStyleFromColor(e.color),i.fill()):"STROKE"==e.drawType?(i.strokeStyle=this.buildFillStyleFromColor(e.borderColor),i.lineWidth=e.borderSize,i.stroke()):"FILL_AND_STROKE"==e.drawType&&(i.fillStyle=this.buildFillStyleFromColor(e.color),i.strokeStyle=this.buildFillStyleFromColor(e.borderColor),i.lineWidth=e.borderSize,i.fill(),i.stroke());else if("CIRCLE"==e.type)i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI),i.closePath(),"FILL"==e.drawType?(i.fillStyle=this.buildFillStyleFromColor(e.color),i.fill()):"STROKE"==e.drawType?(i.strokeStyle=this.buildFillStyleFromColor(e.borderColor),i.lineWidth=e.borderSize,i.stroke()):"FILL_AND_STROKE"==e.drawType&&(i.fillStyle=this.buildFillStyleFromColor(e.color),i.strokeStyle=this.buildFillStyleFromColor(e.borderColor),i.lineWidth=e.borderSize,i.fill(),i.stroke());else if("ARC"==e.type)i.beginPath(),i.arc(e.x,e.y,e.radius,e.startAngle,e.endAngle),i.lineTo(e.x,e.y),i.closePath(),"FILL"==e.drawType?(i.fillStyle=this.buildFillStyleFromColor(e.color),i.fill()):"STROKE"==e.drawType?(i.strokeStyle=this.buildFillStyleFromColor(e.borderColor),i.lineWidth=e.borderSize,i.stroke()):"FILL_AND_STROKE"==e.drawType&&(i.fillStyle=this.buildFillStyleFromColor(e.color),i.strokeStyle=this.buildFillStyleFromColor(e.borderColor),i.lineWidth=e.borderSize,i.fill(),i.stroke());else if("TEXT"==e.type)i.font=e.fontSize+"px "+e.fontFamily,i.fillStyle=this.buildFillStyleFromColor(e.color),i.textAlign=e.textAlign,i.fillText(e.text,e.x,e.y);else if("IMAGE"==e.type){var n=t.play.game.getImage(e.imageId);this.rotateCanvasAt(-e.rotation,t.play.game,e.x+e.width/2,e.y+e.height/2),i.drawImage(n,e.x,e.y,e.width,e.height),this.rotateCanvasAt(e.rotation,t.play.game,e.x+e.width/2,e.y+e.height/2)}else"PERCENTAGE_BAR"==e.type&&this.drawPercentageBar(i,e.x,e.y,e.width,e.height,e.value,e.maxValue,e.split,e.borderSize,e.color,e.backgroundColor,e.borderColor);i.restore()},e.prototype.drawCustomObject=function(e,t){var i=t.play.game.ctx,n=t.play,o=n.zoom;if(i.save(),i.globalAlpha=e.alpha,this.rotateCanvasAt(e.imageAngle+e.angle,n.game,e.x*o-n.screenX*o,e.y*o-n.screenY*o),e.type.renderType==l.default.IMAGE){var r=e.getCurrentImage();i.drawImage(r,e.x*o-n.screenX*o-e.halfWidth*o,e.y*o-n.screenY*o-e.halfHeight*o,2*e.halfWidth*o,2*e.halfHeight*o)}else if(e.type.renderType==l.default.CIRCLE){var a=e.halfWidth,u=e.halfHeight;e.type.drawType!=s.default.STROKE&&e.type.drawType!=s.default.FILL_AND_STROKE||(a-=e.type.borderSize/2,u-=e.type.borderSize/2),i.beginPath(),i.ellipse(e.x*o-n.screenX*o,e.y*o-n.screenY*o,a*o,u*o,0,0,2*Math.PI),i.closePath(),e.type.drawType==s.default.FILL?(i.fillStyle=this.buildFillStyleFromColor(e.type.color),i.fill()):e.type.drawType==s.default.STROKE?(i.strokeStyle=this.buildFillStyleFromColor(e.type.borderColor),i.lineWidth=e.type.borderSize*o,i.stroke()):e.type.drawType==s.default.FILL_AND_STROKE&&(i.fillStyle=this.buildFillStyleFromColor(e.type.color),i.strokeStyle=this.buildFillStyleFromColor(e.type.borderColor),i.lineWidth=e.type.borderSize*o,i.fill(),i.stroke())}else if(e.type.renderType==l.default.RECTANGLE){a=e.halfWidth,u=e.halfHeight;e.type.drawType!=s.default.STROKE&&e.type.drawType!=s.default.FILL_AND_STROKE||(a-=e.type.borderSize/2,u-=e.type.borderSize/2),i.beginPath(),i.rect(e.x*o-n.screenX*o-a*o,e.y*o-n.screenY*o-u*o,2*a*o,2*u*o),i.closePath(),e.type.drawType==s.default.FILL?(i.fillStyle=this.buildFillStyleFromColor(e.type.color),i.fill()):e.type.drawType==s.default.STROKE?(i.strokeStyle=this.buildFillStyleFromColor(e.type.borderColor),i.lineWidth=e.type.borderSize*o,i.stroke()):e.type.drawType==s.default.FILL_AND_STROKE&&(i.fillStyle=this.buildFillStyleFromColor(e.type.color),i.strokeStyle=this.buildFillStyleFromColor(e.type.borderColor),i.lineWidth=e.type.borderSize*o,i.fill(),i.stroke())}this.rotateCanvasAt(-e.imageAngle,n.game,e.x*o-n.screenX*o,e.y*o-n.screenY*o),i.restore()},e.prototype.drawButton=function(e,t){e.fillStyle=this.buildFillStyleFromColor(t.backgroundColor),e.strokeStyle=this.buildFillStyleFromColor(t.borderColor),e.lineWidth=t.borderSize;var i=t.borderRadius,n=t.fontSize+"px Arial",o=this.buildFillStyleFromColor(t.textColor);this.renderUtil.drawRoundRect(e,t.x-t.width/2,t.y-t.height/2,t.width,t.height,i,!0,!0),this.util.drawText(e,t.text,t.x,t.y+1,n,o,"center","middle")},e.prototype.addConstraintsToDraw=function(e){for(var t,i,n,o,r=e.physicsEngine.getAllConstraints(),a=0;a<r.length;a++){var s=r[a];if(s.render.visible){var l=s.render.zIndex,u={type:"LINE",color:s.render.color,alpha:s.render.alpha,lineWidth:s.render.lineWidth*e.play.zoom,x1:this.renderUtil.convertToCanvasPositionX(s.bodyA.position.x+s.pointA.x,e.play.zoom,e.play.screenX),y1:this.renderUtil.convertToCanvasPositionY(s.bodyA.position.y+s.pointA.y,e.play.zoom,e.play.screenY),x2:this.renderUtil.convertToCanvasPositionX(((null===(i=null===(t=s.bodyB)||void 0===t?void 0:t.position)||void 0===i?void 0:i.x)||0)+s.pointB.x,e.play.zoom,e.play.screenX),y2:this.renderUtil.convertToCanvasPositionY(((null===(o=null===(n=s.bodyB)||void 0===n?void 0:n.position)||void 0===o?void 0:o.y)||0)+s.pointB.y,e.play.zoom,e.play.screenY)};this.addElementToDraw(u,l)}}},e}();t.default=h},function(e,t,i){"use strict";t.__esModule=!0;var n=i(69),o=i(70),r=i(71),a=i(74),s=i(0),l=i(5),u=i(28),d=function(){function e(e){this.gameOver=!1,this.paused=!1,this.mousePos=null,this.lastTouchX=0,this.lastTouchY=0,this.accelerometer={x:0,y:0,z:0},this.util=new s.default,this.zoom=1,this.elapsedTime=0,this.delta=null,this.deltaRealtime=null,this.timeScale=1,this.globalVariables=new Map,this.objectTypesMap=new Map,this.eventHandler=null,this.keyDownCodes=new Array,this.keyUpCodes=new Array,this.isKeyDownCodes=new Map,this.mouseDownList=new Array,this.mouseUpList=new Array,this.isMouseDownMap=new Map,this.customElementsToDraw=new Array,this.touchStartList=new Array,this.touchMoveList=new Array,this.touchEndList=new Array,this.changeToLevel=null,this.previousGamepadButtonPressedState=new Array,this.game=e,this.screenX=0,this.screenY=0,this.score=0,this.gameOver=!1,this.mousePos=null,this.elapsedTime=0,this.delta=null,this.initGamepadButtonPressedState(),this.eventHandler=new n.default,this.eventHandler.initObjectVariablesRegexp(this),this.resetGlobalVariables();for(var t=this.game.gameDefinition.customObjectTypes,i=0;i<t.length;i++)this.objectTypesMap.set(t[i].uid,t[i]);var o=e.gameDefinition.levels[0];this.level=new r.default(this,o),null!=this.game.gameDefinition.extensions.neatExtension&&this.game.gameDefinition.extensions.neatExtension.buildNeatMap()}return e.prototype.pause=function(){this.paused=!0},e.prototype.unpause=function(){this.paused=!1},e.prototype.restart=function(){this.stopAllAudios(),this.score=0,this.gameOver=!1,this.mousePos=null,this.elapsedTime=0,this.delta=null,this.initGamepadButtonPressedState(),this.resetGlobalVariables(),this.goToLevelIndex(0),this.eventHandler=new n.default},e.prototype.setTimeScale=function(e){this.timeScale=e},e.prototype.initGamepadButtonPressedState=function(){this.previousGamepadButtonPressedState=new Array;for(var e=0;e<4;e++)this.previousGamepadButtonPressedState[e]=new Array},e.prototype.resetGlobalVariables=function(){var e=this.game.gameDefinition.globalVariables;if(null!=e)for(var t=0;t<e.length;t++)this.globalVariables.set(e[t].name,e[t].initialValue)},e.prototype.setGlobalVariable=function(e,t){this.globalVariables.set(e,t)},e.prototype.addToGlobalVariable=function(e,t){var i=this.globalVariables.get(e);this.globalVariables.set(e,i+t)},e.prototype.clearCustomElementsToDraw=function(){this.customElementsToDraw=new Array},e.prototype.goToLevelIndex=function(e){e>=this.game.gameDefinition.levels.length||e<0||(this.changeToLevel=this.game.gameDefinition.levels[e])},e.prototype.goToLevel=function(e){this.changeToLevel=e},e.prototype.goToLevelUid=function(e){var t=this.findLevelByUid(e);this.changeToLevel=t},e.prototype.findLevelByUid=function(e){return this.game.gameDefinition.levels.find((function(t){return t.uid==e}))},e.prototype.goToNextLevel=function(){var e=this.getCurrentLevelIndex();this.goToLevelIndex(e+1)},e.prototype.goToPreviousLevel=function(){var e=this.getCurrentLevelIndex();this.goToLevelIndex(e-1)},e.prototype.getCurrentLevelIndex=function(){var e=this;return this.game.gameDefinition.levels.findIndex((function(t){return t.uid==e.level.levelDefinition.uid}))},e.prototype.updateDelta=function(e,t){if(this.deltaRealtime=t,this.delta=e*this.timeScale,null!=this.changeToLevel&&(this.screenX=0,this.screenY=0,this.level=new r.default(this,this.changeToLevel),this.changeToLevel=null,this.eventHandler=new n.default),this.elapsedTime+=this.delta,this.level.update(this.delta),1==this.level.levelDefinition.centerCameraAtObject){var i=this.level.levelDefinition.centerCameraAtObjectTypeId,o=this.game.gameDefinition.customObjectTypes.find((function(e){return e.id==i})),a=this.level.customObjectsMap.get(o.uid);null!=a&&a.length>0&&(this.setCameraCenterX(a[0].x),this.setCameraCenterY(a[0].y))}this.keyUpCodes=new Array,this.keyDownCodes=new Array,this.mouseDownList=new Array,this.mouseUpList=new Array,this.touchStartList=new Array,this.touchMoveList=new Array,this.touchEndList=new Array,this.level.currentFrame++},e.prototype.mousedown=function(e){this.mouseDownList.push(e),this.isMouseDownMap.set(e,!0)},e.prototype.mouseup=function(e){this.mouseUpList.push(e),this.isMouseDownMap.set(e,!1)},e.prototype.isMouseButtonDown=function(e){var t;if(-1==e){var i=!1;return this.isMouseDownMap.forEach((function(e,t){1==e&&(i=!0)})),i}return null!==(t=this.isMouseDownMap.get(e))&&void 0!==t&&t},e.prototype.isMouseButtonJustDown=function(e){if(-1==e)return this.isAnyMouseButtonJustDown();for(var t=0;t<this.mouseDownList.length;t++)if(this.mouseDownList[t]==e)return!0;return!1},e.prototype.isAnyMouseButtonJustDown=function(){return this.mouseDownList.length>0},e.prototype.isMouseButtonJustUp=function(e){if(-1==e)return this.isAnyMouseButtonJustUp();for(var t=0;t<this.mouseUpList.length;t++)if(this.mouseUpList[t]==e)return!0;return!1},e.prototype.isAnyMouseButtonJustUp=function(){return this.mouseUpList.length>0},e.prototype.setCameraCenterX=function(e){this.screenX=e-this.game.gameDefinition.canvasWidth/2/this.zoom},e.prototype.setCameraCenterY=function(e){this.screenY=e-this.game.gameDefinition.canvasHeight/2/this.zoom},e.prototype.getCameraCenterX=function(){return this.screenX+this.game.gameDefinition.canvasWidth/2/this.zoom},e.prototype.getCameraCenterY=function(){return this.screenY+this.game.gameDefinition.canvasHeight/2/this.zoom},e.prototype.setCameraPositionX=function(e){this.screenX=e},e.prototype.setCameraPositionY=function(e){this.screenY=e},e.prototype.getCameraPositionX=function(){return this.screenX},e.prototype.getCameraPositionY=function(){return this.screenY},e.prototype.multiplyZoom=function(e){this.setZoom(this.zoom*e)},e.prototype.setZoom=function(e){var t=this.game.gameDefinition.canvasWidth/this.zoom,i=this.game.gameDefinition.canvasWidth/e-t,n=this.game.gameDefinition.canvasHeight/this.zoom,o=this.game.gameDefinition.canvasHeight/e-n;this.zoom=e,this.screenX-=i/2,this.screenY-=o/2},e.prototype.registerKeyDown=function(e){this.keyDownCodes.push(e),this.isKeyDownCodes.set(e,!0)},e.prototype.registerKeyUp=function(e){this.keyUpCodes.push(e),this.isKeyDownCodes.set(e,!1)},e.prototype.isKeyDown=function(e){var t=this.isKeyDownCodes.get(e);return null!=t&&t},e.prototype.isAnyKeyDown=function(e){for(var t=0;t<e.length;t++){if(1==this.isKeyDownCodes.get(e[t]))return!0}return!1},e.prototype.onAnyKeyDown=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.keyDownCodes.length;i++)if(this.keyDownCodes[i]==e[t])return!0;return!1},e.prototype.onKeyDown=function(e){for(var t=0;t<this.keyDownCodes.length;t++)if(this.keyDownCodes[t]==e)return!0;return!1},e.prototype.onKeyUp=function(e){for(var t=0;t<this.keyUpCodes.length;t++)if(this.keyUpCodes[t]==e)return!0;return!1},e.prototype.checkEveryXSeconds=function(e,t){var i=this.eventHandler.secondsCounterMap.get(e);return null==i&&(i=new a.default(t,this.level.currentFrame,this.level.elapsedTime),this.eventHandler.secondsCounterMap.set(e,i)),i.evaluateCondition(this.level.currentFrame,this.level.elapsedTime)},e.prototype.checkEveryXFrames=function(e,t){var i=this.eventHandler.frameCounterMap.get(e);return null==i&&(i=new o.default(t,this.level.currentFrame),this.eventHandler.frameCounterMap.set(e,i)),i.evaluateCondition(this.level.currentFrame)},e.prototype.buildImageObject=function(e,t){var i=new l.default;if(i.imageId=t,"UPLOAD"==e)i.imageSourceType=u.default.UPLOAD;else if("LIBRARY"==e){i.imageSourceType=u.default.LIBRARY;var n=t.substring(7);i.customImage=this.util.findElementByUid(this.game.gameDefinition.customImages,n)}return i},e.prototype.playLibraryAudio=function(e,t){this.game.playLibraryAudio(e,t)},e.prototype.playCustomAudio=function(e,t){this.game.playCustomAudio(e,t)},e.prototype.stopAllAudios=function(){this.game.stopAllAudios()},e.prototype.getFPS=function(){return Math.round(1e5/this.deltaRealtime)/100},e.prototype.getDelta=function(){return this.delta},e.prototype.getDeltaSeconds=function(){return this.delta/1e3},e.prototype.getTimeScale=function(){return this.timeScale},e.prototype.getElapsedTimeMillis=function(){return this.elapsedTime},e.prototype.getElapsedTimeSeconds=function(){return this.elapsedTime/1e3},e.prototype.getMouseX=function(){return null==this.mousePos?0:this.mousePos.x},e.prototype.getMouseY=function(){return null==this.mousePos?0:this.mousePos.y},e.prototype.getGlobalVariable=function(e){return this.globalVariables.get(e)},e.prototype.getLevelVariable=function(e){return this.level.variables.get(e)},e.prototype.getCanvasWidth=function(){return this.game.gameDefinition.canvasWidth},e.prototype.getCanvasHeight=function(){return this.game.gameDefinition.canvasHeight},e.prototype.getObjectCountByType=function(e){return this.util.getObjectsByType(e,this).length},e.prototype.getCurrentLevel=function(){return this.level},e.prototype.getNeatExtension=function(){return this.game.gameDefinition.extensions.neatExtension},e.prototype.getObjectsByType=function(e){return this.util.getObjectsByType(e,this)},e.prototype.getCameraRotation=function(){return this.level.canvasAngle},e.prototype.getCameraRotationDegrees=function(){return 180*this.level.canvasAngle/Math.PI},e.prototype.getZoom=function(){return this.zoom},e.prototype.isMouseOverObject=function(e){return null!=this.mousePos&&this.util.isInsideObject(this.mousePos.x,this.mousePos.y,e,this)},e.prototype.isLastTouchOverObject=function(e){return this.util.isInsideObject(this.lastTouchX,this.lastTouchY,e,this)},e.prototype.getGamepadAxisValue=function(e,t){var i;return null===(i=navigator.getGamepads()[e])||void 0===i?void 0:i.axes[t]},e.prototype.getGamepadButtonValue=function(e,t){var i,n;return null===(n=null===(i=navigator.getGamepads()[e])||void 0===i?void 0:i.buttons[t])||void 0===n?void 0:n.value},e.prototype.isGamepadConnected=function(e){return null!=navigator.getGamepads()[e]},e.prototype.isGamepadButtonPressed=function(e,t){var i,n;return null===(n=null===(i=navigator.getGamepads()[e])||void 0===i?void 0:i.buttons[t])||void 0===n?void 0:n.pressed},e.prototype.isGamepadButtonJustPressed=function(e,t){var i=this.isGamepadButtonPressed(e,t),n=this.previousGamepadButtonPressedState[e][t];return i&&!1===n},e.prototype.isGamepadButtonJustReleased=function(e,t){var i=this.isGamepadButtonPressed(e,t),n=this.previousGamepadButtonPressedState[e][t];return!1===i&&!0===n},e.prototype.updatePreviousGamepadButtonPressedState=function(){for(var e,t,i=0;i<navigator.getGamepads().length;i++)for(var n=(null===(t=null===(e=navigator.getGamepads()[i])||void 0===e?void 0:e.buttons)||void 0===t?void 0:t.length)||0,o=0;o<n;o++)this.previousGamepadButtonPressedState[i][o]=navigator.getGamepads()[i].buttons[o].pressed},e.prototype.getGamepadButtonsLength=function(e){var t,i;return null===(i=null===(t=navigator.getGamepads()[e])||void 0===t?void 0:t.buttons)||void 0===i?void 0:i.length},e.prototype.getGamepadAxesLength=function(e){var t,i;return null===(i=null===(t=navigator.getGamepads()[e])||void 0===t?void 0:t.axes)||void 0===i?void 0:i.length},e.prototype.vibrateGamepad=function(e,t,i,n,o){var r=null;if(null!=(r=navigator.getGamepads()[e])){r.vibrationActuator.playEffect("dual-rumble",{startDelay:i,duration:t,weakMagnitude:n,strongMagnitude:o})}},e.prototype.executeVisualScriptFunction=function(e){this.game.visualScriptFunctions.get(e)(this)},e}();t.default=d},function(e,t,i){"use strict";t.__esModule=!0;var n=i(50),o=i(0),r=function(){function e(){this.expressionEvaluator=new n.default,this.frameCounterMap=new Map,this.secondsCounterMap=new Map,this.util=new o.default}return e.prototype.initObjectVariablesRegexp=function(e){this.expressionEvaluator.initObjectVariablesRegexp(e)},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e,t){this.lastEvaluationFrame=0,this.lastResetFrame=0,this.lastEvaluationResult=!1,this.resetEveryXFrames=e,this.lastResetFrame=t,this.lastEvaluationFrame=t}return e.prototype.updateCounter=function(){},e.prototype.evaluateCondition=function(e){return e==this.lastEvaluationFrame?this.lastEvaluationResult:e-this.lastEvaluationFrame>1?(this.lastResetFrame=e,this.lastEvaluationFrame=e,this.lastEvaluationResult=!1,!1):e-this.lastResetFrame>=this.resetEveryXFrames?(this.lastResetFrame=e,this.lastEvaluationFrame=e,this.lastEvaluationResult=!0,!0):(this.lastEvaluationFrame=e,this.lastEvaluationResult=!1,!1)},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(72),o=i(24),r=i(0),a=i(73),s=i(8),l=i(12),u=i(51),d=function(){function e(e,t){this.customObjectsMap=new Map,this.variables=new Map,this.canvasAngle=0,this.currentFrame=0,this.elapsedTime=0,this.restartTriggered=!1,this.physicsEngine=null,this.play=e,this.levelDefinition=t,this.util=new r.default,this.initialize()}return e.prototype.restart=function(){this.restartTriggered=!0},e.prototype.initialize=function(){this.physicsEngine=new a.default,this.physicsEngine.initEngine(this.levelDefinition.gravity),this.customObjectsMap=new Map,this.buttonArray=[],this.textArray=[],this.canvasAngle=0,this.currentFrame=0,this.elapsedTime=0,this.variables=new Map;var e=this.levelDefinition.levelVariables;if(null!=e)for(var t=0;t<e.length;t++)this.variables.set(e[t].name,e[t].initialValue);var i=new Map,o=this.levelDefinition.initialObjects;if(null!=o)for(var r=0;r<o.length;r++){var s=o[r],l=this.addCustomObject(s.objectType,s.x,s.y);0==s.inheritZIndex&&(l.zIndex=s.zIndex),null!=s.angle&&l.setAngle(this.util.degreesToRadians(s.angle)),i.set(s,l)}for(var d=0;d<this.levelDefinition.initialConstraints.length;d++){var c=this.levelDefinition.initialConstraints[d],h=c.object1,p=i.get(h),m=c.object2,f=i.get(m),y=this.util.rotateCoordinates(c.object1.x+c.x1,c.object1.y+c.y1,this.util.degreesToRadians(c.object1.angle),c.object1.x,c.object1.y),v=this.util.rotateCoordinates(c.object2.x+c.x2,c.y2+c.object2.y,this.util.degreesToRadians(c.object2.angle),c.object2.x,c.object2.y);this.physicsEngine.addConstraint(p,f,y.x-c.object1.x,y.y-c.object1.y,v.x-c.object2.x,v.y-c.object2.y,c.stiffness,c.damping,c.visible,c.lineWidth,c.color,c.zIndex,c.alpha)}for(var E=0;E<this.levelDefinition.buttons.length;E++){var b=this.levelDefinition.buttons[E],g=new n.default;g.definition=b,g.uid=b.uid,g.x=b.x,g.y=b.y,g.width=b.width,g.height=b.height,g.borderSize=b.borderSize,g.borderRadius=b.borderRadius,g.fontSize=b.fontSize,g.text=b.text,g.name=b.name,g.backgroundColor=b.backgroundColor,g.borderColor=b.borderColor,g.textColor=b.textColor,this.buttonArray.push(g)}for(var T=0;T<this.levelDefinition.texts.length;T++){var A=this.levelDefinition.texts[T],O=new u.default;O.textDefinition=A,O.align=A.align,O.color=A.color,O.fontFamily=A.fontFamily,O.fontSize=A.fontSize,O.text=A.text,O.x=A.x,O.y=A.y,O.zIndex=A.zIndex,O.alpha=A.alpha,O.angle=A.angle,this.textArray.push(O)}},e.prototype.getVariable=function(e){var t=this.variables.get(e);return null==t?(this.variables.set(e,0),0):t},e.prototype.setVariable=function(e,t){this.variables.set(e,t)},e.prototype.addToVariable=function(e,t){var i=this.variables.get(e);null==i?this.variables.set(e,t):this.variables.set(e,i+t)},e.prototype.addCustomObject=function(e,t,i){var n=new o.default(t,i,this,e),r=n.type.uid,a=this.customObjectsMap.get(r);return null==a&&(this.customObjectsMap.set(r,new Array),a=this.customObjectsMap.get(r)),a.push(n),e.physicsEngineType==s.default.MATTER_JS&&this.physicsEngine.addObject(n),n},e.prototype.update=function(e){(this.elapsedTime+=e,this.restartTriggered&&(this.play.stopAllAudios(),this.initialize(),this.restartTriggered=!1),this.physicsEngine.update(e),this.updateCustomObjects(e),this.updateButtons(),0==this.currentFrame)&&this.play.game.levelScriptsOnLevelStart.get(this.levelDefinition.uid)(this.play);this.play.game.levelScriptsOnAnimationFrame.get(this.levelDefinition.uid)(this.play)},e.prototype.updateButtons=function(){for(var e=0;e<this.buttonArray.length;e++){var t=this.buttonArray[e];null!=this.play.mousePos&&t.isInsideButton(this.play.mousePos.x,this.play.mousePos.y)?(t.backgroundColor=t.definition.backgroundColorMouseOver,t.borderColor=t.definition.borderColorMouseOver,t.borderSize=t.definition.borderSizeMouseOver):(t.backgroundColor=t.definition.backgroundColor,t.borderColor=t.definition.borderColor,t.borderSize=t.definition.borderSize)}},e.prototype.getObjectCount=function(){var e=0,t=this;return this.customObjectsMap.forEach((function(i,n){var o=t.customObjectsMap.get(n);e+=o.length})),e},e.prototype.updateCustomObjects=function(e){var t=this;this.customObjectsMap.forEach((function(i,n){for(var o=t.customObjectsMap.get(n),r=0;r<o.length;r++)o[r].update(e)})),0!=this.levelDefinition.electricConstant&&t.customObjectsMap.forEach((function(i,n){for(var o=t.customObjectsMap.get(n),r=0;r<o.length;r++)t.customObjectsMap.forEach((function(i,n){for(var a=t.customObjectsMap.get(n),s=0;s<a.length;s++){var l=o[r],u=a[s];t.applyElectricCharge(l,u,e)}}))})),this.levelDefinition.applyGravitationalForceBetweenObjects&&0!=this.levelDefinition.gravitationalConstant&&t.customObjectsMap.forEach((function(i,n){for(var o=t.customObjectsMap.get(n),r=0;r<o.length;r++)t.customObjectsMap.forEach((function(i,n){for(var a=t.customObjectsMap.get(n),s=0;s<a.length;s++){var l=o[r],u=a[s];t.applyGravitationalForce(l,u,e)}}))})),this.removeObjectsMarkedToRemove()},e.prototype.applyGravitationalForce=function(e,t,i){var n=this.levelDefinition.gravitationalConstant,o=i/1e3;if(0!=e.mass&&0!=t.mass){var r=t.x-e.x,a=t.y-e.y,s=Math.sqrt(Math.pow(r,2)+Math.pow(a,2));if(s>3){var l=n*e.mass*t.mass*r/Math.pow(s,3),u=n*e.mass*t.mass*a/Math.pow(s,3);e.speedX+=l/e.mass*o,e.speedY+=u/e.mass*o}}},e.prototype.applyElectricCharge=function(e,t,i){if(null!=e.electricCharge&&null!=t.electricCharge){var n=t.x-e.x,o=t.y-e.y,r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));if(r>10){var a=i/1e3,s=this.levelDefinition.electricConstant,l=e.electricCharge,u=t.electricCharge,d=-1*s*l*u*n/Math.pow(r,3),c=-1*s*l*u*o/Math.pow(r,3);e.speedX+=d/e.mass*a,e.speedY+=c/e.mass*a}}},e.prototype.removeObjectsMarkedToRemove=function(){var e=this;this.customObjectsMap.forEach((function(t,i){for(var n=e.customObjectsMap.get(i),o=n.length-1;o>=0;o--)n[o].markedToRemove&&(n[o].type.physicsEngineType==s.default.MATTER_JS&&e.physicsEngine.removeObject(n[o]),n.splice(o,1))}))},e.prototype.getName=function(){return this.levelDefinition.name},e.prototype.getCurrentFrame=function(){return this.currentFrame},e.prototype.getElapsedTimeMillis=function(){return this.elapsedTime},e.prototype.getElapsedTimeSeconds=function(){return this.elapsedTime/1e3},e.prototype.testCollisionObjectLists=function(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(this.testCollision(e[i],t[n]))return!0;return!1},e.prototype.testCollision=function(e,t){return e.type.physicsEngineType==s.default.MATTER_JS&&t.type.physicsEngineType==s.default.MATTER_JS?this.physicsEngine.isColliding(e,t):e.type.shape==l.default.CIRCLE&&t.type.shape==l.default.CIRCLE?this.util.testCollisionCircles(e,t):this.util.testCollisionRectangleRectangle(e,t)},e}();t.default=d},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.isInsideButton=function(e,t){return null!=e&&(null!=t&&(!(e<this.x-this.width/2)&&(!(e>this.x+this.width/2)&&(!(t<this.y-this.height/2)&&!(t>this.y+this.height/2)))))},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(8),o=i(12),r=function(){function e(){this.matterjs=null,this.matterjsEngine=null,this.type=n.default.MATTER_JS,this.unitConversion=1/60,this.matterjs=window.Matter}return e.prototype.initEngine=function(e){this.matterjsEngine=this.matterjs.Engine.create(),this.matterjsEngine.gravity.scale=e/1e6},e.prototype.update=function(e){this.matterjs.Engine.update(this.matterjsEngine,e)},e.prototype.addObject=function(e){var t=this.buildBody(e);t.restitution=e.type.restitution,this.matterjs.Body.setAngularVelocity(t,e.type.angularVelocity*this.unitConversion),t.egmObject=e,this.matterjs.Composite.add(this.matterjsEngine.world,[t]),e.setMatterjsObject(t)},e.prototype.addConstraint=function(e,t,i,o,r,a,s,l,u,d,c,h,p){if(e.type.physicsEngineType==n.default.MATTER_JS&&(null==t||t.type.physicsEngineType==n.default.MATTER_JS)){var m=this.matterjs.Constraint.create({bodyA:e.matterjsBody,pointA:{x:i,y:o},bodyB:null==t?void 0:t.matterjsBody,pointB:{x:r,y:a},stiffness:s,damping:l,render:{visible:u,alpha:p,lineWidth:d,color:c,zIndex:h}});this.matterjs.Composite.add(this.matterjsEngine.world,[m])}},e.prototype.getAllConstraints=function(){return this.matterjs.Composite.allConstraints(this.matterjsEngine.world)},e.prototype.scaleBody=function(e,t,i){this.matterjs.Body.rotate(e.matterjsBody,-e.angle),this.matterjs.Body.scale(e.matterjsBody,t,i),this.matterjs.Body.rotate(e.matterjsBody,e.angle)},e.prototype.buildBody=function(e){var t={isStatic:e.type.isStatic,isSensor:e.type.isSensor,frictionAir:e.type.airFriction,friction:e.type.friction,density:e.type.density};return e.shape==o.default.CIRCLE?this.matterjs.Bodies.circle(e.x,e.y,e.halfWidth,t,null):e.shape==o.default.RECTANGLE?this.matterjs.Bodies.rectangle(e.x,e.y,e.getWidth(),e.getHeight(),t):e.shape==o.default.POLYGON?this.matterjs.Bodies.polygon(e.x,e.y,e.type.numSidesPolygon,e.halfWidth,t):null},e.prototype.removeObject=function(e){this.matterjs.Composite.remove(this.matterjsEngine.world,e.matterjsBody)},e.prototype.getCollision=function(e,t){return this.matterjs.Collision.collides(e.matterjsBody,t.matterjsBody)},e.prototype.isColliding=function(e,t){return null!=this.matterjs.Collision.collides(e.matterjsBody,t.matterjsBody)},e.prototype.setObjectAngle=function(e,t){this.matterjs.Body.setAngle(e.matterjsBody,t)},e.prototype.setObjectAngularVelocity=function(e,t){this.matterjs.Body.setAngularVelocity(e.matterjsBody,t*this.unitConversion)},e.prototype.getObjectAngularVelocity=function(e){return this.matterjs.Body.getAngularVelocity(e.matterjsBody)/this.unitConversion},e.prototype.setObjectPosition=function(e,t,i){this.matterjs.Body.setPosition(e.matterjsBody,{x:t,y:i},!1)},e.prototype.setObjectPositionX=function(e,t){var i=e.matterjsBody.position.y;this.matterjs.Body.setPosition(e.matterjsBody,{x:t,y:i},!1)},e.prototype.setObjectPositionY=function(e,t){var i=e.matterjsBody.position.x;this.matterjs.Body.setPosition(e.matterjsBody,{x:i,y:t},!1)},e.prototype.setObjectSpeedX=function(e,t){var i=this.matterjs.Body.getVelocity(e.matterjsBody).y;this.matterjs.Body.setVelocity(e.matterjsBody,{x:t*this.unitConversion,y:i},!1)},e.prototype.setObjectSpeedY=function(e,t){var i=this.matterjs.Body.getVelocity(e.matterjsBody).x;this.matterjs.Body.setVelocity(e.matterjsBody,{x:i,y:t*this.unitConversion},!1)},e.prototype.setObjectSpeed=function(e,t,i){this.matterjs.Body.setVelocity(e.matterjsBody,{x:t*this.unitConversion,y:i*this.unitConversion},!1)},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e,t,i){this.lastEvaluationFrame=0,this.lastEvaluationResult=!1,this.resetEveryXSeconds=e,this.lastResetTime=i,this.lastEvaluationFrame=t}return e.prototype.updateCounter=function(){},e.prototype.evaluateCondition=function(e,t){return e==this.lastEvaluationFrame?this.lastEvaluationResult:e-this.lastEvaluationFrame>1?(this.lastResetTime=t,this.lastEvaluationFrame=e,this.lastEvaluationResult=!1,!1):t-this.lastResetTime>=1e3*this.resetEveryXSeconds?(this.lastResetTime=t,this.lastEvaluationFrame=e,this.lastEvaluationResult=!0,!0):(this.lastEvaluationFrame=e,this.lastEvaluationResult=!1,!1)},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(0),r=i(27),a=function(){function e(){this.progressBarColor=new n.default(32,32,128,100),this.util=new o.default,this.renderUtil=new r.default,this.logoImage=new Image,this.logoImageHalfWidth=100,this.logoImageHalfHeight=23,this.logoX=300,this.logoY=423,this.mousePos=null,this.logoImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMkAAAAuCAYAAACChz0/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAABf0SURBVHja7F19bBvnef/py6ac6njeWljGCB1doLVMVBZdbA3dyjG9AexsBQm9qZviYLFMoEJsoBO9qYvdQrQirbCLGjPdAnHgrpLcwI7WETVdREpDbBBVKTC9P0ZKGhi3RaejykL0ukEnqonoD4n74+493sd75FG2U6flAxCU7vO9931+z/dzBB4BcQ19VumbI39XqEK/K1T1EMDgANgBdAHwAkgAYKVtYek7AaBfOoXsI5RIrQwuP0mTIQHcD8AtbQqmVgZvVNikApJymKhV+rMfgFPD9GDyOWSrLLRTE0x+1e5Yu8OSDbFaOwDwEqDCZHtqZXDytwiSCQBun+MukrOLiNXaBQD2Jw3MFXoCQSKBIyhpAyfZ7ljLwLWWgmMtA8f6HRkoobpWZKssyFZZEKvhkK2yIJB7Bx0PZoGeHgk2CSTnMgi9z2Glph47Nv8GwvpmvP3gk8Ivq7eGAfSnVgZTHyJAngcQDrjuwvf5esT+cQSdW14CAPdvE7gV+giAhGvoG5ZMKgCA6wEPW34ZHfdn4Fozx8PpKiuYfA5MazMgCEBXF+B2A9EoFl9/A2NffQ2Lq9X41Kc+jqe+9griv6oiQAtLJs/khwCSMwD6p/94FraJG4jVcBWQVAgAUFtCe0Ql7QHbuoDA3QgcaxnY8iWsj/37Aa8XcIpKxwaI/0ejQDgsfvf3A243Fp/+U/z8f+7jP+NpLC5m8Uz3CQROHYb/7iQitTu9wc37vWjo4yVNFn7c2sU2IbogobpW2VSssElFk9AAclRyYJ0A4Ll/G777/0HXHK2twMwMwHGidiBaAgCCQcDvl7yYfhE0Xq/q9J99/Vv4l3ontm9n8POf/Rp7qv8XnU+zBUClUojVcBiq+xwidc1IrQxWPY6J4Br64o61jHP8g+8qtchIamXwWIVNfr+pmsIsHAEIk8/Bd+8WLuf+VQ+Q1lYgHhcZeWICGBmRtYNMJ08CiUQBJNGobgCf/pNPof3eTwEAzzRV47PZn4tACgYBngficbg+wxKfJ/GYAHIGgNN37xaS1dvQXf9XACBI81ChCqkBwjX0DXMNfXmuoS//6mZPPg/oP62t+fzSUj7f06PfTigeF7dZreLfRhSP5/MXLojHAfn8/v35vNWav1nDyZ93anfmWz721TzX0NfzGJ65h2voy/+95bn8MjbnD275cl56/ucrHFEhmk9iJ056x/0Z+O9S/NWjR0WzyekEUhrtMjNT+JtojeVlUbsEg6IpptQqk/rrZydjSNY0Ilm9DelqFrEaDsmaRrLbyTX0taZWBmcehUAAMALA3XF/BoHcO+jc8hK5V38lP1Ihqk/CNfRdB+C1rQuYfv876iOtVtG0cjoBu11kfhrl8wUgvPqqet/16+K5e/aUHFgWm8HgrhwdG9r0tBxahphfiULMryTKceYlDeEF0MXkc/DfnUTH/RklQCp+SIXomkQyZbwAcD73I/2R0agcrUI0KvoNqSK8SY4lkS5BED9OJ7C0BLCsXusQ4nkwPK/SNo61DMbv3UKyphGR2p32SO3OrmyVpUsauyD5KwnJl9ASKwUh3CRS13F/Br57txCrtaPtY39LwNefWhl8tcIWFdJpEqXp4bt3C4G7EfVRPT2iBmDZgslE8h03bug1SSIhahK/v+DI87z4SSTEa2miXDoSBPHYcBgYGUH3XQ8idc1wrGVUORqlWQbImXwVOdYysK0LcKzfgefBT2FbFxCp3YlQXasy899VyYdUqBhIrAB4Jp9jp3/zbdnMAQCcOSMy9THJApmYEP+PRkWQhMPiNzG/4nHx/2hUBJUgiECZ0bgRHFfwbQAREIKkBBS+SqR2J4bqPkdKRKKSNmABMbtPsv1MPlc0uZmtsiBZvQ2xGk4JJAFi/iVYKT2pkCFIJIAkANg992/jfO5HBZBcuCAyuNtdAAHHiQxNtAXJfxCt0toqaon+/gLzm/BBlFqBwsxRAH7isHMNffslsJBPOSQo/JlwBRwVMuuTCABgyy+rtYjbLZpMSic9lRK3jYyIWoQkEMNh8XP4sDpXQjSFgtJVVjmClazeJtZ4qc0k4phHAUS1jrlkFk0CeFVhLtoVHxowEgCERxEZq9DvnybZL0lVdvz9y3KhIqzWgl9Ac9KHh0VwEGfc7RZ9jslJUZuQJCJFkySrtwEAOre8hGyVhZfuzxPnuyLdK/REkZRMW/rCU1/J/7LKWkgM9vSok37Xr+fzR4/m8xxXOGZ4uLBPm3Ccnxf37d+fv1nDqfaR+0iJuzOVVajQk25u8QBYXR+IMkQLiNqERKQSCdHc8vsLESsthcNydCt2cwLBTc/AtZZCqK4V6WoWjrUMyUu4uYY+5ZnRJznKJJl27hLmHY38FVPvowsSeZGZfE7vS0SjhfAt2W63F4oX3W6dKdZt+RLOXxkF4/eLJtnZCcRq7Sq/Q5FF1zrffsnfeNLAoSr6lOfMaoGjpdE4GDGXQXY5hwpAPvqOOxxrmYLTfuaMqDWIhujqKoRoleXubn1gqdfyHCJ1zRhK3oFfOsbzsTsY2mLB5WsvGA4k8tZ7GLoUg+SsP0ng2A8xTOwEAE97MzzP7oKjpRGO3dtLnt95aAixaT5RYbWPNkiigJhHkEtBSHm7MjLldBay5kAhxBsOAyiUkbge8GKSroaTgeT4Sic837yF9MJBdLy4xxAkUuRq5rcICO2mowBGGKsFvhN74TvuAsPWl3XN2DQPVHpSHuUaWRXanEhppdlLtoWleQ+Xy1NSL5VAoqqqAkdZk/B8ASA8L5pWiYS+ILGnRwTLyZMFppBMKtdaCnD7JAPKD883XAi99Z4hSCRmEqQ+cyXxiodNaSR8l8I/KIeKlp/4HHcxlNx8FMCIo6URl6+9ABu3tewFTc4uyial5rkEFMpooo8rmicttldiKlYSiALKaF6TrsFK10go/UWpa9X+EEPkpee/ovH57FC3itPAUIq80qefa+iLSqZyEMXzagmlOS0JTW8tSI5kXdIQVqs+t+F2i448y6rLUC5e1AEsXSW+UShbZSloHq8XWWxGdjlX1HaXJsboIYJcQ98IxJdQjJDjHC2NYKyWciW700iLBFx3MRDbvJ8AZHTsWNnaQ/NMRovrJYDhGvr6UyuDFzVM4ob6ZRuC4jssMTzxkZwKYRIk80WZS7diLqMkmCDd06m4n1FQIgrggFJIlTv/hNILAtILAgB0cQ19/ZLAK2lqe9qb4di9XV53xmqBY/d2pFNLyC7nVCZwbGoekbfeQ+hawp1dzkUBwNbEwtbEUv1GWxPrJGZ0bGpeFtxVConQNf2bb8MW8BdMKSrWEqoMfLJ6G5h8Tm7pPbTly0jWNIoFiV/eIpfId/5gHck/bKY6uYFzBw3t+6ywitg0j9DVOCJjtwve/ekDGzJ/JB+BT60M7pCkJNUUYqwWTM+dpF4/8tZ7SM5lkJxdLAr80XFfUS2TnMsgeHaCMEuCBl5Crja7EuS6wEF2OacEpQCA9Z8+IDMVmcvkXAahq3GEriXIcW5J8Hi19yMMyFgtCF2NIzmXiaZWBglIrjNWi9dojsxQVljF0KUYhl67Kc+jFgS2Jha9x68jNs2j44gT51//iw1p9M72YWSXc/CfPgD/6QNq6Xt2Aq42O1z7dqi2Bc9OILUyWEXMrREAXelqFja3u/gdnU7RDzkg3ii46RlE6pox+sH34VpLwbYuwPacG5ExIPnGD+DoF4BgEL6rLnQv23WLTNBtRAxbD8+zu+B5dhdCV+PoPX4d5y8dNjTbSpGjpRGxaZ5IyC4lAyqlnP/0Ad3iJ2cX0X3kTcLURUl7Td04dm+HY/d2eNqb0dk+jPSC4HS0NMK1b4cs7UJX43Ds3g7fib0qxuo9fh3JuQzOXzqsWljCDADY0bFjOsHDsPVw7dsB174d8J3Yi872YTa7nAuT8fpPH1BdjwJqt0LbeT3tzRsGCBkPATJhYt+JvboxpBeEDQOEzHXg3EH0Hr9OXRctaIgWIgK0VnKWJ2WnlWWLWJB8If/BcUAqJZbVK+q9kjWNCLy4B4zVgt43Mgh83AmGa5SrdGlMa3aiCTA2ChAyYQpzwetpb8blN4/oJIv2HsnZRRxqu2T6PkbMRmOUy9dewMCpt3XjIJJce3zg3EHR1NDMGwGUUnuYYBw7GW+xMWt8Mr8Rc210TXwn9ooSnTIGR0ujaYBkhVWEriVABI6SdwZOvV1UIFNM5YTOcRcVtaAGBcmP8Dzg9yP0PocOQAwRX7yorvWSfBtHSyNcbXb0LufQOdYI/BrAJlDNI0dLI0GtKWajAYSYP0YSXXkNhbnXD8DueXaXKc3WfeTNotel3dfouWxNrIrpbNxWlbbQAroEw6qDDpQ5LsU42eVc0VwPAawkXJ4H0OVqs5cMZoSuxqlal7Fa4GlvVp3vaW9G6Gpc77uklnD+0mHTAGlruSCbbqNjx1TPa2bM5DrSNXgtSPQ2cVeXKqIVqt2NAcsX4bn4OpiJH4vAIZonGkXkVxak/6AwEK1kNFLjxSS077gLgW8eKroQvcevG2ufI041SCQbO7ucc5PF0QJOu4222B0v7imq0bpfuKbyobQ0Pn1cBQIa4Eh0jAaW2NS8DmxE02gX/FDbJXn82vtK5mdJkCj2dxF/pxQRABqF/JU+G/FDzAgE4stox6C9X2ya1wmFUrwYuhpXugRRLUiEZPU2uFRK1a8GSV0rRjf9CMzzfy5qEtIvYrcDfj9sg68DgoDQ1bhpk4jmoyilDU3CapmVsVqQnMsgNjWvjJoYXp8wBs2mTi8Ium0kh1OOz2Gk2UjOxVQisn0YtiYW4++e0I2n+8ibVCeUxqjK+YiM3Vbdm2jNUhJWEcHy2prYkuYkiTbRtKjRupqZE/JMtGMdu7djVOI7I7ONyoNT8wienZCjWYrooc7cimarLG6VueX1irmQixeRrN4mvtL0e+cKJfRXrogVv8EgwLJwuN24/Ged6DzVCLNOndIkIWaa59ldpm16ALJjD4lh0qkldB95E8m5DNILArLCqmosrn07xGiJBshZYRXp1FJJhmeslqJMlRVWVYzpaGlEx4t74Gqzm2aE2NQ8sss5aniVjMeMfe3YvR2Xn90Fxmqhzml2OVcS8FoGNqNFlHPmaW+Ga98OnYmlleKltBkADLwyjtC1hAwGldVRQqBS8wpSFEsCBfUF6SpzK1bDFUrjCUnmVKR2JzqeShWasEin4cxMoZ/E6YTje+fg++sLGDjVLDtb6dQSCTlSJ7PjiNO0dE3OLpY8zsZtxejYMdnMiE3zUPoeJLyo9UciY7epwNaaWrYmVgVuLfMl5zKyxug44txQIpLcs5gZZgYkpRhHyg+Yj0hZLaasBLKu/tMHzPkBJvwiRelS2bmZdGoJ6QVBNxbJD0qQ0DaNaiVnDAASyZpG6ksZZObYbRe1xswMIrU7EavhwORz8N+4IYJEqhTu+KN+HFLY45Gx2wStugm/fO2FsrTG0Gs3kZzLiKHCIo4Yw9bD096MoUsxxKbmdSDR+h1kwmhMZWtiVUBJzmVIqBW2JhbT//V3ugUfnz6+IXCYAUIxAJXLOLFpHoFzB6naUCswSgUrSoVVS5ndpc5RgsisRibrGjw7oVsnxVyGi52v1CSpbJWFj7ybsXsEQRcKtq0LSE7dgUPaHqvh5P7yZPU2OEgDFgDbS17YvsUjNjUP174dyvIMFdFi+YRBImO3kRVW4TuxV8Vs6QUBybmMylkn5oyWwckia80lG7dVJw0Jw9AWytVmN9SENAajRcyICUV8pFIMQcZMk67JuYwp06SUVB449Tb1HkTq0gDRccRJfS4z4Im89R5iU/OiltEEPsxoBhu3Fb7jLlmbGEU5tSazjdtKXSeFNZAoChJNUV84UrvT7yG9IoBoWl25go4HswhuegYOAGhtRWAmoop6OZZnC5XBTieY/H8jOZcRQUJxYjuOOHUAoSXrtMxMc8TTCwLVScwKq4bnaBeVRKJo1wmcOyhm2BXPwVgtCJw7aAgIrSRTRl4Yq8U8SDRzRBbWrIlEGIdk25V+DtGQOpAYzOf5S4d12rFY+L7YuuoEmknzyX/6AELXElSzm7FaDM1bmq+pGA9vVpMAwEiortXv//YIbF1dhVcIjYwAk5PwPPgphsY5+D7Pim9yFARE3s3A9X+36TVfJNypic4UYyaSbSYxfe1E8NkB89JSZHwBAFtK2g29dlNedC3jM2w9xt89UdQPKebEh67GZUYkWs9MZIimLcjCmjE3ssKq6LC32alJWwIg7XYiVLTzQGO+4NmJouU3BPC2JlZ+blqykwZKWpSUYevhO7FXBLfmGsXWhAZCMpelqoRVIBl///LMoae6owOLn3ZfDgYLNVwjI8COHfKre4I3W4Gb83Cs3yn8FEN4QpUzSVezZZsExfIh5ZIit9EPIKiNmWslHZmwyNhtw3FsxAdg2PqSTGQIBJqpRXInlH1aQUDKUIoxL+06NH+kWASuFJXKKRlFtsgaarWu77gLwbMTprS41vSmaMFEqXOrlT6H1Jnoj9Q1I/SN6wUn3m4X38QI8Y0q/ns/gf/eT8QXveWXxZdCkJovQUDsrcSGQPKoKDY1T+ztqFRdmzDyixQRDgAIphcEWauUSwOvjMsm3kONX5LkNMlt5KsQjVUuUaNnUs7JTPjUTPjYjFAwGsfQazd1phLD1oNh602NUWt6U4QRX+pcWZOQHnd+ZXDG3tDnH7B8Mej4y5fh+PdR0Ywi7bosWzCr7HYRHHbFRPn9GFj8NDr+xvlQxW8biQalFwRSGk0kBIllR2PTvNMoSy2ZZeHUyuBJrqHPPXDqbWe5cfeBV8YxdClmWGJSbtSJBAyMQKJ9huRcBqFrCdOhdDJnNGlsJjBAghA0DWFWE8kBk6l5qjlEtNTAqbd1c+poaURn+7BYlKmYJ+J3kQpt8v/o2DEjkJTUJFXEcWfyOSjf3mhv6Btm8rmu85afwPP1zoIjb0Q8j+zJU+j98Toidc2mJsjT3ozAuYOqBScqXOlsarPoJYiH+NJr8k6uYSgas7QVxLGpeRLO9aZWBm9InW9BSPVJJAlIleqzi4hN86K0U5S7B84d1C2q8rlI9KjM5zKdxyDhcSUzpBcE6n219U1ZYRW7m86W9P9I2c303End3LR95p/k6l6lxI9N8xtZ0yg29gLChPTtRPFGrZI/9yeDxPWAx+jqG+LWM2eA/n7YmcAFAH7fvVvw71oG0/OyXnNEo8DICCJjtzGw+jmkq1kBYul9qRlgIdUBFTmGPGhU8eBFAaLtuCO/hUhsWa2/0fvyDxG6luBTK4M7NOftl85zm1iQsHQseXZviXPKfa5yqAuK37ikMI6S8dxaICiEhiFI0qkltLVcAGO1YPaXX9MJjhLV0jwKDWJkDkrNldMsOB5H+7fK3NL2uPPZgZN2JhAd2vT0yNAvwHqOj8O1dkl+gR35dd1I7U6kqz1ANRLSAs24HvAY/YdPyq9C7f1mHK5/7ldJcTsTIEzo1Ewg/wh/GzEIoJ8GEEUlQFgChnL3JMQuPNJT7aYxHZ8d0Eqhw3Ym0KoBiswYH8KL9yYBHJNAbsg4XEOfW1k5QKJfyjC3UXUDSQwb5XAk8moE5cM8u7JluOiBtP2plcGybkauQc6TNYljLYPxD74rHhWPq3rc7buHrAoJRUN1GECYXxm80mt5DqG6VvjvTsL/zqui5hEERD7hQqgjYFgZfOgLrxkWBdIettRkaWiYsVq6tFJPUalrT60Mpsg1pR53mREepsfdTA9KuYtY7mIb0FIJLf6wZPq3LR9iXT8UqlVGtwBQ8x389z+7jETiIhKJi7hxA/bCywF4XiPxH7LHvexFN9NjHZvmg9nlXJcy7t778g8JQPqVAJF63OVrP6Ie95LPRRjlQ2QS7+O8eKmol9InKeeZN9jjLvNeiR53UHrc5Z9eAAD8Lve425lA3NHS6CRtwNICBQGcNHKAP+Qed1NMZ7LHXZ6jEj3uRe9H6XFXgbnYHJkNy34EetzVIBn94Ptw/dsI9aVz6nhDVO5x77Z8SdXj3m35EuD1IjJ2G+N1P4DjF2KdTeQTLvKrtjqaXThtaqIfpsfdzgSOKgIKUQkgkzSpRxJYtBbecnrczSQRs8Iq6XHHI+xxN6yLozEOGW+xHncpwIHUyqDMLw/Td240Fm20jUTLXG32h7oX4R3a9WkkvTAEqZVB/P8AGtFSZxUrFg4AAAAASUVORK5CYII="}return e.prototype.renderLoading=function(e){var t=e.numImages,i=e.numImagesLoaded,o=t+e.numAudios,r=i+e.numAudiosLoaded,a="100%";o>0&&(a=r+" of "+o+" ("+Math.floor(100*r/o)+"%)");var s=e.ctx;s.fillStyle="#dddddd",s.fillRect(0,0,e.gameDefinition.canvasWidth,e.gameDefinition.canvasHeight),s.font="16px sans-serif",s.textAlign="center",s.fillStyle="#000000",s.fillText("Loading... "+a,e.gameDefinition.canvasWidth/2,e.gameDefinition.canvasHeight/2);var l=123;e.gameDefinition.canvasHeight<=300&&(l=80),s.font="14px sans-serif",s.fillText("made with",e.gameDefinition.canvasWidth/2,e.gameDefinition.canvasHeight/2+l-23),null!=this.mousePos&&this.isInsideLogo(this.mousePos.x,this.mousePos.y)?(s.shadowBlur=5,s.shadowColor="#000000"):(s.shadowBlur=0,s.shadowColor="#00000000"),this.logoX=e.gameDefinition.canvasWidth/2,this.logoY=e.gameDefinition.canvasHeight/2+l,s.drawImage(this.logoImage,this.logoX-this.logoImageHalfWidth,this.logoY-this.logoImageHalfHeight),s.shadowBlur=0,s.shadowColor="#00000000";var u=400;u>e.gameDefinition.canvasWidth-50&&(u=e.gameDefinition.canvasWidth-50),o>0?this.drawPercentageBar(s,e.gameDefinition.canvasWidth/2-u/2,e.gameDefinition.canvasHeight/2+10,u,10,r,o,!1,1,this.progressBarColor,n.default.WHITE,n.default.BLACK):this.drawPercentageBar(s,e.gameDefinition.canvasWidth/2-u/2,e.gameDefinition.canvasHeight/2+10,u,10,1,1,!1,1,this.progressBarColor,n.default.WHITE,n.default.BLACK)},e.prototype.isInsideLogo=function(e,t){return e>=this.logoX-this.logoImageHalfWidth&&e<=this.logoX+this.logoImageHalfWidth&&t>=this.logoY-this.logoImageHalfHeight&&t<=this.logoY+this.logoImageHalfHeight},e.prototype.drawPercentageBar=function(e,t,i,n,o,r,a,s,l,u,d,c){var h=this.buildFillStyleFromColor(u),p=this.buildFillStyleFromColor(d),m=this.buildFillStyleFromColor(c);if(this.drawBar(e,t-l,i-l,n+2*l,o+2*l,m),this.drawBar(e,t,i,n,o,p),this.drawBar(e,t,i,n*r/a,o,h),s)for(var f=n/a,y=1;y<a;y++)this.drawBar(e,Math.round(t+f*y-l/2),i,l,o,m)},e.prototype.drawBar=function(e,t,i,n,o,r){e.fillStyle=r,e.beginPath(),e.rect(t,i,n,o),e.closePath(),e.fill()},e.prototype.buildFillStyleFromColor=function(e){return this.util.buildFillStyleFromColor(e)},e}();t.default=a},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.OBJECT="OBJECT",e.GAME="GAME",e.LEVEL="LEVEL",e.CAMERA="CAMERA",e.MATH="MATH",e.STORAGE="STORAGE",e.TOUCH="TOUCH",e.ACCELEROMETER="ACCELEROMETER",e.MOUSE="MOUSE",e.GAMEPAD="GAMEPAD",e.NEUROEVOLUTION_NEAT="NEUROEVOLUTION_NEAT",e.OTHERS="OTHERS"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(19),o=i(1),r=i(3),a=i(33),s=i(38),l=i(79),u=i(0),d=i(81),c=i(10),h=i(18),p=function(){function e(){this.levels=new Array,this.customObjectTypes=new Array,this.globalVariables=new Array,this.customImages=new Array,this.customAudios=new Array,this.extensions=new l.default,this.visualScriptFunctions=new Array,this.framerateType=null,this.maxFps=null,this.maxDeltaTime=null,this.hasFixedDeltaTime=!1,this.fixedDeltaTime=null}return e.prototype.toJSON=function(){var t=new u.default,i=new e;return i.name=this.name,i.description=this.description,i.canvasWidth=this.canvasWidth,i.canvasHeight=this.canvasHeight,i.levels=t.arrayToJSON(this.levels),i.customObjectTypes=t.arrayToJSON(this.customObjectTypes),i.globalVariables=t.arrayToJSON(this.globalVariables),i.customImages=t.arrayToJSON(this.customImages),i.customAudios=t.arrayToJSON(this.customAudios),i.visualScriptFunctions=t.arrayToJSON(this.visualScriptFunctions),i.engineVersion=this.engineVersion,i.engineVersionOriginal=this.engineVersionOriginal,i.createdAt=this.createdAt,i.updatedAt=this.updatedAt,null!=this.extensions&&(i.extensions=this.extensions.toJSON()),i.framerateType=this.framerateType,i.maxFps=this.maxFps,i.maxDeltaTime=this.maxDeltaTime,i.hasFixedDeltaTime=this.hasFixedDeltaTime,i.fixedDeltaTime=this.fixedDeltaTime,i},e.fromJSON=function(t){var i=new u.default,h=new e,p=new d.default;return h.name=t.name,h.description=t.description,h.canvasWidth=t.canvasWidth,h.canvasHeight=t.canvasHeight,null!=t.extensions&&(h.extensions=l.default.fromJSON(t.extensions,p)),h.customImages=i.arrayFromJSON(t.customImages,a.default.fromJSON,p),h.customAudios=i.arrayFromJSON(t.customAudios,s.default.fromJSON,p),h.customObjectTypes=i.arrayFromJSON(t.customObjectTypes,o.default.fromJSON,p),h.globalVariables=i.arrayFromJSON(t.globalVariables,r.default.fromJSON,p),h.levels=i.arrayFromJSON(t.levels,n.default.fromJSON,p),h.visualScriptFunctions=i.arrayFromJSON(t.visualScriptFunctions,c.default.fromJSON,p),h.engineVersion=t.engineVersion,h.engineVersionOriginal=t.engineVersionOriginal,h.createdAt=t.createdAt,h.updatedAt=t.updatedAt,h.framerateType=t.framerateType,h.maxFps=t.maxFps,h.maxDeltaTime=t.maxDeltaTime,h.hasFixedDeltaTime=t.hasFixedDeltaTime,h.fixedDeltaTime=t.fixedDeltaTime,h},e.prototype.getFpsLimit=function(){return this.framerateType==h.default.UNLIMITED?null:this.framerateType==h.default.FPS_30?30:this.framerateType==h.default.FPS_60?60:this.framerateType==h.default.FPS_120?120:this.framerateType==h.default.CUSTOM?this.maxFps:null},e}();t.default=p},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){};t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(80),o=function(){function e(){this.neatExtension=null}return e.prototype.activateNeatExtension=function(){null==this.neatExtension&&(this.neatExtension=new n.default)},e.prototype.deactivateNeatExtension=function(){this.neatExtension=null},e.prototype.toJSON=function(){var t=new e;return null!=this.neatExtension&&(t.neatExtension=this.neatExtension.toJSON()),t},e.fromJSON=function(t,i){if(null==t)return null;var o=new e;return null!=t.neatExtension&&(o.neatExtension=n.default.fromJSON(t.neatExtension,i)),o},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(11),o=function(){function e(){this.neatList=[],this.neatMap=null}return e.prototype.buildNeatMap=function(){this.neatMap=new Map;for(var e=0;e<this.neatList.length;e++){var t=this.neatList[e];this.neatMap.set(t.uid,t)}},e.prototype.addNeat=function(e){this.neatList.push(e)},e.prototype.getNeat=function(e){return this.neatMap.get(e)},e.prototype.toJSON=function(){var t=new e;t.neatList=new Array;for(var i=0;i<this.neatList.length;i++)t.neatList.push(this.neatList[i].toJSON());return t},e.fromJSON=function(t,i){if(null==t)return null;for(var o=new e,r=0;r<t.neatList.length;r++)o.neatList.push(n.default.fromJSON(t.neatList[r],i));return o},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(){this.objectsMap=new Map}return e.prototype.addObject=function(e){if(null==e.uid)throw new Error("Object uid is null");this.objectsMap.set(e.uid,e)},e.prototype.getObject=function(e){return null==e?null:this.objectsMap.get(e)},e.prototype.getOrAddObject=function(e,t){if(null==e)throw new Error("Object is null");if(null==e.uid)return null;var i=this.objectsMap.get(e.uid);if(null==i){var n=new t;n.uid=e.uid,this.objectsMap.set(n.uid,n),i=n}return i},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(83),o=i(29),r=i(30),a=i(0),s=i(85),l=i(2),u=i(20),d=i(86),c=i(27),h=i(61),p=function(){function e(e,t){this.vm=null,this.resourcesBaseUrl=null,this.util=new a.default,this.renderUtil=new c.default,this.levelService=new h.default,this.currentTool="SELECT",this.currentObjectType=null,this.previewCanvas=document.getElementById("previewCanvas"),this.ctxPreview=null,this.levelPreviewRenderer=null,this.currentPreviewCanvasDragObject=null,this.currentPreviewCanvasDragText=null,this.currentPreviewCanvasDragButton=null,this.selectedElements=[],this.dragOffsetX=0,this.dragOffsetY=0,this.lastDragX=0,this.lastDragY=0,this.draggingBackground=!1,this.previewCanvasMouseX=0,this.previewCanvasMouseY=0,this.addingObjectsOnMouseDrag=!1,this.lastObjectAddedOnMouseDrag="",this.firstObjectAddedOnMouseDrag={x:null,y:null},this.dragStartRealWorldX=0,this.dragStartRealWorldY=0,this.dragStartRealWorldObjectX=[],this.dragStartRealWorldObjectY=[],this.isDragging=!1,this.newOffsetX=0,this.newOffsetY=0,this.zoom=1,this.lockObjects=!1,this.gridConfig=new s.default,this.newGridConfig=null,this.moveToolConfig={moveObjects:!0,moveTexts:!0,moveButtons:!0},this.canvasCursorStyle="auto",this.currentElementTab="OBJECTS",this.vm=e,this.resourcesBaseUrl=t,this.levelPreviewRenderer=new n.default(t,e),null!=this.previewCanvas&&(this.ctxPreview=this.previewCanvas.getContext("2d")),this.vm.gameLoopBuilder.startLoopLevelEditor()}return e.prototype.listTools=function(){return[{code:"SELECT",name:"Select"},{code:"ADD_OBJECT",name:"Add object"},{code:"ADD_TEXT",name:"Add text"},{code:"ADD_BUTTON",name:"Add button"},{code:"MOVE_ELEMENT",name:"Move"},{code:"MOVE_SCENE",name:"Pan"}]},e.prototype.setCurrentTool=function(e){this.currentTool=e,"SELECT"==e||"ADD_OBJECT"==e?this.canvasCursorStyle="auto":"ADD_TEXT"==e?this.canvasCursorStyle="text":"ADD_BUTTON"==e?this.canvasCursorStyle="auto":"MOVE_ELEMENT"==e?this.canvasCursorStyle="move":"MOVE_SCENE"==e&&(this.canvasCursorStyle="grab"),"ADD_OBJECT"==e&&this.setDefaultCurrentObjectTypeIfNeeded()},e.prototype.setDefaultCurrentObjectTypeIfNeeded=function(){null==this.currentObjectType&&(0==this.vm.gameParamsJson.customObjectTypes.length&&this.vm.customObjectTypeController.addCustomObjectType(),this.currentObjectType=this.vm.gameParamsJson.customObjectTypes[0])},e.prototype.setCurrentObjectType=function(e){this.currentObjectType=this.vm.gameParamsJson.customObjectTypes.find((function(t){return t.uid==e})),this.setCurrentTool("ADD_OBJECT")},e.prototype.addInitialObject=function(e,t,i){var n=this.vm.levelController.currentLevelIndex;0==this.vm.gameParamsJson.customObjectTypes.length&&this.vm.customObjectTypeController.addCustomObjectType();var r=new o.default;r.uid=this.util.uid(),r.x=e,r.y=t,r.objectType=i,r.zIndex=0,r.inheritZIndex=!0,this.vm.gameParamsJson.levels[n].initialObjects.push(r),this.selectElement(r,null,null,!0)},e.prototype.selectElement=function(e,t,i,n){var o=new d.default(e,t,i);o.empty?n&&(this.selectedElements=[]):n?this.selectedElements=[o]:this.addNewSelectedElement(o)},e.prototype.addNewSelectedElement=function(e){for(var t=null,i=0;i<this.selectedElements.length;i++)this.selectedElements[i].uid==e.uid&&(t=i);null==t?this.selectedElements.push(e):this.selectedElements.splice(t,1)},e.prototype.convertToWorldPositionX=function(e){return e/this.zoom+this.newOffsetX},e.prototype.convertToWorldPositionY=function(e){return e/this.zoom+this.newOffsetY},e.prototype.updateDragStartRealWorld=function(e){this.dragStartRealWorldX=this.convertToWorldPositionX(e.x),this.dragStartRealWorldY=this.convertToWorldPositionY(e.y)},e.prototype.updateElementsDragStartRealWorld=function(){if(this.isCurrentDragElementSelected())for(var e=0;e<this.selectedElements.length;e++)this.dragStartRealWorldObjectX[e]=this.selectedElements[e].getX(),this.dragStartRealWorldObjectY[e]=this.selectedElements[e].getY();else this.dragStartRealWorldObjectX=[],this.dragStartRealWorldObjectY=[],null!=this.currentPreviewCanvasDragObject?(this.dragStartRealWorldObjectX[0]=this.currentPreviewCanvasDragObject.x,this.dragStartRealWorldObjectY[0]=this.currentPreviewCanvasDragObject.y):null!=this.currentPreviewCanvasDragText?(this.dragStartRealWorldObjectX[0]=this.currentPreviewCanvasDragText.x,this.dragStartRealWorldObjectY[0]=this.currentPreviewCanvasDragText.y):null!=this.currentPreviewCanvasDragButton&&(this.dragStartRealWorldObjectX[0]=this.currentPreviewCanvasDragButton.x,this.dragStartRealWorldObjectY[0]=this.currentPreviewCanvasDragButton.y)},e.prototype.deselectElements=function(){this.selectedElements=[]},e.prototype.getCurrentSelectedElement=function(){return 0==this.selectedElements.length?null:this.selectedElements[0]},e.prototype.editGridConfig=function(){this.newGridConfig=new s.default,this.newGridConfig.gridWidth=this.gridConfig.gridWidth,this.newGridConfig.gridHeight=this.gridConfig.gridHeight,this.newGridConfig.gridOriginX=this.gridConfig.gridOriginX,this.newGridConfig.gridOriginY=this.gridConfig.gridOriginY,this.newGridConfig.drawGrid=this.gridConfig.drawGrid,this.newGridConfig.snapToGrid=this.gridConfig.snapToGrid},e.prototype.updateGridConfig=function(){this.gridConfig=new s.default,this.gridConfig.gridWidth=Math.max(2,Number(this.newGridConfig.gridWidth)),this.gridConfig.gridHeight=Math.max(2,Number(this.newGridConfig.gridHeight)),this.gridConfig.gridOriginX=Number(this.newGridConfig.gridOriginX),this.gridConfig.gridOriginY=Number(this.newGridConfig.gridOriginY),this.gridConfig.drawGrid=this.newGridConfig.drawGrid,this.gridConfig.snapToGrid=this.newGridConfig.snapToGrid},e.prototype.updatePreviewCanvas=function(e,t){this.levelPreviewRenderer.currentMousePos=t},e.prototype.resizeCanvasPreview=function(){null!=this.previewCanvas&&(this.previewCanvas.style.width="100%",this.previewCanvas.style.height="75vh",this.previewCanvas.width=this.previewCanvas.offsetWidth,this.previewCanvas.height=this.previewCanvas.offsetHeight)},e.prototype.previewCanvasMouseWheel=function(e){this.zoom*=1-.001*e.deltaY,this.updateZoom()},e.prototype.buildInitialObjectToken=function(e,t,i){return i.uid+"|"+e+"|"+t},e.prototype.addObjectIfNotDuplicate=function(e,t,i){var n=e/this.zoom+this.levelPreviewRenderer.offsetX,o=t/this.zoom+this.levelPreviewRenderer.offsetY,r=null,a=null;this.gridConfig.snapToGrid?(r=this.util.snapToGrid(n,this.gridConfig.gridWidth,this.gridConfig.gridOriginX),a=this.util.snapToGrid(o,this.gridConfig.gridHeight,this.gridConfig.gridOriginY)):null==this.firstObjectAddedOnMouseDrag.x&&null==this.firstObjectAddedOnMouseDrag.y?(r=n,a=o):(r=this.util.snapToGrid(n,i.width,this.firstObjectAddedOnMouseDrag.x),a=this.util.snapToGrid(o,i.height,this.firstObjectAddedOnMouseDrag.y));var s=this.buildInitialObjectToken(r,a,i);if(this.lastObjectAddedOnMouseDrag!=s){for(var l=!1,u=this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex].initialObjects,d=0;d<u.length;d++){var c=u[d];c.objectType.uid==i.uid&&c.x==r&&c.y==a&&(l=!0)}l||(this.lastObjectAddedOnMouseDrag=s,this.addInitialObject(r,a,i),null==this.firstObjectAddedOnMouseDrag.x&&null==this.firstObjectAddedOnMouseDrag.y&&(this.firstObjectAddedOnMouseDrag={x:r,y:a}))}},e.prototype.isCurrentDragElementSelected=function(){var e=null;null!=this.currentPreviewCanvasDragObject?e=this.currentPreviewCanvasDragObject.uid:null!=this.currentPreviewCanvasDragText?e=this.currentPreviewCanvasDragText.uid:null!=this.currentPreviewCanvasDragButton&&(e=this.currentPreviewCanvasDragButton.uid);for(var t=0;t<this.selectedElements.length;t++)if(this.selectedElements[t].uid==e)return!0;return!1},e.prototype.previewCanvasMouseMove=function(e){var t=this.vm.gameParamsJson,i=t.canvasWidth,n=t.canvasHeight,o=this.util.getMousePos(this.previewCanvas,e,i,n);if("ADD_OBJECT"==this.currentTool&&this.addingObjectsOnMouseDrag&&this.addObjectIfNotDuplicate(o.x,o.y,this.currentObjectType),"MOVE_ELEMENT"==this.currentTool&&this.isDragging){var r=this.convertToWorldPositionX(o.x)-this.dragStartRealWorldX,a=this.convertToWorldPositionY(o.y)-this.dragStartRealWorldY;if(this.isCurrentDragElementSelected())for(var s=0;s<this.selectedElements.length;s++){var l=this.selectedElements[s],u=this.dragStartRealWorldObjectX[s]+r,d=this.dragStartRealWorldObjectY[s]+a;if(this.gridConfig.snapToGrid&&(u=this.util.snapToGrid(u,this.gridConfig.gridWidth,this.gridConfig.gridOriginX),d=this.util.snapToGrid(d,this.gridConfig.gridHeight,this.gridConfig.gridOriginY)),null!=l.initialObject){var c=l.initialObject;c.x=u,c.y=d}else if(null!=l.initialText){var h=l.initialText;h.x=u,h.y=d}else if(null!=l.initialButton){var p=l.initialButton;p.x=u,p.y=d}}else if(null!=this.currentPreviewCanvasDragObject){u=this.dragStartRealWorldObjectX[0]+r,d=this.dragStartRealWorldObjectY[0]+a;this.gridConfig.snapToGrid&&(u=this.util.snapToGrid(u,this.gridConfig.gridWidth,this.gridConfig.gridOriginX),d=this.util.snapToGrid(d,this.gridConfig.gridHeight,this.gridConfig.gridOriginY)),this.currentPreviewCanvasDragObject.x=u,this.currentPreviewCanvasDragObject.y=d}else if(null!=this.currentPreviewCanvasDragText){u=this.dragStartRealWorldObjectX[0]+r,d=this.dragStartRealWorldObjectY[0]+a;this.gridConfig.snapToGrid&&(u=this.util.snapToGrid(u,this.gridConfig.gridWidth,this.gridConfig.gridOriginX),d=this.util.snapToGrid(d,this.gridConfig.gridHeight,this.gridConfig.gridOriginY)),this.currentPreviewCanvasDragText.x=u,this.currentPreviewCanvasDragText.y=d}else if(null!=this.currentPreviewCanvasDragButton){u=this.dragStartRealWorldObjectX[0]+r,d=this.dragStartRealWorldObjectY[0]+a;this.gridConfig.snapToGrid&&(u=this.util.snapToGrid(u,this.gridConfig.gridWidth,this.gridConfig.gridOriginX),d=this.util.snapToGrid(d,this.gridConfig.gridHeight,this.gridConfig.gridOriginY)),this.currentPreviewCanvasDragButton.x=u,this.currentPreviewCanvasDragButton.y=d}}this.draggingBackground&&(this.levelPreviewRenderer.offsetX-=(Number(o.x)-this.lastDragX)/Number(this.zoom),this.levelPreviewRenderer.offsetY-=(Number(o.y)-this.lastDragY)/Number(this.zoom),this.newOffsetX=this.levelPreviewRenderer.offsetX,this.newOffsetY=this.levelPreviewRenderer.offsetY,this.lastDragX=o.x,this.lastDragY=o.y),this.updatePreviewCanvas(e,o),this.previewCanvasMouseX=Math.floor(o.x/this.zoom+this.levelPreviewRenderer.offsetX),this.previewCanvasMouseY=Math.floor(o.y/this.zoom+this.levelPreviewRenderer.offsetY)},e.prototype.updateCanvasOffset=function(){this.levelPreviewRenderer.offsetX=Number(this.newOffsetX),this.levelPreviewRenderer.offsetY=Number(this.newOffsetY)},e.prototype.resetCanvasOffset=function(){this.newOffsetX=0,this.newOffsetY=0,this.updateCanvasOffset()},e.prototype.updateZoom=function(){this.levelPreviewRenderer.zoom=Number(this.zoom)},e.prototype.resetZoom=function(){this.zoom=1,this.updateZoom()},e.prototype.zoomIn=function(){this.zoom*=1.2,this.updateZoom()},e.prototype.zoomOut=function(){this.zoom*=.8,this.updateZoom()},e.prototype.getObjectAtCanvasPosition=function(e,t){for(var i=this.renderUtil.convertToWorldPositionX(e,this.zoom,this.levelPreviewRenderer.offsetX),n=this.renderUtil.convertToWorldPositionY(t,this.zoom,this.levelPreviewRenderer.offsetY),o=this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex],r=0;r<o.initialObjects.length;r++){var a=o.initialObjects[r],s=a.angle*Math.PI/180,l=this.util.rotateCoordinates(i,n,-s,a.x,a.y);if(this.util.isInside(l.x,l.y,a.x-a.objectType.width/2,a.y-a.objectType.height/2,a.objectType.width,a.objectType.height))return a}return null},e.prototype.getTextAtMousePosition=function(e){for(var t=this.vm.gameParamsJson,i=t.canvasWidth,n=t.canvasHeight,o=this.util.getMousePos(this.previewCanvas,e,i,n),r=this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex],a=0;a<r.texts.length;a++){var s=r.texts[a];if(this.util.isInside(o.x+this.levelPreviewRenderer.offsetX*this.zoom,o.y+this.levelPreviewRenderer.offsetY*this.zoom,this.util.getTextLeftX(s,this.ctxPreview)*this.zoom,(s.y-s.fontSize/2)*this.zoom,this.util.measureText(s,this.ctxPreview)*this.zoom,s.fontSize*this.zoom))return s}return null},e.prototype.getButtonAtMousePosition=function(e){for(var t=this.vm.gameParamsJson,i=t.canvasWidth,n=t.canvasHeight,o=this.util.getMousePos(this.previewCanvas,e,i,n),r=this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex],a=0;a<r.buttons.length;a++){var s=r.buttons[a],l=s.x-s.width/2,u=s.y-s.height/2,d=s.width,c=s.height;if(this.util.isInside(o.x+this.levelPreviewRenderer.offsetX*this.zoom,o.y+this.levelPreviewRenderer.offsetY*this.zoom,l*this.zoom,u*this.zoom,d*this.zoom,c*this.zoom))return s}return null},e.prototype.previewCanvasMouseUp=function(e){this.isDragging=!1,this.currentPreviewCanvasDragObject=null,this.currentPreviewCanvasDragText=null,this.currentPreviewCanvasDragButton=null,this.draggingBackground=!1,this.addingObjectsOnMouseDrag=!1,this.lastObjectAddedOnMouseDrag="",this.firstObjectAddedOnMouseDrag={x:null,y:null}},e.prototype.previewCanvasMouseDown=function(e){var t=this.vm.gameParamsJson,i=t.canvasWidth,n=t.canvasHeight,o=this.util.getMousePos(this.previewCanvas,e,i,n);if(0==e.button){if("SELECT"==this.currentTool){var r=this.getObjectAtCanvasPosition(o.x,o.y),a=this.getTextAtMousePosition(e),s=this.getButtonAtMousePosition(e),l=e.ctrlKey||e.shiftKey;this.selectElement(r,a,s,!l)}if("MOVE_ELEMENT"==this.currentTool&&0==this.lockObjects){if(this.moveToolConfig.moveObjects)null!=(r=this.getObjectAtCanvasPosition(o.x,o.y))&&(this.currentPreviewCanvasDragObject=r,this.updateDragStartRealWorld(o),this.updateElementsDragStartRealWorld(),this.isDragging=!0);if(this.moveToolConfig.moveTexts)null!=(a=this.getTextAtMousePosition(e))&&(this.currentPreviewCanvasDragText=a,this.currentPreviewCanvasDragObject=null,this.updateDragStartRealWorld(o),this.updateElementsDragStartRealWorld(),this.isDragging=!0);if(this.moveToolConfig.moveButtons)null!=(s=this.getButtonAtMousePosition(e))&&(this.currentPreviewCanvasDragButton=s,this.dragOffsetX=o.x-s.x,this.dragOffsetY=o.y-s.y,this.updateDragStartRealWorld(o),this.updateElementsDragStartRealWorld(),this.isDragging=!0)}var u=null==this.currentPreviewCanvasDragObject&&null==this.currentPreviewCanvasDragText&&null==this.currentPreviewCanvasDragButton;if(("MOVE_SCENE"==this.currentTool||"MOVE_ELEMENT"==this.currentTool&&u)&&(this.draggingBackground=!0,this.lastDragX=o.x,this.lastDragY=o.y),"ADD_OBJECT"==this.currentTool){this.setDefaultCurrentObjectTypeIfNeeded();var d=this.currentObjectType;this.addObjectIfNotDuplicate(o.x,o.y,d),this.addingObjectsOnMouseDrag=!0}"ADD_TEXT"==this.currentTool&&this.addLevelText(o.x,o.y),"ADD_BUTTON"==this.currentTool&&this.addButton(o.x,o.y)}else 2==e.button&&(this.draggingBackground=!0,this.lastDragX=o.x,this.lastDragY=o.y)},e.prototype.selectObject=function(e){this.selectElement(e,null,null,!0),this.centerCameraAt(e.x,e.y)},e.prototype.centerCameraAt=function(e,t){this.levelPreviewRenderer.offsetX=e-this.previewCanvas.width/2/this.zoom,this.levelPreviewRenderer.offsetY=t-this.previewCanvas.height/2/this.zoom},e.prototype.addLevelText=function(e,t){var i=e/this.zoom+this.levelPreviewRenderer.offsetX,n=t/this.zoom+this.levelPreviewRenderer.offsetY,o=this.vm.levelController.currentLevelIndex;null==this.vm.gameParamsJson.levels[o].texts&&(this.vm.gameParamsJson.levels[o].texts=new Array);var a=new r.default;a.uid=this.util.uid(),a.text="Text",a.name="Text",a.align="center",a.color=new l.default(0,0,0),a.fontFamily="arial",a.fontSize=32,a.x=i,a.y=n,a.zIndex=0,a.alpha=1,a.angle=0,this.vm.gameParamsJson.levels[o].texts.push(a),this.selectElement(null,a,null,!0)},e.prototype.addButton=function(e,t){var i=e/this.zoom+this.levelPreviewRenderer.offsetX,n=t/this.zoom+this.levelPreviewRenderer.offsetY,o=this.vm.levelController.currentLevelIndex,r=new u.default;r.backgroundColor=new l.default(255,255,255),r.backgroundColorMouseOver=new l.default(255,255,255),r.borderColor=new l.default(0,0,0),r.borderColorMouseOver=new l.default(0,0,0),r.borderRadius=5,r.borderSize=1,r.borderSizeMouseOver=1,r.fontSize=14,r.height=30,r.name="button",r.text="button",r.textColor=new l.default(0,0,0),r.uid=this.util.uid(),r.width=100,r.x=i,r.y=n,this.vm.gameParamsJson.levels[o].buttons.push(r),this.selectElement(null,null,r,!0)},e.prototype.editSelectedElement=function(){var e=this.selectedElements[0];null!=e.initialObject&&this.vm.editCustomObject(e.initialObject),null!=e.initialText&&this.vm.editLevelText(e.initialText),null!=e.initialButton&&this.vm.editButton(e.initialButton)},e.prototype.cloneSelectedObject=function(){if(1==this.selectedElements.length){var e=this.selectedElements[0];if(null!=e.initialObject)(t=new o.default).uid=this.util.uid(),t.x=e.initialObject.x+e.initialObject.objectType.width,t.y=e.initialObject.y,t.objectType=e.initialObject.objectType,t.angle=e.initialObject.angle,this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex].initialObjects.push(t),this.selectElement(t,null,null,!0);else if(null!=e.initialText){(t=new r.default).uid=this.util.uid(),t.x=e.initialText.x+e.initialText.fontSize,t.y=e.initialText.y+e.initialText.fontSize,t.align=e.initialText.align,t.fontFamily=e.initialText.fontFamily,t.fontSize=e.initialText.fontSize,t.text=e.initialText.text,t.name=e.initialText.name+"(2)",t.color=new l.default(e.initialText.color.red,e.initialText.color.green,e.initialText.color.blue),this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex].texts.push(t),this.selectElement(null,t,null,!0)}else if(null!=e.initialButton){var t;(t=new u.default).uid=this.util.uid(),t.x=e.initialButton.x+e.initialButton.height,t.y=e.initialButton.y+e.initialButton.height,t.name=e.initialButton.name+"(2)",t.text=e.initialButton.text,t.borderRadius=e.initialButton.borderRadius,t.borderSize=e.initialButton.borderSize,t.borderSizeMouseOver=e.initialButton.borderSizeMouseOver,t.fontSize=e.initialButton.fontSize,t.width=e.initialButton.width,t.height=e.initialButton.height,t.textColor=e.initialButton.textColor,t.borderColorMouseOver=e.initialButton.borderColorMouseOver,t.borderColor=e.initialButton.borderColor,t.backgroundColorMouseOver=e.initialButton.backgroundColorMouseOver,t.backgroundColor=e.initialButton.backgroundColor,this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex].buttons.push(t),this.selectElement(null,null,t,!0)}}},e.prototype.deleteElement=function(e){var t=this.vm.gameParamsJson.levels[this.vm.levelController.currentLevelIndex];if(null!=e.initialObject)this.levelService.deleteInitialObject(t,e.initialObject);else if(null!=e.initialText){for(var i=0;i<t.texts.length;i++)if(t.texts[i]==e.initialText)return void t.texts.splice(i,1)}else if(null!=e.initialButton)for(i=0;i<t.buttons.length;i++)if(t.buttons[i]==e.initialButton)return void t.buttons.splice(i,1)},e.prototype.deleteSelectedElement=function(){var e=this.selectedElements[0];this.deleteElement(e),this.deselectElements()},e.prototype.deleteAllSelectedElements=function(){for(var e=0;e<this.selectedElements.length;e++)this.deleteElement(this.selectedElements[e]);this.deselectElements()},e.prototype.drawPreview=function(){this.previewCanvas=document.getElementById("previewCanvas"),null!=this.previewCanvas?this.ctxPreview=this.previewCanvas.getContext("2d"):this.ctxPreview=null,null!=this.ctxPreview&&this.levelPreviewRenderer.render(this.vm.levelController.oldLevel,this.vm.gameParamsJson,this.ctxPreview,this)},e}();t.default=p},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(84),r=i(0),a=i(15),s=i(27),l=i(29),u=i(14),d=i(26),c=i(39),h=function(){function e(e,t){this.imageLoader=null,this.util=new r.default,this.renderUtil=new s.default,this.currentMousePos=null,this.offsetX=0,this.offsetY=0,this.zoom=1,this.elementsToDraw=new Map,this.sortFunction=function(e,t){return e-t},this.imageLoader=new o.default(e,t)}return e.prototype.renderLevelBorder=function(e,t,i){e.save(),e.beginPath(),e.rect(-this.offsetX*this.zoom,-this.offsetY*this.zoom,t*this.zoom,i*this.zoom),e.strokeStyle="#333333",e.lineWidth=3,e.globalAlpha=.5,e.stroke(),e.restore()},e.prototype.renderTextDefinitionBorder=function(e,t){var i=this.util.measureText(e,t),o=e.x-i/2,r=e.y-e.fontSize/2,a=i,s=e.fontSize;"left"==e.align?o+=a/2:"right"==e.align&&(o-=a/2),t.beginPath(),t.rect(o*this.zoom-this.offsetX*this.zoom,r*this.zoom-this.offsetY*this.zoom,a*this.zoom,s*this.zoom),t.closePath(),t.strokeStyle=this.util.buildFillStyleFromColor(new n.default(0,0,255,100)),t.lineWidth=2,t.stroke()},e.prototype.renderTextBorder=function(e,t,i){if(null!=this.currentMousePos){for(var o=0;o<t.selectedElements.length;o++){var r=t.selectedElements[o];null!=r.initialText&&this.renderTextDefinitionBorder(r.initialText,i)}for(var a=e.texts,s=0;s<a.length;s++){var l=a[s],u=this.util.measureText(l,i),d=l.x-u/2,c=l.y-l.fontSize/2,h=u,p=l.fontSize;"left"==l.align?d+=h/2:"right"==l.align&&(d-=h/2),this.util.isInside(this.currentMousePos.x+this.offsetX*this.zoom,this.currentMousePos.y+this.offsetY*this.zoom,d*this.zoom,c*this.zoom,h*this.zoom,p*this.zoom)&&(i.beginPath(),i.rect(d*this.zoom-this.offsetX*this.zoom,c*this.zoom-this.offsetY*this.zoom,h*this.zoom,p*this.zoom),i.closePath(),i.strokeStyle=this.util.buildFillStyleFromColor(new n.default(0,0,255,50)),i.lineWidth=2,i.stroke())}}},e.prototype.renderButtonBorder=function(e,t,i){if(null!=this.currentMousePos){for(var o=0;o<t.selectedElements.length;o++){var r=t.selectedElements[o];if(null!=r.initialButton){var a=(h=r.initialButton).x-h.width/2,s=h.y-h.height/2,l=h.width,u=h.height;i.beginPath(),i.rect(a*this.zoom-this.offsetX*this.zoom-2,s*this.zoom-this.offsetY*this.zoom-2,l*this.zoom+4,u*this.zoom+4),i.closePath(),i.strokeStyle=this.util.buildFillStyleFromColor(new n.default(0,0,255,100)),i.lineWidth=2,i.stroke()}}for(var d=e.buttons,c=0;c<d.length;c++){var h;a=(h=d[c]).x-h.width/2,s=h.y-h.height/2,l=h.width,u=h.height;this.util.isInside(this.currentMousePos.x+this.offsetX*this.zoom,this.currentMousePos.y+this.offsetY*this.zoom,a*this.zoom,s*this.zoom,l*this.zoom,u*this.zoom)&&(i.beginPath(),i.rect(a*this.zoom-this.offsetX*this.zoom-2,s*this.zoom-this.offsetY*this.zoom-2,l*this.zoom+4,u*this.zoom+4),i.closePath(),i.strokeStyle=this.util.buildFillStyleFromColor(new n.default(0,0,255,50)),i.lineWidth=2,i.stroke())}}},e.prototype.resetCanvas=function(e){e.setTransform(1,0,0,1,0,0)},e.prototype.renderObjectsBorder=function(e,t){if(null!=this.currentMousePos){for(var i=0;i<e.selectedElements.length;i++){var o=e.selectedElements[i];null!=o.initialObject&&this.renderObjectBorder(o.initialObject,t,new n.default(0,0,255,100))}var r=e.getObjectAtCanvasPosition(this.currentMousePos.x,this.currentMousePos.y);null!=r&&this.renderObjectBorder(r,t,new n.default(0,0,255,50))}},e.prototype.renderObjectBorder=function(e,t,i){var n=e.x-e.objectType.width/2,o=e.y-e.objectType.height/2,r=e.objectType.width,a=e.objectType.height;this.rotateCanvasAt(t,this.util.degreesToRadians(e.angle),this.renderUtil.convertToCanvasPositionX(e.x,this.zoom,this.offsetX),this.renderUtil.convertToCanvasPositionY(e.y,this.zoom,this.offsetY)),t.beginPath(),t.rect(n*this.zoom-this.offsetX*this.zoom,o*this.zoom-this.offsetY*this.zoom,r*this.zoom,a*this.zoom),t.closePath(),t.strokeStyle=this.util.buildFillStyleFromColor(i),t.lineWidth=2,t.stroke(),this.resetCanvas(t)},e.prototype.drawElements=function(e,t){var i=new Array;this.elementsToDraw.forEach((function(e,t){i.push(t)})),i.sort(this.sortFunction);for(var n=0;n<i.length;n++){var o=i[n];this.drawElementsByZIndex(o,e,t)}},e.prototype.drawElementsByZIndex=function(e,t,i){var n=this.elementsToDraw.get(e);if(null!=n)for(var o=0;o<n.length;o++){var r=n[o];if(r instanceof l.default){var a=r;this.drawCustomObject(a,i,this.offsetX,this.offsetY,this.zoom)}else if(r instanceof c.default){var s=r;this.drawInitialConstraint(s,i,this.offsetX,this.offsetY,this.zoom)}}},e.prototype.render=function(e,t,i,n){this.elementsToDraw=new Map,i.clearRect(0,0,n.previewCanvas.width,n.previewCanvas.height),null!=e&&null!=t&&(this.drawBackground(e,i,n),this.renderLevelBorder(i,t.canvasWidth,t.canvasHeight),this.addObjectsToDraw(e),this.addConstraintsToDraw(e),this.drawElements(e,i),this.renderTexts(e,i),this.renderButtons(i,e),this.renderObjectsBorder(n,i),this.renderTextBorder(e,n,i),this.renderButtonBorder(e,n,i)),n.gridConfig.drawGrid&&this.renderGrid(i,n),"ADD_OBJECT"==n.currentTool&&null!=n.currentObjectType&&this.drawObjectGhost(n.currentObjectType,i,this.currentMousePos.x,this.currentMousePos.y,this.zoom,n)},e.prototype.renderTexts=function(e,t){var i=e.texts;if(null!=i)for(var n=0;n<i.length;n++){var o=this.util.buildFillStyleFromColor(i[n].color),r=i[n].fontSize*this.zoom+"px "+i[n].fontFamily;t.globalAlpha=i[n].alpha,this.util.drawText(t,i[n].text,i[n].x*this.zoom-this.offsetX*this.zoom,i[n].y*this.zoom-this.offsetY*this.zoom,r,o,i[n].align,"middle"),t.globalAlpha=1}},e.prototype.addObjectToDraw=function(e){var t=e.inheritZIndex?e.objectType.zIndex:e.zIndex,i=this.elementsToDraw.get(t);null==i&&(this.elementsToDraw.set(t,new Array),i=this.elementsToDraw.get(t)),i.push(e)},e.prototype.addObjectsToDraw=function(e){for(var t=e.initialObjects,i=0;i<t.length;i++){var n=t[i];this.addObjectToDraw(n)}},e.prototype.addConstraintsToDraw=function(e){for(var t=e.initialConstraints,i=0;i<t.length;i++){var n=t[i];this.addConstraintToDraw(n)}},e.prototype.addConstraintToDraw=function(e){if(e.visible){var t=e.zIndex,i=this.elementsToDraw.get(t);null==i&&(this.elementsToDraw.set(t,new Array),i=this.elementsToDraw.get(t)),i.push(e)}},e.prototype.drawInitialConstraint=function(e,t,i,n,o){var r=e.object1.x+e.x1,a=e.object1.y+e.y1,s=e.object2.x+e.x2,l=e.object2.y+e.y2,u=this.util.rotateCoordinates(r,a,this.util.degreesToRadians(e.object1.angle),e.object1.x,e.object1.y),d=this.util.rotateCoordinates(s,l,this.util.degreesToRadians(e.object2.angle),e.object2.x,e.object2.y),c=this.renderUtil.convertToCanvasPositionX(u.x,o,i),h=this.renderUtil.convertToCanvasPositionY(u.y,o,n),p=this.renderUtil.convertToCanvasPositionX(d.x,o,i),m=this.renderUtil.convertToCanvasPositionY(d.y,o,n),f=e.color;t.save(),t.globalAlpha=e.alpha,t.strokeStyle=this.buildFillStyleFromColor(f),t.lineWidth=e.lineWidth*o,t.beginPath(),t.moveTo(c,h),t.lineTo(p,m),t.stroke(),t.restore()},e.prototype.drawCustomObject=function(e,t,i,n,o){var r=this.imageLoader.loadAndGetImage(e.objectType.image.imageId);if(this.rotateCanvasAt(t,this.util.degreesToRadians(e.angle),this.renderUtil.convertToCanvasPositionX(e.x,this.zoom,this.offsetX),this.renderUtil.convertToCanvasPositionY(e.y,this.zoom,this.offsetY)),e.objectType.renderType==u.default.IMAGE)null!=r&&t.drawImage(r,e.x*o-i*o-e.objectType.width/2*o,e.y*o-n*o-e.objectType.height/2*o,e.objectType.width*o,e.objectType.height*o);else if(e.objectType.renderType==u.default.CIRCLE){var a=e.objectType.width/2,s=e.objectType.height/2;e.objectType.drawType!=d.default.STROKE&&e.objectType.drawType!=d.default.FILL_AND_STROKE||(a-=e.objectType.borderSize/2,s-=e.objectType.borderSize/2),t.beginPath(),t.ellipse(e.x*o-i*o,e.y*o-n*o,a*o,s*o,0,0,2*Math.PI),t.closePath(),e.objectType.drawType==d.default.FILL?(t.fillStyle=this.buildFillStyleFromColor(e.objectType.color),t.fill()):e.objectType.drawType==d.default.STROKE?(t.strokeStyle=this.buildFillStyleFromColor(e.objectType.borderColor),t.lineWidth=e.objectType.borderSize*o,t.stroke()):e.objectType.drawType==d.default.FILL_AND_STROKE&&(t.fillStyle=this.buildFillStyleFromColor(e.objectType.color),t.strokeStyle=this.buildFillStyleFromColor(e.objectType.borderColor),t.lineWidth=e.objectType.borderSize*o,t.fill(),t.stroke())}else if(e.objectType.renderType==u.default.RECTANGLE){a=e.objectType.width/2,s=e.objectType.height/2;e.objectType.drawType!=d.default.STROKE&&e.objectType.drawType!=d.default.FILL_AND_STROKE||(a-=e.objectType.borderSize/2,s-=e.objectType.borderSize/2),t.beginPath(),t.rect(e.x*o-i*o-a*o,e.y*o-n*o-s*o,2*a*o,2*s*o),t.closePath(),e.objectType.drawType==d.default.FILL?(t.fillStyle=this.buildFillStyleFromColor(e.objectType.color),t.fill()):e.objectType.drawType==d.default.STROKE?(t.strokeStyle=this.buildFillStyleFromColor(e.objectType.borderColor),t.lineWidth=e.objectType.borderSize*o,t.stroke()):e.objectType.drawType==d.default.FILL_AND_STROKE&&(t.fillStyle=this.buildFillStyleFromColor(e.objectType.color),t.strokeStyle=this.buildFillStyleFromColor(e.objectType.borderColor),t.lineWidth=e.objectType.borderSize*o,t.fill(),t.stroke())}this.resetCanvas(t)},e.prototype.buildFillStyleFromColor=function(e){return this.util.buildFillStyleFromColor(e)},e.prototype.drawObjectGhost=function(e,t,i,n,o,r){if(r.gridConfig.snapToGrid&&(i=this.util.snapToGrid(i,r.gridConfig.gridWidth*o,(r.gridConfig.gridOriginX-this.offsetX)*o),n=this.util.snapToGrid(n,r.gridConfig.gridHeight*o,(r.gridConfig.gridOriginY-this.offsetY)*o)),e.renderType==u.default.IMAGE){var a=this.imageLoader.loadAndGetImage(e.image.imageId);t.save(),t.globalAlpha=.5,null!=a&&t.drawImage(a,i-e.width/2*o,n-e.height/2*o,e.width*o,e.height*o),t.restore()}else if(e.renderType==u.default.CIRCLE){var s=e.width/2,l=e.height/2;e.drawType!=d.default.STROKE&&e.drawType!=d.default.FILL_AND_STROKE||(s-=e.borderSize/2,l-=e.borderSize/2),t.save(),t.globalAlpha=.5,t.beginPath(),t.ellipse(i,n,s*o,l*o,0,0,2*Math.PI),t.closePath(),e.drawType==d.default.FILL?(t.fillStyle=this.buildFillStyleFromColor(e.color),t.fill()):e.drawType==d.default.STROKE?(t.strokeStyle=this.buildFillStyleFromColor(e.borderColor),t.lineWidth=e.borderSize*o,t.stroke()):e.drawType==d.default.FILL_AND_STROKE&&(t.fillStyle=this.buildFillStyleFromColor(e.color),t.strokeStyle=this.buildFillStyleFromColor(e.borderColor),t.lineWidth=e.borderSize*o,t.fill(),t.stroke()),t.restore()}else if(e.renderType==u.default.RECTANGLE){s=e.width/2,l=e.height/2;e.drawType!=d.default.STROKE&&e.drawType!=d.default.FILL_AND_STROKE||(s-=e.borderSize/2,l-=e.borderSize/2),t.save(),t.globalAlpha=.5,t.beginPath(),t.rect(i-s*o,n-l*o,2*s*o,2*l*o),t.closePath(),e.drawType==d.default.FILL?(t.fillStyle=this.buildFillStyleFromColor(e.color),t.fill()):e.drawType==d.default.STROKE?(t.strokeStyle=this.buildFillStyleFromColor(e.borderColor),t.lineWidth=e.borderSize*o,t.stroke()):e.drawType==d.default.FILL_AND_STROKE&&(t.fillStyle=this.buildFillStyleFromColor(e.color),t.strokeStyle=this.buildFillStyleFromColor(e.borderColor),t.lineWidth=e.borderSize*o,t.fill(),t.stroke()),t.restore()}},e.prototype.renderGrid=function(e,t){e.strokeStyle="#999999",e.lineWidth=1,e.globalAlpha=.5;var i=t.gridConfig.gridWidth,n=t.gridConfig.gridHeight,o=(-this.offsetX+t.gridConfig.gridOriginX)%i,r=(-this.offsetY+t.gridConfig.gridOriginY)%n,a=(o+i+t.previewCanvas.width)/this.zoom,s=(r+n+t.previewCanvas.height)/this.zoom,l=i*this.zoom,u=n*this.zoom;if(l>3)for(var d=o;d<a;d+=i)e.beginPath(),e.moveTo(d*this.zoom+.5*this.zoom,0+.5*this.zoom),e.lineTo(d*this.zoom+.5*this.zoom,t.previewCanvas.height+.5*this.zoom),e.stroke();if(u>3)for(var c=r;c<s;c+=n)e.beginPath(),e.moveTo(0+.5*this.zoom,c*this.zoom+.5*this.zoom),e.lineTo(t.previewCanvas.width+.5*this.zoom,c*this.zoom+.5*this.zoom),e.stroke();e.globalAlpha=1},e.prototype.drawBackground=function(e,t,i){if(e.backgroundType==a.default.SOLID_COLOR){var n=e.backgroundColor;return t.fillStyle=this.util.buildFillStyleFromColor(n),void t.fillRect(0,0,i.previewCanvas.width,i.previewCanvas.height)}var o=this.imageLoader.loadAndGetImage(e.backgroundImage.imageId);if(null!=o){var r=e.backgroundImageWidth,s=e.backgroundImageHeight,l=-this.offsetX%r,u=-this.offsetY%s;u>0&&(u-=s),l>0&&(l-=r);for(var d=l,c=u,h=i.previewCanvas.height,p=i.previewCanvas.width;c<h/this.zoom+s;){for(;d<p/this.zoom+r;)t.drawImage(o,d*this.zoom,c*this.zoom,r*this.zoom+1,s*this.zoom+1),d+=r;d=l,c+=s}}},e.prototype.renderButtons=function(e,t){for(var i=0;i<t.buttons.length;i++){var n=t.buttons[i];this.renderButton(e,n)}},e.prototype.renderButton=function(e,t){e.fillStyle=this.util.buildFillStyleFromColor(t.backgroundColor),e.strokeStyle=this.util.buildFillStyleFromColor(t.borderColor),e.lineWidth=t.borderSize;var i=t.borderRadius,n=t.fontSize*this.zoom+"px Arial",o=this.util.buildFillStyleFromColor(t.textColor);this.renderUtil.drawRoundRect(e,t.x*this.zoom-t.width/2*this.zoom-this.offsetX*this.zoom,t.y*this.zoom-t.height/2*this.zoom-this.offsetY*this.zoom,t.width*this.zoom,t.height*this.zoom,i*this.zoom,!0,!0),this.util.drawText(e,t.text,t.x*this.zoom-this.offsetX*this.zoom,t.y*this.zoom+1*this.zoom-this.offsetY*this.zoom,n,o,"center","middle")},e.prototype.rotateCanvasAt=function(e,t,i,n){0!=t&&(e.translate(i,n),e.rotate(t),e.translate(-i,-n))},e}();t.default=h},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=function(){function e(e,t){this.imageIds=new Set,this.images=new Map,this.numImagesLoaded=0,this.resourcesBaseUrl=null,this.actionTemplateController=null,this.util=new n.default,this.resourcesBaseUrl=e,this.actionTemplateController=t}return e.prototype.loadImage=function(e,t){if(this.imageIds.has(e))null!=t&&t();else{this.imageIds.add(e);var i=this,n=new Image;if(n.onload=function(){i.numImagesLoaded++,null!=t&&t()},e.startsWith("custom:")){var o=e.substring(7),r=this.util.findElementByUid(this.actionTemplateController.gameParamsJson.customImages,o);n.src=r.imageData}else n.src=this.resourcesBaseUrl+e;this.images.set(e,n)}},e.prototype.loadImages=function(e,t){if(0!=e.size)for(var i=Array.from(e),n=0;n<i.length;n++){var o=i[n];this.loadImage(o,t)}else t()},e.prototype.getImage=function(e){return this.images.get(e)},e.prototype.loadAndGetImage=function(e){return this.loadImage(e,null),this.images.get(e)},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){this.drawGrid=!0,this.snapToGrid=!1,this.gridWidth=20,this.gridHeight=20,this.gridOriginX=0,this.gridOriginY=0};t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e,t,i){this.initialObject=null,this.initialText=null,this.initialButton=null,this.empty=!1,null!=e?(this.initialObject=e,this.uid=e.uid):null!=t?(this.initialText=t,this.uid=t.uid):null!=i?(this.initialButton=i,this.uid=i.uid):this.empty=!0}return e.prototype.getX=function(){return null!=this.initialObject?this.initialObject.x:null!=this.initialText?this.initialText.x:null!=this.initialButton?this.initialButton.x:null},e.prototype.getY=function(){return null!=this.initialObject?this.initialObject.y:null!=this.initialText?this.initialText.y:null!=this.initialButton?this.initialButton.y:null},e}();t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=i(43),r=i(45),a=i(46),s=i(88),l=function(){function e(e){this.errorMessage=null,this.errorField=null,this.newCustomObjectTypeBehaviour=null,this.oldCustomObjectTypeBehaviour=null,this.customObjectTypeBehaviourTypes=[{code:r.default.PLATFORMER_PLAYER,name:"Platformer player",description:"Walk and jump on platforms."},{code:r.default.KEYBOARD_MOVEMENT,name:"Keyboard movement",description:"Move the object with keyboard keys."},{code:r.default.MOUSE_MOVEMENT,name:"Mouse movement",description:"Move the object with mouse."},{code:r.default.GAMEPAD_MOVEMENT,name:"Gamepad movement",description:"Move the object with gamepad."},{code:r.default.STOP_ON_OBJECT,name:"Stop on object",description:"Make object stop after colliding with another object."},{code:r.default.BOUNCE_ON_OBJECT,name:"Bounce on object",description:"Make object bounce after colliding with another object."},{code:r.default.JUMP_ON_PLATFORM,name:"Jump on platform",description:"Allow object to jump on another object."}],this.mouseMovementTypes=[{code:s.default.SET_POSITION_BY_MOUSE_POSITION,name:"Set position by mouse position"},{code:s.default.SET_SPEED_BY_MOUSE_DISTANCE,name:"Set speed by mouse distance"},{code:s.default.SET_ACCELERATION_BY_MOUSE_DISTANCE,name:"Set acceleration by mouse distance"}],this.gamepadMovementTypes=[{code:a.default.SET_SPEED,name:"Set speed"},{code:a.default.SET_ACCELERATION,name:"Set acceleration"}],this.mainController=e,this.util=new n.default}return e.prototype.goToScreenAddBehaviour=function(){this.mainController.setCurrentScreen("ADD_BEHAVIOUR")},e.prototype.closeAddBehaviourScreen=function(){this.mainController.setCurrentScreen("CUSTOM_OBJECT_TYPE_BEHAVIOURS")},e.prototype.addCustomObjectTypeBehaviour=function(e){var t=new o.default;return t.uid=this.util.uid(),t.type=this.customObjectTypeBehaviourTypes.find((function(t){return t.code==e})).code,this.setDefaultValuesForBehaviour(t),this.getCurrentObjectType().behaviours.push(t),t},e.prototype.setDefaultValuesForBehaviour=function(e){e.type==r.default.PLATFORMER_PLAYER?(e.maxSpeed=300,e.timeToReachMaxSpeed=.5,e.timeToStop=.5,e.maxFallSpeed=1200,e.jumpSpeed=360,e.jumpSustainTime=.2,e.allowDoubleJumps=!1,e.maxJumps=2,e.platformObjectTypes=[],e.moveLeftKeys=["ArrowLeft","KeyA"],e.moveRightKeys=["ArrowRight","KeyD"],e.jumpKeys=["ArrowUp","KeyW"]):e.type==r.default.MOUSE_MOVEMENT?(e.mouseMovementType=s.default.SET_POSITION_BY_MOUSE_POSITION,e.factorX=1,e.factorY=1):e.type==r.default.KEYBOARD_MOVEMENT?(e.keyboardMovementDirections="8_DIRECTIONS",e.keyboardMovementKeys="ARROW_KEYS_OR_WASD_KEYS",e.keyboardMovementType="SET_SPEED_ON_KEY_DOWN",e.speedX=200,e.speedY=200,e.accelerationX=300,e.accelerationY=300):e.type==r.default.STOP_ON_OBJECT||(e.type==r.default.BOUNCE_ON_OBJECT?e.bounceSpeed=200:e.type==r.default.JUMP_ON_PLATFORM?(e.jumpSpeed=360,e.jumpKey="ArrowUp"):e.type==r.default.GAMEPAD_MOVEMENT&&(e.gamepadMovementType=a.default.SET_SPEED,e.gamepadIndex=0,e.gamepadXAxisIndex=0,e.gamepadYAxisIndex=1,e.maxSpeed=300,e.maxAcceleration=180))},e.prototype.deleteCustomObjectTypeBehaviour=function(e,t){this.mainController.gameParamsJson.customObjectTypes[this.mainController.customObjectTypeController.currentCustomObjectTypeIndex].behaviours.splice(t,1)},e.prototype.editCustomObjectTypeBehaviour=function(e){this.errorMessage=null,this.mainController.setCurrentScreen("EDIT_CUSTOM_OBJECT_TYPE_BEHAVIOUR"),this.oldCustomObjectTypeBehaviour=e,this.newCustomObjectTypeBehaviour=this.util.cloneObject(e)},e.prototype.validate=function(){if(this.errorMessage=null,this.errorField=null,this.newCustomObjectTypeBehaviour.type==r.default.KEYBOARD_MOVEMENT){if(null==this.newCustomObjectTypeBehaviour.keyboardMovementDirections)return this.errorMessage='Field "Directions" is required.',!1;if(null==this.newCustomObjectTypeBehaviour.keyboardMovementKeys)return this.errorMessage='Field "Keyboard keys" is required.',!1;if(null==this.newCustomObjectTypeBehaviour.keyboardMovementType)return this.errorMessage='Field "Movement type" is required.',!1;if("SET_SPEED_ON_KEY_DOWN"==this.newCustomObjectTypeBehaviour.keyboardMovementType&&("8_DIRECTIONS"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections||"LEFT_AND_RIGHT"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections)&&this.util.isEmpty(this.newCustomObjectTypeBehaviour.speedX))return this.errorMessage='Field "speedX" is required.',this.errorField="speedX",!1;if("SET_SPEED_ON_KEY_DOWN"==this.newCustomObjectTypeBehaviour.keyboardMovementType&&("8_DIRECTIONS"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections||"UP_AND_DOWN"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections)&&this.util.isEmpty(this.newCustomObjectTypeBehaviour.speedY))return this.errorMessage='Field "speedY" is required.',this.errorField="speedY",!1;if("SET_ACCELERATION_ON_KEY_DOWN"==this.newCustomObjectTypeBehaviour.keyboardMovementType&&("8_DIRECTIONS"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections||"LEFT_AND_RIGHT"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections)&&this.util.isEmpty(this.newCustomObjectTypeBehaviour.accelerationX))return this.errorMessage='Field "accelerationX" is required.',this.errorField="accelerationX",!1;if("SET_ACCELERATION_ON_KEY_DOWN"==this.newCustomObjectTypeBehaviour.keyboardMovementType&&("8_DIRECTIONS"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections||"UP_AND_DOWN"==this.newCustomObjectTypeBehaviour.keyboardMovementDirections)&&this.util.isEmpty(this.newCustomObjectTypeBehaviour.accelerationY))return this.errorMessage='Field "accelerationY" is required.',this.errorField="accelerationY",!1}else if(this.newCustomObjectTypeBehaviour.type==r.default.MOUSE_MOVEMENT){if(null==this.newCustomObjectTypeBehaviour.mouseMovementType)return this.errorMessage='Field "Mouse movement type" is required.',this.errorField="mouseMovementType",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.factorX))return this.errorMessage='Field "factorX" is required.',this.errorField="factorX",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.factorY))return this.errorMessage='Field "factorY" is required.',this.errorField="factorY",!1}else if(this.newCustomObjectTypeBehaviour.type==r.default.STOP_ON_OBJECT){if(null==this.newCustomObjectTypeBehaviour.objectSelector)return this.errorMessage='Field "Object type" is required.',this.errorField="objectSelector",!1;var e=this.mainController.gameParamsJson.customObjectTypes[this.mainController.customObjectTypeController.currentCustomObjectTypeIndex];if(this.newCustomObjectTypeBehaviour.objectSelector==e.uid)return this.errorMessage='"Object type" cannot be the same as the current object type.',this.errorField="objectSelector",!1}else if(this.newCustomObjectTypeBehaviour.type==r.default.BOUNCE_ON_OBJECT){if(null==this.newCustomObjectTypeBehaviour.objectSelector)return this.errorMessage='Field "Object type" is required.',this.errorField="objectSelector",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.bounceSpeed))return this.errorMessage='Field "Bounce speed" is required.',this.errorField="bounceSpeed",!1;e=this.mainController.gameParamsJson.customObjectTypes[this.mainController.customObjectTypeController.currentCustomObjectTypeIndex];if(this.newCustomObjectTypeBehaviour.objectSelector==e.uid)return this.errorMessage='"Object type" cannot be the same as the current object type.',this.errorField="objectSelector",!1}else if(this.newCustomObjectTypeBehaviour.type==r.default.JUMP_ON_PLATFORM){if(null==this.newCustomObjectTypeBehaviour.objectSelector)return this.errorMessage="Platform object type is required.",this.errorField="objectSelector",!1;e=this.mainController.gameParamsJson.customObjectTypes[this.mainController.customObjectTypeController.currentCustomObjectTypeIndex];if(this.newCustomObjectTypeBehaviour.objectSelector==e.uid)return this.errorMessage='"Platform object type" cannot be the same as the current object type.',this.errorField="objectSelector",!1;if(null==this.newCustomObjectTypeBehaviour.jumpKey)return this.errorMessage='Field "Jump key" is required.',this.errorField="jumpKey",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.jumpSpeed))return this.errorMessage='Field "Jump speed" is required.',this.errorField="jumpSpeed",!1}else if(this.newCustomObjectTypeBehaviour.type==r.default.PLATFORMER_PLAYER){if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.maxSpeed))return this.errorMessage='Field "Max speed" is required.',this.errorField="maxSpeed",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.maxSpeed)))return this.errorMessage='Field "Max speed" must be a number.',this.errorField="maxSpeed",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.timeToReachMaxSpeed))return this.errorMessage='Field "Time to reach max speed" is required.',this.errorField="timeToReachMaxSpeed",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.timeToReachMaxSpeed)))return this.errorMessage='Field "Time to reach max speed" must be a number.',this.errorField="timeToReachMaxSpeed",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.timeToStop))return this.errorMessage='Field "Time to stop" is required.',this.errorField="timeToStop",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.timeToStop)))return this.errorMessage='Field "Time to stop" must be a number.',this.errorField="timeToStop",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.maxFallSpeed))return this.errorMessage='Field "Max fall speed" is required.',this.errorField="maxFallSpeed",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.maxFallSpeed)))return this.errorMessage='Field "Max fall speed" must be a number.',this.errorField="maxFallSpeed",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.jumpSpeed))return this.errorMessage='Field "Jump speed" is required.',this.errorField="jumpSpeed",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.jumpSpeed)))return this.errorMessage='Field "Jump speed" must be a number.',this.errorField="jumpSpeed",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.jumpSustainTime))return this.errorMessage='Field "Jump sustain time" is required.',this.errorField="jumpSustainTime",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.jumpSustainTime)))return this.errorMessage='Field "Jump sustain time" must be a number.',this.errorField="jumpSustainTime",!1;if(this.newCustomObjectTypeBehaviour.allowDoubleJumps){if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.maxJumps))return this.errorMessage='Field "Max air jumps" is required.',this.errorField="maxJumps",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.maxJumps)))return this.errorMessage='Field "Max air jumps" must be a number.',this.errorField="maxJumps",!1;if(this.newCustomObjectTypeBehaviour.maxJumps<2)return this.errorMessage='Field "Max air jumps" must be 2 or greater.',this.errorField="maxJumps",!1}e=this.getCurrentObjectType();for(var t=this.newCustomObjectTypeBehaviour.platformObjectTypes,i=0;i<t.length;i++){if(t[i].id==e.id)return this.errorMessage='"Platform object types" cannot contain the player object type. Choose a different object type.',this.errorField="platformObjectTypes",!1}}else if(this.newCustomObjectTypeBehaviour.type==r.default.GAMEPAD_MOVEMENT){if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.maxSpeed))return this.errorMessage='Field "Max speed" is required.',this.errorField="maxSpeed",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.maxSpeed)))return this.errorMessage='Field "Max speed" must be a number.',this.errorField="maxSpeed",!1;if(this.newCustomObjectTypeBehaviour.gamepadMovementType==a.default.SET_ACCELERATION){if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.maxAcceleration))return this.errorMessage='Field "Max acceleration" is required.',this.errorField="maxAcceleration",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.maxAcceleration)))return this.errorMessage='Field "Max acceleration" must be a number.',this.errorField="maxAcceleration",!1}if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.gamepadXAxisIndex))return this.errorMessage='Field "Gamepad horizontal axis index" is required.',this.errorField="gamepadXAxisIndex",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.gamepadXAxisIndex)))return this.errorMessage='Field "Gamepad horizontal axis index" must be a number.',this.errorField="gamepadXAxisIndex",!1;if(this.util.isEmpty(this.newCustomObjectTypeBehaviour.gamepadYAxisIndex))return this.errorMessage='Field "Gamepad vertical axis index" is required.',this.errorField="gamepadYAxisIndex",!1;if(isNaN(Number(this.newCustomObjectTypeBehaviour.gamepadYAxisIndex)))return this.errorMessage='Field "Gamepad vertical axis index" must be a number.',this.errorField="gamepadYAxisIndex",!1}return!0},e.prototype.getCurrentObjectType=function(){var e=this.mainController.customObjectTypeController.currentCustomObjectTypeIndex;return this.mainController.gameParamsJson.customObjectTypes[e]},e.prototype.updateCustomObjectTypeBehaviour=function(){if(this.validate()){this.mainController.setCurrentTab2("CUSTOM_OBJECT_TYPE_BEHAVIOURS"),this.oldCustomObjectTypeBehaviour.type=this.newCustomObjectTypeBehaviour.type,this.oldCustomObjectTypeBehaviour.keyboardMovementType=this.newCustomObjectTypeBehaviour.keyboardMovementType,this.oldCustomObjectTypeBehaviour.keyboardMovementDirections=this.newCustomObjectTypeBehaviour.keyboardMovementDirections,this.oldCustomObjectTypeBehaviour.keyboardMovementKeys=this.newCustomObjectTypeBehaviour.keyboardMovementKeys,this.oldCustomObjectTypeBehaviour.mouseMovementType=this.newCustomObjectTypeBehaviour.mouseMovementType,this.oldCustomObjectTypeBehaviour.gamepadMovementType=this.newCustomObjectTypeBehaviour.gamepadMovementType,this.oldCustomObjectTypeBehaviour.speedX=Number(this.newCustomObjectTypeBehaviour.speedX),this.oldCustomObjectTypeBehaviour.speedY=Number(this.newCustomObjectTypeBehaviour.speedY),this.oldCustomObjectTypeBehaviour.accelerationX=Number(this.newCustomObjectTypeBehaviour.accelerationX),this.oldCustomObjectTypeBehaviour.accelerationY=Number(this.newCustomObjectTypeBehaviour.accelerationY),this.oldCustomObjectTypeBehaviour.factorX=Number(this.newCustomObjectTypeBehaviour.factorX),this.oldCustomObjectTypeBehaviour.factorY=Number(this.newCustomObjectTypeBehaviour.factorY),this.oldCustomObjectTypeBehaviour.objectSelector=this.newCustomObjectTypeBehaviour.objectSelector,this.oldCustomObjectTypeBehaviour.bounceSpeed=Number(this.newCustomObjectTypeBehaviour.bounceSpeed),this.oldCustomObjectTypeBehaviour.jumpKey=this.newCustomObjectTypeBehaviour.jumpKey,this.oldCustomObjectTypeBehaviour.jumpSpeed=Number(this.newCustomObjectTypeBehaviour.jumpSpeed),this.oldCustomObjectTypeBehaviour.jumpSustainTime=Number(this.newCustomObjectTypeBehaviour.jumpSustainTime),this.oldCustomObjectTypeBehaviour.maxSpeed=Number(this.newCustomObjectTypeBehaviour.maxSpeed),this.oldCustomObjectTypeBehaviour.maxAcceleration=Number(this.newCustomObjectTypeBehaviour.maxAcceleration),this.oldCustomObjectTypeBehaviour.maxFallSpeed=Number(this.newCustomObjectTypeBehaviour.maxFallSpeed),this.oldCustomObjectTypeBehaviour.timeToReachMaxSpeed=Number(this.newCustomObjectTypeBehaviour.timeToReachMaxSpeed),this.oldCustomObjectTypeBehaviour.timeToStop=Number(this.newCustomObjectTypeBehaviour.timeToStop),this.oldCustomObjectTypeBehaviour.moveLeftKeys=this.newCustomObjectTypeBehaviour.moveLeftKeys,this.oldCustomObjectTypeBehaviour.moveRightKeys=this.newCustomObjectTypeBehaviour.moveRightKeys,this.oldCustomObjectTypeBehaviour.jumpKeys=this.newCustomObjectTypeBehaviour.jumpKeys,this.oldCustomObjectTypeBehaviour.allowDoubleJumps=this.newCustomObjectTypeBehaviour.allowDoubleJumps,this.oldCustomObjectTypeBehaviour.maxJumps=Number(this.newCustomObjectTypeBehaviour.maxJumps),this.oldCustomObjectTypeBehaviour.gamepadIndex=Number(this.newCustomObjectTypeBehaviour.gamepadIndex),this.oldCustomObjectTypeBehaviour.gamepadXAxisIndex=Number(this.newCustomObjectTypeBehaviour.gamepadXAxisIndex),this.oldCustomObjectTypeBehaviour.gamepadYAxisIndex=Number(this.newCustomObjectTypeBehaviour.gamepadYAxisIndex),this.oldCustomObjectTypeBehaviour.platformObjectTypes=[];for(var e=0;e<this.newCustomObjectTypeBehaviour.platformObjectTypes.length;e++){var t=this.newCustomObjectTypeBehaviour.platformObjectTypes[e].uid,i=this.util.findCustomObjectDefinitionByUid(this.mainController.gameParamsJson.customObjectTypes,t);this.oldCustomObjectTypeBehaviour.platformObjectTypes.push(i)}this.oldCustomObjectTypeBehaviour=null,this.newCustomObjectTypeBehaviour=null}},e.prototype.cancelChangesCustomObjectTypeBehaviour=function(){this.errorMessage=null,this.errorField=null,this.mainController.setCurrentTab2("CUSTOM_OBJECT_TYPE_BEHAVIOURS"),this.oldCustomObjectTypeBehaviour=null,this.newCustomObjectTypeBehaviour=null},e.prototype.addPlatformObjectType=function(e){this.newCustomObjectTypeBehaviour.platformObjectTypes.push(e)},e.prototype.deletePlatformObjectType=function(e){this.newCustomObjectTypeBehaviour.platformObjectTypes.splice(e,1)},e}();t.default=l},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.SET_POSITION_BY_MOUSE_POSITION="SET_POSITION_BY_MOUSE_POSITION",e.SET_SPEED_BY_MOUSE_DISTANCE="SET_SPEED_BY_MOUSE_DISTANCE",e.SET_ACCELERATION_BY_MOUSE_DISTANCE="SET_ACCELERATION_BY_MOUSE_DISTANCE"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),o=i(16),r=i(4),a=i(6),s=i(17),l=i(0),u=function(){function e(e){this.genericService=new s.default,this.newLoop=null,this.oldLoop=null,this.currentBlock=null,this.loopTypes=this.genericService.getLoopTypes(),this.loopObjectSelectorTypes=[{value:a.default.ALL_OBJECTS_OF_TYPE,name:"All objects of type..."}],this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new l.default}return e.prototype.editLoop=function(e,t){this.mainController.setCurrentScreen("EDIT_LOOP"),this.oldLoop=e,this.newLoop=this.util.cloneObject(this.oldLoop),this.currentBlock=t,null==this.newLoop.objectSelectorDefinition.objectType&&(this.newLoop.objectSelectorDefinition.objectType=new n.default)},e.prototype.cancelChangesLoop=function(){"LEVELS"==this.mainController.currentTab?this.mainController.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.mainController.currentTab&&this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.errorMessage=null,this.errorField=null,this.oldLoop=null,this.newLoop=null,this.mainController.visualScriptController.selectBlock(this.currentBlock)},e.prototype.validate=function(){if(this.errorMessage=null,this.errorField=null,null==this.newLoop.type)return this.errorMessage='Field "Loop type" is required.',this.errorField="type",!1;if(this.newLoop.type==o.default.REPEAT_X_TIMES){if(null==this.newLoop.times)return this.errorMessage='Field "times" is required.',this.errorField="times",!1}else if(this.newLoop.type==o.default.OBJECT){if(null==this.newLoop.objectSelectorDefinition.type)return this.errorMessage='Field "objectSelector" is required.',this.errorField="objectSelectorDefinition.type",!1;if(null==this.newLoop.objectSelectorDefinition.objectType||null==this.newLoop.objectSelectorDefinition.objectType.uid)return this.errorMessage='Field "customObjectTypeId" is required.',this.errorField="customObjectTypeId",!1;if(this.util.isEmpty(this.newLoop.loopVariableName))return this.errorMessage='Field "loopVariableName" is required.',this.errorField="loopVariableName",!1;if(this.newLoop.loopVariableName.includes(" "))return this.errorMessage='Field "loopVariableName" cannot contain white spaces.',this.errorField="loopVariableName",!1;if(!this.newLoop.loopVariableName.match(/^[a-zA-Z0-9_]+$/i))return this.errorMessage='Field "loopVariableName" can contain only letters, numbers and underscore.',this.errorField="loopVariableName",!1}else if(this.newLoop.type==o.default.NUMBER){if(this.util.isEmpty(this.newLoop.from))return this.errorMessage='Field "from" is required.',this.errorField="from",!1;if(this.util.isEmpty(this.newLoop.to))return this.errorMessage='Field "to" is required.',this.errorField="to",!1;if(this.util.isEmpty(this.newLoop.increment))return this.errorMessage='Field "increment" is required.',this.errorField="increment",!1;if(this.util.isEmpty(this.newLoop.loopVariableName))return this.errorMessage='Field "loopVariableName" is required.',this.errorField="loopVariableName",!1;if(this.newLoop.loopVariableName.includes(" "))return this.errorMessage='Field "loopVariableName" cannot contain white spaces.',this.errorField="loopVariableName",!1;if(!this.newLoop.loopVariableName.match(/^[a-zA-Z0-9_]+$/i))return this.errorMessage='Field "loopVariableName" can contain only letters, numbers and underscore.',this.errorField="loopVariableName",!1;if(0==this.newLoop.increment)return this.errorMessage="Increment cannot be 0.",this.errorField="increment",!1;if(this.newLoop.from>this.newLoop.to&&this.newLoop.increment>0)return this.errorMessage="Increment must be negative.",this.errorField="increment",!1;if(this.newLoop.from<this.newLoop.to&&this.newLoop.increment<0)return this.errorMessage="Increment must be positive.",this.errorField="increment",!1}return!0},e.prototype.updateLoop=function(){if(this.newLoop.from=Number(this.newLoop.from),this.newLoop.to=Number(this.newLoop.to),this.newLoop.increment=Number(this.newLoop.increment),this.newLoop.times=this.newLoop.times,this.validate()){if("LEVELS"==this.mainController.currentTab?this.mainController.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.mainController.currentTab&&this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.oldLoop.type=this.newLoop.type,this.oldLoop.loopVariableName=this.newLoop.loopVariableName,this.oldLoop.from=Number(this.newLoop.from),this.oldLoop.to=Number(this.newLoop.to),this.oldLoop.increment=Number(this.newLoop.increment),this.oldLoop.times=this.newLoop.times,this.newLoop.type==o.default.OBJECT){var e=this.newLoop.objectSelectorDefinition.objectType.uid;this.oldLoop.objectSelectorDefinition=new r.default,this.oldLoop.objectSelectorDefinition.loopVariableName=this.newLoop.objectSelectorDefinition.loopVariableName,this.oldLoop.objectSelectorDefinition.type=this.newLoop.objectSelectorDefinition.type,this.oldLoop.objectSelectorDefinition.objectType=this.util.findCustomObjectDefinitionByUid(this.mainController.gameParamsJson.customObjectTypes,e)}this.oldLoop=null,this.newLoop=null,this.mainController.visualScriptController.selectBlock(this.currentBlock),this.mainController.autoSave()}},e.prototype.fillLoopVariableName=function(){if(null==this.newLoop.loopVariableName||""==this.newLoop.loopVariableName)for(var e=0;e<this.mainController.gameParamsJson.customObjectTypes.length;e++)if(this.mainController.gameParamsJson.customObjectTypes[e].uid==this.newLoop.objectSelectorDefinition.objectType.uid){var t=this.mainController.gameParamsJson.customObjectTypes[e].id;this.newLoop.loopVariableName=t.replace(/ /gi,"")}},e}();t.default=u},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=function(){function e(e){this.gameName=null,this.gameDescription=null,this.canvasWidth=null,this.canvasHeight=null,this.mainController=e,this.util=new n.default}return e.prototype.loadGameProperties=function(){this.gameName=this.mainController.gameParamsJson.name,this.gameDescription=this.mainController.gameParamsJson.description,this.canvasWidth=this.mainController.gameParamsJson.canvasWidth,this.canvasHeight=this.mainController.gameParamsJson.canvasHeight},e.prototype.updateGameProperties=function(){this.mainController.gameParamsJson.name=this.gameName,this.mainController.gameParamsJson.description=this.gameDescription,this.canvasWidth=Number(this.canvasWidth),!isNaN(this.canvasWidth)&&this.canvasWidth>0?this.mainController.gameParamsJson.canvasWidth=this.canvasWidth:this.canvasWidth=this.mainController.gameParamsJson.canvasWidth,this.canvasHeight=Number(this.canvasHeight),!isNaN(this.canvasHeight)&&this.canvasHeight>0?this.mainController.gameParamsJson.canvasHeight=this.canvasHeight:this.canvasHeight=this.mainController.gameParamsJson.canvasHeight},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(54),o=i(31),r=i(13),a=i(57),s=i(59),l=i(1),u=i(52),d=i(58),c=i(34),h=i(60),p=i(16),m=i(4),f=i(44),y=i(0),v=function(){function e(e){this.selectedBlockUid="",this.startSelected=!1,this.endSelected=!1,this.newComment="",this.copiedBlock=null,this.mainController=e,this.util=new y.default}return e.prototype.enableElseStatements=function(e){e.conditionBlock.elseBlocksEnabled=!0},e.prototype.disableElseStatements=function(e){e.conditionBlock.elseBlocksEnabled=!1},e.prototype.findBlockByUid=function(e,t,i){if(null!=t&&t.uid==e)return t;if(null==t){for(var n=i.blocks,o=0;o<n.length;o++){var a=n[o];if(null!=(d=this.findBlockByUid(e,a,i)))return d}return null}if(t.blockType==r.default.CONDITION){var s=t.conditionBlock.ifBlocks,l=t.conditionBlock.elseBlocks;for(o=0;o<s.length;o++){a=s[o];if(null!=(d=this.findBlockByUid(e,a,i)))return d}for(o=0;o<l.length;o++){a=l[o];if(null!=(d=this.findBlockByUid(e,a,i)))return d}return null}if(t.blockType==r.default.LOOP){var u=t.loopBlock.blocks;for(o=0;o<u.length;o++){var d;a=u[o];if(null!=(d=this.findBlockByUid(e,a,i)))return d}return null}},e.prototype.selectBlockByUid=function(e){for(var t=this.mainController.gameParamsJson.levels,i=0;i<t.length;i++){var n=t[i],o=n.scriptOnAnimationFrame;null!=(s=this.findBlockByUid(e,null,o))&&(this.selectBlock(s),this.mainController.visualScriptsController.setCurrentLevelScript(n.uid,"onAnimationFrame"));var r=n.scriptOnLevelStart;null!=(s=this.findBlockByUid(e,null,r))&&(this.selectBlock(s),this.mainController.visualScriptsController.setCurrentLevelScript(n.uid,"onLevelStart"))}var a=this.mainController.gameParamsJson.visualScriptFunctions;for(i=0;i<a.length;i++){var s,l=a[i];null!=(s=this.findBlockByUid(e,null,l))&&(this.selectBlock(s),this.mainController.visualScriptsController.setCurrentFunction(l.uid))}},e.prototype.selectBlock=function(e){this.unselectBlock(),this.selectedBlock=e,this.selectedBlockUid=e.uid},e.prototype.unselectBlock=function(){this.selectedBlock=null,this.selectedBlockUid="",this.startSelected=!1,this.endSelected=!1},e.prototype.toggleBlock=function(e){this.selectedBlockUid==e.uid?this.unselectBlock():(this.unselectBlock(),this.selectBlock(e))},e.prototype.getBlockSiblings=function(e,t){var i=e.parentBlock;if(null==i)return t.blocks;if(i.blockType==r.default.LOOP)return i.loopBlock.blocks;if(i.blockType==r.default.CONDITION){var n=i.conditionBlock.ifBlocks,o=n.findIndex((function(t){return t.uid==e.uid}));if(-1!=o)return n;var a=i.conditionBlock.elseBlocks;return-1!=(o=a.findIndex((function(t){return t.uid==e.uid})))?a:null}return null},e.prototype.moveBlock=function(e,t,i){var n=this.getBlockSiblings(e,t),o=n.findIndex((function(t){return t.uid==e.uid}));this.util.arrayMove(n,o,o+i)},e.prototype.moveBlockUp=function(e,t){this.moveBlock(e,t,-1)},e.prototype.moveBlockDown=function(e,t){this.moveBlock(e,t,1)},e.prototype.duplicateBlock=function(e,t){var i=e.duplicate(e.parentBlock);if(null==e.parentBlock){var n=t.blocks.findIndex((function(t){return t.uid==e.uid}));t.blocks.splice(n+1,0,i)}else if(e.parentBlock.blockType==r.default.LOOP){n=e.parentBlock.loopBlock.blocks.findIndex((function(t){return t.uid==e.uid}));e.parentBlock.loopBlock.blocks.splice(n+1,0,i)}else if(e.parentBlock.blockType==r.default.CONDITION){-1!=(n=e.parentBlock.conditionBlock.ifBlocks.findIndex((function(t){return t.uid==e.uid})))?e.parentBlock.conditionBlock.ifBlocks.splice(n+1,0,i):(n=e.parentBlock.conditionBlock.elseBlocks.findIndex((function(t){return t.uid==e.uid})),e.parentBlock.conditionBlock.elseBlocks.splice(n+1,0,i))}this.selectBlock(i)},e.prototype.copyBlock=function(e,t){var i=e.duplicate(e.parentBlock);this.copiedBlock=i},e.prototype.pasteBlock=function(e,t,i){var n=null;"BEFORE"==t||"AFTER"==t?n=e.parentBlock:"INSIDE"==t||"INSIDE_ELSE"==t?n=e:("END"==t||"START"==t)&&(n=null);var o=this.copiedBlock;if(o.parentBlock=n,null==n)if("BEFORE"==t){var a=i.blocks.findIndex((function(t){return t.uid==e.uid}));i.blocks.splice(a,0,o)}else if("AFTER"==t){a=i.blocks.findIndex((function(t){return t.uid==e.uid}));i.blocks.splice(a+1,0,o)}else"END"==t?i.blocks.push(o):"START"==t&&i.blocks.unshift(o);else if(n.blockType==r.default.LOOP){if("INSIDE"==t)n.loopBlock.blocks.push(o);else if("BEFORE"==t){a=n.loopBlock.blocks.findIndex((function(t){return t.uid==e.uid}));n.loopBlock.blocks.splice(a,0,o)}else if("AFTER"==t){a=n.loopBlock.blocks.findIndex((function(t){return t.uid==e.uid}));n.loopBlock.blocks.splice(a+1,0,o)}}else if(n.blockType==r.default.CONDITION)if("INSIDE"==t)n.conditionBlock.ifBlocks.push(o);else if("INSIDE_ELSE"==t)n.conditionBlock.elseBlocks.push(o);else if("BEFORE"==t){a=n.conditionBlock.ifBlocks.findIndex((function(t){return t.uid==e.uid}));n.conditionBlock.ifBlocks.splice(a,0,o)}else if("AFTER"==t){-1!=(a=n.conditionBlock.ifBlocks.findIndex((function(t){return t.uid==e.uid})))?n.conditionBlock.ifBlocks.splice(a+1,0,o):(a=n.conditionBlock.elseBlocks.findIndex((function(t){return t.uid==e.uid})),n.conditionBlock.elseBlocks.splice(a+1,0,o))}this.copiedBlock=null,this.selectBlock(o)},e.prototype.generateVisualScriptSourceCode=function(e){return(new f.default).generateVisualScriptSourceCode(e,this.mainController.gameParamsJson,0,!1)},e.prototype.editCommentBlock=function(e){this.newComment=e.comment,this.mainController.currentBlock=e,this.mainController.setCurrentScreen("EDIT_COMMENT_BLOCK")},e.prototype.updateBlockComment=function(){"LEVELS"==this.mainController.currentTab?this.mainController.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.mainController.currentTab&&this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.mainController.currentBlock.comment=this.newComment,this.newComment="",this.mainController.autoSave()},e.prototype.cancelChangesBlockComment=function(){"LEVELS"==this.mainController.currentTab?this.mainController.setCurrentTab2("LEVEL_EVENTS"):"VISUAL_SCRIPTS"==this.mainController.currentTab&&this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.newComment=""},e.prototype.buildCommentBlock=function(e){var t=new o.default;return t.uid=this.util.uid(),t.blockType=r.default.COMMENT,t.comment="Add comment here...",t.parentBlock=e,t},e.prototype.addActionBlock=function(e){var t=this.buildActionBlock(null);e.blocks.push(t),this.selectBlock(t)},e.prototype.buildBlock=function(e,t){return e==r.default.ACTION?this.buildActionBlock(t):e==r.default.CONDITION?this.buildConditionBlock(t):e==r.default.LOOP?this.buildLoopBlock(t):e==r.default.COMMENT?this.buildCommentBlock(t):null},e.prototype.addBlock=function(e,t,i,n){var o=null;"BEFORE"==n||"AFTER"==n?o=i.parentBlock:"INSIDE"==n||"INSIDE_ELSE"==n?o=i:("END"==n||"START"==n)&&(o=null);var a=this.buildBlock(e,o);if(null==o)if("BEFORE"==n){var s=t.blocks.findIndex((function(e){return e.uid==i.uid}));t.blocks.splice(s,0,a)}else if("AFTER"==n){s=t.blocks.findIndex((function(e){return e.uid==i.uid}));t.blocks.splice(s+1,0,a)}else"END"==n?t.blocks.push(a):"START"==n&&t.blocks.unshift(a);else if(o.blockType==r.default.LOOP){if("INSIDE"==n)o.loopBlock.blocks.push(a);else if("BEFORE"==n){s=o.loopBlock.blocks.findIndex((function(e){return e.uid==i.uid}));o.loopBlock.blocks.splice(s,0,a)}else if("AFTER"==n){s=o.loopBlock.blocks.findIndex((function(e){return e.uid==i.uid}));o.loopBlock.blocks.splice(s+1,0,a)}}else if(o.blockType==r.default.CONDITION)if("INSIDE"==n)o.conditionBlock.ifBlocks.push(a);else if("INSIDE_ELSE"==n)o.conditionBlock.elseBlocks.push(a);else if("BEFORE"==n){s=o.conditionBlock.ifBlocks.findIndex((function(e){return e.uid==i.uid}));o.conditionBlock.ifBlocks.splice(s,0,a)}else if("AFTER"==n){-1!=(s=o.conditionBlock.ifBlocks.findIndex((function(e){return e.uid==i.uid})))?o.conditionBlock.ifBlocks.splice(s+1,0,a):(s=o.conditionBlock.elseBlocks.findIndex((function(e){return e.uid==i.uid})),o.conditionBlock.elseBlocks.splice(s+1,0,a))}this.selectBlock(a)},e.prototype.addActionBlockToConditionIfBlocks=function(e){var t=this.buildActionBlock(e);e.conditionBlock.ifBlocks.push(t),this.selectBlock(t)},e.prototype.addLoopToConditionIfBlocks=function(e){var t=this.buildLoopBlock(e);e.conditionBlock.ifBlocks.push(t),this.selectBlock(t)},e.prototype.buildActionBlock=function(e){var t=this.mainController.buildEventAction(),i=new n.default;i.uid=this.util.uid(),i.action=t;var a=new o.default;return a.uid=this.util.uid(),a.description="",a.blockType=r.default.ACTION,a.actionBlock=i,a.parentBlock=e,a},e.prototype.addActionToLoop=function(e){var t=this.buildActionBlock(e);e.loopBlock.blocks.push(t),this.selectBlock(t)},e.prototype.addLoopToLoop=function(e){var t=this.buildLoopBlock(e);e.loopBlock.blocks.push(t),this.selectBlock(t)},e.prototype.addConditionToLoop=function(e){var t=this.buildConditionBlock(e);e.loopBlock.blocks.push(t),this.selectBlock(t)},e.prototype.buildConditionBlock=function(e){var t=new d.default;t.uid=this.util.uid(),t.category=u.default.EXPRESSION,t.type=c.default.EXPRESSION,t.expression="true",t.keyCode=null,t.mouseButton="-1",t.distance=null,t.relation=null,t.x1=null,t.y1=null,t.x2=null,t.y2=null,t.button=null,t.gamepadIndex=null,t.gamepadButtonIndex=null;var i=new a.default;i.uid=this.util.uid(),i.condition=t,i.ifBlocks=new Array,i.elseBlocks=new Array,i.elseBlocksEnabled=!1;var n=new o.default;return n.uid=this.util.uid(),n.description="",n.blockType=r.default.CONDITION,n.conditionBlock=i,n.parentBlock=e,n},e.prototype.buildLoopBlock=function(e){var t=new h.default;t.type=p.default.REPEAT_X_TIMES,t.times="3",t.loopVariableName="",t.from=null,t.increment=null,t.to=null,t.objectSelectorDefinition=new m.default,t.objectSelectorDefinition.objectType=new l.default;var i=new s.default;i.uid=this.util.uid(),i.loop=t,i.blocks=new Array;var n=new o.default;return n.uid=this.util.uid(),n.description="",n.blockType=r.default.LOOP,n.loopBlock=i,n.parentBlock=e,n},e.prototype.addLoopBlock=function(e){var t=this.buildLoopBlock(null);e.blocks.push(t),this.selectBlock(t)},e.prototype.deleteBlock=function(e,t){var i=e.parentBlock;if(null==i){var n=t.blocks.findIndex((function(t){return t.uid==e.uid}));t.blocks.splice(n,1)}else if(i.blockType==r.default.CONDITION){var o=i.conditionBlock.ifBlocks;if(-1!=(n=o.findIndex((function(t){return t.uid==e.uid}))))o.splice(n,1);else{var a=i.conditionBlock.elseBlocks,s=a.findIndex((function(t){return t.uid==e.uid}));a.splice(s,1)}}else if(i.blockType==r.default.LOOP){var l=i.loopBlock.blocks;n=l.findIndex((function(t){return t.uid==e.uid}));l.splice(n,1)}},e}();t.default=v},function(e,t,i){"use strict";t.__esModule=!0;var n=i(32),o=i(10),r=i(0),a=function(){function e(e){this.mainController=e,this.util=new r.default}return e.prototype.openVisualScriptsEditor=function(){this.mainController.setCurrentTab("VISUAL_SCRIPTS"),this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR")},e.prototype.closeVisualScriptsEditor=function(){this.mainController.setCurrentTab("VISUAL_SCRIPTS")},e.prototype.addVisualScriptFunction=function(){var e=this.mainController.gameParamsJson.visualScriptFunctions,t=new o.default;t.uid=this.util.uid(),t.type=n.default.FUNCTION,t.name="Function 1",t.description="",t.blocks=new Array,e.push(t)},e.prototype.setCurrentLevelScript=function(e,t){this.mainController.visualScriptFunctionController.clearErrorMessage(),this.levelUid=e,this.scriptTrigger=t,this.updateCurrentScript()},e.prototype.setCurrentFunction=function(e){this.mainController.visualScriptFunctionController.clearErrorMessage(),this.levelUid=null,this.scriptTrigger=null;var t=this.mainController.gameParamsJson.visualScriptFunctions.find((function(t){return t.uid==e}));this.mainController.currentScript=t},e.prototype.updateCurrentScript=function(){this.mainController.currentScript=null;var e=this.mainController.gameParamsJson.levels,t=this.util.findLevelDefinitionByUid(e,this.levelUid);null==t&&(t=e[0],this.levelUid=t.uid),null==this.scriptTrigger&&(this.scriptTrigger="onAnimationFrame"),"onAnimationFrame"==this.scriptTrigger?this.mainController.currentScript=t.scriptOnAnimationFrame:"onLevelStart"==this.scriptTrigger&&(this.mainController.currentScript=t.scriptOnLevelStart)},e}();t.default=a},function(e,t,i){(function(i){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){"use strict";function t(e,t,i){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,i)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i&&i.global===i?i:void 0,a=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,i,a){var s=r.URL||r.webkitURL,l=document.createElement("a");i=i||e.name||"download",l.download=i,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):n(l.href)?t(e,i,a):o(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,r){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),i);else if(n(e))t(e,i,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){o(a)}))}}:function(e,i,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,i,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(r.HTMLElement)||r.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||a)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},d.readAsDataURL(e)}else{var c=r.URL||r.webkitURL,h=c.createObjectURL(e);o?o.location=h:location.href=h,o=null,setTimeout((function(){c.revokeObjectURL(h)}),4e4)}});r.saveAs=s.saveAs=s,e.exports=s})?n.apply(t,o):n)||(e.exports=r)}).call(this,i(40))},function(e,t,i){"use strict";t.__esModule=!0;var n=i(22),o=i(42),r=i(0),a=function(){function e(e){this.errorMessage=null,this.errorField=null,this.currentAnimation=null,this.currentAnimationFrame=null,this.initialAnimationUid=null,this.previousScroll=null,this.mainController=e,this.util=new r.default}return e.prototype.addAnimation=function(){var e=new n.default;e.uid=this.util.uid(),e.name=this.generateAnimationName("animation"),e.loop=!0,e.speed=10,e.frames=new Array,this.mainController.customObjectTypeController.oldCustomObjectType.animations.push(e)},e.prototype.deleteAnimation=function(e){var t=this.mainController.customObjectTypeController.oldCustomObjectType.animations[e],i=this.mainController.customObjectTypeController.oldCustomObjectType.initialAnimation;null!=i&&i.uid==t.uid&&(this.mainController.customObjectTypeController.oldCustomObjectType.initialAnimation=null),this.mainController.customObjectTypeController.oldCustomObjectType.animations.splice(e,1)},e.prototype.setCurrentAnimationFrame=function(e){this.currentAnimationFrame=e},e.prototype.moveFrameLeft=function(e,t){var i=this.mainController.customObjectTypeController.oldCustomObjectType.animations[e].frames;this.util.arrayMove(i,t,t-1)},e.prototype.moveFrameRight=function(e,t){var i=this.mainController.customObjectTypeController.oldCustomObjectType.animations[e].frames;this.util.arrayMove(i,t,t+1)},e.prototype.deleteAnimationFrame=function(e,t){this.mainController.customObjectTypeController.oldCustomObjectType.animations[e].frames.splice(t,1)},e.prototype.updateInitialAnimation=function(){var e=this,t=this.mainController.customObjectTypeController.oldCustomObjectType.animations.find((function(t){return t.uid==e.initialAnimationUid}));this.mainController.customObjectTypeController.oldCustomObjectType.initialAnimation=t},e.prototype.editAnimation=function(e){},e.prototype.saveScroll=function(){this.previousScroll=window.scrollY},e.prototype.loadScroll=function(){window.scrollTo(0,this.previousScroll)},e.prototype.validate=function(){return this.errorMessage=null,this.errorField=null,!0},e.prototype.updateAnimation=function(){this.validate()},e.prototype.cancelChangesAnimation=function(){},e.prototype.goToAddAnimationFrame=function(e){this.saveScroll(),this.currentAnimation=this.mainController.customObjectTypeController.oldCustomObjectType.animations[e],this.mainController.openImageSelection("CUSTOM_OBJECT_TYPE_ANIMATIONS")},e.prototype.addAnimationFrame=function(e){var t=new o.default;t.uid=this.util.uid(),t.image=e,this.currentAnimation.frames.push(t)},e.prototype.validateAnimationName=function(e){for(var t=this.getAnimationByName(e.name);null!=t&&t.uid!=e.uid;)e.name+=" (2)",t=this.getAnimationByName(e.name)},e.prototype.generateAnimationName=function(e){for(var t=1,i=e+t;this.animationNameAlreadyExists(i);)i=e+ ++t;return i},e.prototype.getAnimationByName=function(e){return this.mainController.customObjectTypeController.oldCustomObjectType.animations.find((function(t){return t.name==e}))},e.prototype.animationNameAlreadyExists=function(e){return null!=this.getAnimationByName(e)},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),o=function(){function e(e){this.mainController=e,this.util=new n.default}return e.prototype.editExtension=function(e){"neat"==e&&this.mainController.setCurrentScreen("EXTENSION_NEAT")},e.prototype.activateExtension=function(e){"neat"==e&&this.mainController.gameParamsJson.extensions.activateNeatExtension()},e.prototype.deactivateExtension=function(e){"neat"==e&&this.mainController.gameParamsJson.extensions.deactivateNeatExtension()},e.prototype.goBackToExtensions=function(){this.mainController.setCurrentScreen("EXTENSIONS")},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var n=i(11),o=i(21),r=i(41),a=i(0),s=function(){function e(e){this.neataptic=null,this.currentNeat=null,this.currentNetwork=null,this.formAddNeat={name:"Neuroevolution",numInputs:2,numOutputs:1,populationSize:10,mutationRate:.3,elitism:5,provenance:0,mutationAmount:1},this.formEditNeat={name:"",populationSize:0,mutationRate:0,elitism:0,provenance:0,mutationAmount:1,inputDefinitions:new Array},this.mainController=e,this.util=new a.default,this.neataptic=window.neataptic}return e.prototype.goToNeat=function(e){this.currentNeat=e,this.mainController.setCurrentScreen("NEAT")},e.prototype.goBackToNeatExtension=function(){this.currentNeat=null,this.mainController.setCurrentScreen("EXTENSION_NEAT")},e.prototype.goToNetwork=function(e){this.currentNetwork=e,this.mainController.setCurrentScreen("NETWORK")},e.prototype.goBackToNeat=function(){this.currentNetwork=null,this.mainController.setCurrentScreen("NEAT")},e.prototype.goToAddNeat=function(){this.formAddNeat.name="Neuroevolution 01",this.formAddNeat.numInputs=2,this.formAddNeat.numOutputs=1,this.formAddNeat.populationSize=10,this.formAddNeat.mutationRate=.3,this.formAddNeat.elitism=5,this.formAddNeat.provenance=0,this.formAddNeat.mutationAmount=1,this.mainController.setCurrentScreen("EXTENSION_NEAT_ADD")},e.prototype.goToEditNeat=function(e){this.currentNeat=e,this.formEditNeat.name=e.name,this.formEditNeat.populationSize=e.neat.popsize,this.formEditNeat.mutationRate=e.neat.mutationRate,this.formEditNeat.mutationAmount=e.neat.mutationAmount,this.formEditNeat.elitism=e.neat.elitism,this.formEditNeat.provenance=e.neat.provenance,this.formEditNeat.inputDefinitions=new Array;for(var t=0;t<e.inputDefinitions.length;t++){var i=e.inputDefinitions[t],n=new o.default;n.uid=i.uid,n.name=i.name,n.value=null,this.formEditNeat.inputDefinitions.push(n)}this.mainController.setCurrentScreen("EXTENSION_NEAT_EDIT")},e.prototype.cancelAddNeat=function(){this.mainController.setCurrentScreen("EXTENSION_NEAT")},e.prototype.addNeat=function(){var e=Number(this.formAddNeat.numInputs),t=Number(this.formAddNeat.numOutputs),i=[this.neataptic.methods.mutation.ADD_NODE,this.neataptic.methods.mutation.SUB_NODE,this.neataptic.methods.mutation.ADD_CONN,this.neataptic.methods.mutation.SUB_CONN,this.neataptic.methods.mutation.MOD_WEIGHT,this.neataptic.methods.mutation.MOD_BIAS,this.neataptic.methods.mutation.MOD_ACTIVATION,this.neataptic.methods.mutation.SWAP_NODES],a={popsize:Number(this.formAddNeat.populationSize),elitism:Number(this.formAddNeat.elitism),provenance:Number(this.formAddNeat.provenance),mutationRate:Number(this.formAddNeat.mutationRate),mutationAmount:Number(this.formAddNeat.mutationAmount),mutation:i},s=new this.neataptic.Neat(e,t,null,a),l=new n.default;l.uid=this.util.uid(),l.name=this.formAddNeat.name,l.neat=s,l.inputDefinitions=new Array;for(var u=0;u<e;u++){var d=new o.default;d.uid=this.util.uid(),d.name="input_"+u,d.value=null,l.inputDefinitions.push(d)}l.outputDefinitions=new Array;for(u=0;u<t;u++){var c=new r.default;c.uid=this.util.uid(),c.name="output_"+u,c.value=null,l.outputDefinitions.push(c)}this.mainController.gameParamsJson.extensions.neatExtension.addNeat(l),this.mainController.setCurrentScreen("EXTENSION_NEAT")},e.prototype.updateNeat=function(){this.currentNeat.neat.elitism=Number(this.formEditNeat.elitism),this.currentNeat.neat.mutationRate=Number(this.formEditNeat.mutationRate),this.currentNeat.neat.provenance=Number(this.formEditNeat.provenance),this.currentNeat.neat.mutationAmount=Number(this.formEditNeat.mutationAmount),this.currentNeat.name=this.formEditNeat.name;var e=Number(this.formEditNeat.populationSize);this.currentNeat.neat.resize(e);for(var t=0;t<this.formEditNeat.inputDefinitions.length;t++)this.currentNeat.inputDefinitions[t].name=this.formEditNeat.inputDefinitions[t].name;this.mainController.setCurrentScreen("NEAT")},e.prototype.resetNeat=function(e){e.neat.reset()},e.prototype.deleteNeat=function(e){this.mainController.gameParamsJson.extensions.neatExtension.neatList.splice(e,1)},e.prototype.cancelEditNeat=function(){this.mainController.setCurrentScreen("NEAT")},e.prototype.resetPopulationScore=function(e){for(var t=0;t<e.neat.population.length;t++)e.neat.population[t].score=0},e.prototype.sort=function(e){e.neat.sort()},e.prototype.evolve=function(e){e.neat.evolve()},e}();t.default=s},function(e,t,i){"use strict";t.__esModule=!0;var n=i(36),o=i(53),r=i(4),a=i(6),s=i(3),l=i(17),u=i(0),d=i(9),c=function(){function e(e){this.genericService=new l.default,this.showExpressionHelp=!1,this.expressionCategories=this.genericService.getExpressionCategories(null),this.expressionObjectSelectorTypes=this.genericService.getExpressionObjectSelectorTypes(),this.outputs=new Array,this.expressionNeuralNetworkOutputIndex=null,this.currentExpressionField=null,this.currentExpressionArrayIndex=null,this.expressionCategory=null,this.expressionType=null,this.expressionToInsert=null,this.expressionObjectAttribute=null,this.expressionNeatAttribute=null,this.expressionNeatUid=null,this.expressionNeuralNetworkAttribute=null,this.expressionObjectMethod=null,this.expressionLoopVariableName=null,this.expressionLoopVariableName2=null,this.expressionGlobalVariableName=null,this.expressionLevelVariableName=null,this.expressionLoopObjectVariables=new Array,this.expressionLoopObjectVariable=null,this.expressionLocalStorageVariableName=null,this.expressionMinNumber=null,this.expressionMaxNumber=null,this.expressionParam1=null,this.expressionParam2=null,this.expressionObjectTypeUid=null,this.gamepadIndex=null,this.gamepadButtonIndex=null,this.gamepadAxisIndex=null,this.objectSelectorDefinition=new r.default,this.objectSelectorDefinition2=new r.default,this.localStorageVariableType=null,this.neatAttributes=[{code:"name"},{code:"generation"},{code:"populationSize"}],this.mainController=e,this.util=new u.default,this.expressionTypes=this.genericService.getExpressionTypes()}return e.prototype.filterExpressionTypes=function(){this.expressionTypes=this.genericService.getExpressionTypesByCategory(this.expressionCategory)},e.prototype.updateExpressionNeuralNetworkOutputs=function(){this.outputs=new Array;var e=this.expressionLoopObjectVariable,t=this.expressionLoopObjectVariables.find((function(t){return t.name==e}));t.type==d.default.NEAT_NEURAL_NETWORK&&(this.outputs=t.neat.outputDefinitions)},e.prototype.toggleExpressionHelp=function(){this.showExpressionHelp=!this.showExpressionHelp},e.prototype.openExpressionHelp=function(e,t){this.expressionCategory=null,this.expressionCategories=this.genericService.getExpressionCategories(this.mainController.gameParamsJson.extensions),this.showExpressionHelp=!0,this.clearExpressionHelpForm(),this.currentExpressionField=e,this.currentExpressionArrayIndex=t},e.prototype.closeExpressionHelp=function(){this.showExpressionHelp=!1},e.prototype.updateExpressionToInsert=function(){var e=this.expressionType,t=null;if(e==o.default.SCORE)t="play.score";else if(e==o.default.RANDOM)t="Math.random()";else if(e==o.default.RANDOM_NUMBER_BETWEEN){var i=this.expressionMinNumber,n=this.expressionMaxNumber;t="0"==i?"Math.random() * "+n:"Math.random() * ("+n+" - "+i+") + "+i}else if(e==o.default.RANDOM_INTEGER_BETWEEN){i=this.expressionMinNumber,n=this.expressionMaxNumber;t="0"==i?"Math.floor(Math.random() * "+n+")":"Math.floor(Math.random() * ("+n+" - "+i+") + "+i+")"}else if(e==o.default.FPS)t="play.getFPS()";else if(e==o.default.DELTA)t="play.getDelta()";else if(e==o.default.DELTA_SECONDS)t="play.getDeltaSeconds()";else if(e==o.default.TIME_SCALE)t="play.getTimeScale()";else if(e==o.default.ELAPSED_TIME_MILLIS)t="play.getElapsedTimeMillis()";else if(e==o.default.ELAPSED_TIME_SECONDS)t="play.getElapsedTimeSeconds()";else if(e==o.default.LEVEL_ELAPSED_TIME_MILLIS)t="play.getCurrentLevel().getElapsedTimeMillis()";else if(e==o.default.LEVEL_ELAPSED_TIME_SECONDS)t="play.getCurrentLevel().getElapsedTimeSeconds()";else if(e==o.default.MOUSE_POS_X)t="play.getMouseX()";else if(e==o.default.MOUSE_POS_Y)t="play.getMouseY()";else if(e==o.default.CAMERA_POSITION_X)t="play.getCameraPositionX()";else if(e==o.default.CAMERA_POSITION_Y)t="play.getCameraPositionY()";else if(e==o.default.CAMERA_CENTER_X)t="play.getCameraCenterX()";else if(e==o.default.CAMERA_CENTER_Y)t="play.getCameraCenterY()";else if(e==o.default.CAMERA_ROTATION_RADIANS)t="play.getCameraRotation()";else if(e==o.default.CAMERA_ROTATION_DEGREES)t="play.getCameraRotationDegrees()";else if(e==o.default.ZOOM)t="play.getZoom()";else if(e==o.default.CANVAS_WIDTH)t="play.getCanvasWidth()";else if(e==o.default.CANVAS_HEIGHT)t="play.getCanvasHeight()";else if(e==o.default.GLOBAL_VARIABLE)t='play.getGlobalVariable("'+this.expressionGlobalVariableName+'")';else if(e==o.default.LEVEL_VARIABLE)t='play.getLevelVariable("'+this.expressionLevelVariableName+'")';else if(e==o.default.OBJECT_ATTRIBUTE){t=null!=(a=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName))&&null!=this.expressionObjectAttribute?"height"==this.expressionObjectAttribute?a+".getHeight()":"width"==this.expressionObjectAttribute?a+".getWidth()":"xLeft"==this.expressionObjectAttribute?a+".getXLeft()":"xRight"==this.expressionObjectAttribute?a+".getXRight()":"yTop"==this.expressionObjectAttribute?a+".getYTop()":"yBottom"==this.expressionObjectAttribute?a+".getYBottom()":"angularVelocity"==this.expressionObjectAttribute?a+".getAngularVelocity()":a+"."+this.expressionObjectAttribute:""}else if(e==o.default.NEAT_ATTRIBUTE){var r=null;"name"==this.expressionNeatAttribute?r="getName()":"generation"==this.expressionNeatAttribute?r="getGeneration()":"populationSize"==this.expressionNeatAttribute&&(r="getPopulationSize()"),t="play.getNeatExtension().getNeat('"+this.expressionNeatUid+"')."+r}else if(e==o.default.OBJECT_NEURAL_NETWORK_ATTRIBUTE){var a=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName);r=null;"id"==this.expressionNeuralNetworkAttribute?r="getId()":"score"==this.expressionNeuralNetworkAttribute&&(r="getScore()"),t=null!=a&&null!=r&&null!=this.expressionLoopObjectVariable?a+'.getVariable("'+this.expressionLoopObjectVariable+'").'+r:""}else if(e==o.default.OBJECT_NEURAL_NETWORK_OUTPUT){a=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName);var s=this.expressionNeuralNetworkOutputIndex;t=null!=a&&null!=s&&null!=this.expressionLoopObjectVariable?a+'.getVariable("'+this.expressionLoopObjectVariable+'").outputs['+s+"]":""}else if(e==o.default.OBJECT_METHOD){null!=(a=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName))&&null!=this.expressionObjectMethod?"JUST_STARTED_JUMPING"==this.expressionObjectMethod?t=a+".hasJustStartedJumping()":"IS_ON_PLATFORM"==this.expressionObjectMethod?t=a+".isOnPlatform()":"IS_JUMPING"==this.expressionObjectMethod?t=a+".isJumping()":"JUST_BOUNCED"==this.expressionObjectMethod&&(t=a+".hasJustBounced()"):t=""}else if(e==o.default.OBJECT_VARIABLE){t=null!=(a=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName))&&null!=this.expressionLoopObjectVariable?a+'.getVariable("'+this.expressionLoopObjectVariable+'")':""}else if(e==o.default.OBJECT){t=null!=(a=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName))?""+a:""}else if(e==o.default.LOOP_NUMBER)t="$"+this.expressionLoopVariableName;else if(e==o.default.LEVEL_NAME)t="play.getCurrentLevel().getName()";else if(e==o.default.CURRENT_LEVEL_FRAME)t="play.getCurrentLevel().getCurrentFrame()";else if(e==o.default.LOCAL_STORAGE_VARIABLE)t="number"==this.localStorageVariableType?'Number(localStorage.getItem("'+this.expressionLocalStorageVariableName+'"))':"boolean"==this.localStorageVariableType?'Boolean(localStorage.getItem("'+this.expressionLocalStorageVariableName+'"))':'localStorage.getItem("'+this.expressionLocalStorageVariableName+'")';else if(e==o.default.DISTANCE_BETWEEN_LOOP_OBJECTS){var l=this.getObjectAccess(this.objectSelectorDefinition,this.expressionLoopVariableName),u=this.getObjectAccess(this.objectSelectorDefinition2,this.expressionLoopVariableName2);t=null!=l&&null!=u?"play.util.distanceObjects("+l+", "+u+")":""}else e==o.default.ACCELEROMETER_X?t="play.accelerometer.x":e==o.default.ACCELEROMETER_Y?t="play.accelerometer.y":e==o.default.ACCELEROMETER_Z?t="play.accelerometer.z":e==o.default.LAST_TOUCH_X?t="play.lastTouchX":e==o.default.LAST_TOUCH_Y?t="play.lastTouchY":e==o.default.PI?t="Math.PI":e==o.default.SIN?t="Math.sin("+this.expressionParam1+")":e==o.default.COS?t="Math.cos("+this.expressionParam1+")":e==o.default.TAN?t="Math.tan("+this.expressionParam1+")":e==o.default.ATAN2?t="Math.atan2("+this.expressionParam2+","+this.expressionParam1+")":e==o.default.SQRT?t="Math.sqrt("+this.expressionParam1+")":e==o.default.ABS?t="Math.abs("+this.expressionParam1+")":e==o.default.CEIL?t="Math.ceil("+this.expressionParam1+")":e==o.default.FLOOR?t="Math.floor("+this.expressionParam1+")":e==o.default.MAX?t="Math.max("+this.expressionParam1+","+this.expressionParam2+")":e==o.default.MIN?t="Math.min("+this.expressionParam1+","+this.expressionParam2+")":e==o.default.ROUND?t="Math.round("+this.expressionParam1+")":e==o.default.OBJECT_COUNT?t='play.getObjectCountByType("'+this.expressionObjectTypeUid+'")':e==o.default.GAMEPAD_BUTTON_VALUE?t="play.getGamepadButtonValue("+this.gamepadIndex+","+this.gamepadButtonIndex+")":e==o.default.GAMEPAD_AXIS_VALUE?t="play.getGamepadAxisValue("+this.gamepadIndex+","+this.gamepadAxisIndex+")":e==o.default.GAMEPAD_BUTTONS_LENGTH?t="play.getGamepadButtonsLength("+this.gamepadIndex+")":e==o.default.GAMEPAD_AXES_LENGTH&&(t="play.getGamepadAxesLength("+this.gamepadIndex+")");this.expressionToInsert=t},e.prototype.getObjectAccess=function(e,t){var i=null;if(e.type==a.default.LOOP_OBJECT)null!=t&&(i="$"+t);else if(e.type==a.default.GLOBAL_VARIABLE){null!=(n=this.util.buildObjectSelectorDefinition(e,this.mainController.gameParamsJson,this.mainController.currentScript.level)).variable&&(i='play.getGlobalVariable("'+n.variable.name+'")')}else if(e.type==a.default.LEVEL_VARIABLE){var n;null!=(n=this.util.buildObjectSelectorDefinition(e,this.mainController.gameParamsJson,this.mainController.currentScript.level)).variable&&(i='play.getLevelVariable("'+n.variable.name+'")')}return i},e.prototype.insertExpression=function(){var e=this.expressionToInsert;if("newEventCondition.expression"==this.currentExpressionField)null==this.mainController.newEventCondition.expression&&(this.mainController.newEventCondition.expression=""),this.mainController.newEventCondition.expression+=e;else if("newEventCondition.x1"==this.currentExpressionField)null==this.mainController.newEventCondition.x1&&(this.mainController.newEventCondition.x1=""),this.mainController.newEventCondition.x1+=e;else if("newEventCondition.x2"==this.currentExpressionField)null==this.mainController.newEventCondition.x2&&(this.mainController.newEventCondition.x2=""),this.mainController.newEventCondition.x2+=e;else if("newEventCondition.y1"==this.currentExpressionField)null==this.mainController.newEventCondition.y1&&(this.mainController.newEventCondition.y1=""),this.mainController.newEventCondition.y1+=e;else if("newEventCondition.y2"==this.currentExpressionField)null==this.mainController.newEventCondition.y2&&(this.mainController.newEventCondition.y2=""),this.mainController.newEventCondition.y2+=e;else if("newEventCondition.distance"==this.currentExpressionField)null==this.mainController.newEventCondition.distance&&(this.mainController.newEventCondition.distance=""),this.mainController.newEventCondition.distance+=e;else if("newEventCondition.gamepadButtonIndex"==this.currentExpressionField)null==this.mainController.newEventCondition.gamepadButtonIndex&&(this.mainController.newEventCondition.gamepadButtonIndex=""),this.mainController.newEventCondition.gamepadButtonIndex+=e;else if("newEventCondition.gamepadIndex"==this.currentExpressionField)null==this.mainController.newEventCondition.gamepadIndex&&(this.mainController.newEventCondition.gamepadIndex=""),this.mainController.newEventCondition.gamepadIndex+=e;else if("newEventAction.x"==this.currentExpressionField)null==this.mainController.newEventAction.x&&(this.mainController.newEventAction.x=""),this.mainController.newEventAction.x+=e;else if("newEventAction.y"==this.currentExpressionField)null==this.mainController.newEventAction.y&&(this.mainController.newEventAction.y=""),this.mainController.newEventAction.y+=e;else if("newEventAction.speedX"==this.currentExpressionField)null==this.mainController.newEventAction.speedX&&(this.mainController.newEventAction.speedX=""),this.mainController.newEventAction.speedX+=e;else if("newEventAction.speedY"==this.currentExpressionField)null==this.mainController.newEventAction.speedY&&(this.mainController.newEventAction.speedY=""),this.mainController.newEventAction.speedY+=e;else if("newEventAction.value"==this.currentExpressionField)null==this.mainController.newEventAction.value&&(this.mainController.newEventAction.value=""),this.mainController.newEventAction.value+=e;else if("newEventAction.speed"==this.currentExpressionField)null==this.mainController.newEventAction.speed&&(this.mainController.newEventAction.speed=""),this.mainController.newEventAction.speed+=e;else if("newEventAction.angle"==this.currentExpressionField)null==this.mainController.newEventAction.angle&&(this.mainController.newEventAction.angle=""),this.mainController.newEventAction.angle+=e;else if("newEventAction.startAngle"==this.currentExpressionField)null==this.mainController.newEventAction.startAngle&&(this.mainController.newEventAction.startAngle=""),this.mainController.newEventAction.startAngle+=e;else if("newEventAction.endAngle"==this.currentExpressionField)null==this.mainController.newEventAction.endAngle&&(this.mainController.newEventAction.endAngle=""),this.mainController.newEventAction.endAngle+=e;else if("newEventAction.force"==this.currentExpressionField)null==this.mainController.newEventAction.force&&(this.mainController.newEventAction.force=""),this.mainController.newEventAction.force+=e;else if("newEventAction.sourceX"==this.currentExpressionField)null==this.mainController.newEventAction.sourceX&&(this.mainController.newEventAction.sourceX=""),this.mainController.newEventAction.sourceX+=e;else if("newEventAction.sourceY"==this.currentExpressionField)null==this.mainController.newEventAction.sourceY&&(this.mainController.newEventAction.sourceY=""),this.mainController.newEventAction.sourceY+=e;else if("newEventAction.targetX"==this.currentExpressionField)null==this.mainController.newEventAction.targetX&&(this.mainController.newEventAction.targetX=""),this.mainController.newEventAction.targetX+=e;else if("newEventAction.targetY"==this.currentExpressionField)null==this.mainController.newEventAction.targetY&&(this.mainController.newEventAction.targetY=""),this.mainController.newEventAction.targetY+=e;else if("newEventAction.variable"==this.currentExpressionField)null==this.mainController.newEventAction.variable&&(this.mainController.newEventAction.variable=""),this.mainController.newEventAction.variable+=e;else if("newEventAction.expression"==this.currentExpressionField)null==this.mainController.newEventAction.expression&&(this.mainController.newEventAction.expression=""),this.mainController.newEventAction.expression+=e;else if("newEventAction.lineWidth"==this.currentExpressionField)null==this.mainController.newEventAction.lineWidth&&(this.mainController.newEventAction.lineWidth=""),this.mainController.newEventAction.lineWidth+=e;else if("newEventAction.x1"==this.currentExpressionField)null==this.mainController.newEventAction.x1&&(this.mainController.newEventAction.x1=""),this.mainController.newEventAction.x1+=e;else if("newEventAction.y1"==this.currentExpressionField)null==this.mainController.newEventAction.y1&&(this.mainController.newEventAction.y1=""),this.mainController.newEventAction.y1+=e;else if("newEventAction.x2"==this.currentExpressionField)null==this.mainController.newEventAction.x2&&(this.mainController.newEventAction.x2=""),this.mainController.newEventAction.x2+=e;else if("newEventAction.y2"==this.currentExpressionField)null==this.mainController.newEventAction.y2&&(this.mainController.newEventAction.y2=""),this.mainController.newEventAction.y2+=e;else if("newEventAction.radius"==this.currentExpressionField)null==this.mainController.newEventAction.radius&&(this.mainController.newEventAction.radius=""),this.mainController.newEventAction.radius+=e;else if("newEventAction.width"==this.currentExpressionField)null==this.mainController.newEventAction.width&&(this.mainController.newEventAction.width=""),this.mainController.newEventAction.width+=e;else if("newEventAction.height"==this.currentExpressionField)null==this.mainController.newEventAction.height&&(this.mainController.newEventAction.height=""),this.mainController.newEventAction.height+=e;else if("newEventAction.alpha"==this.currentExpressionField)null==this.mainController.newEventAction.alpha&&(this.mainController.newEventAction.alpha=""),this.mainController.newEventAction.alpha+=e;else if("newEventAction.rotation"==this.currentExpressionField)null==this.mainController.newEventAction.rotation&&(this.mainController.newEventAction.rotation=""),this.mainController.newEventAction.rotation+=e;else if("newEventAction.text"==this.currentExpressionField)null==this.mainController.newEventAction.text&&(this.mainController.newEventAction.text=""),this.mainController.newEventAction.text+=e;else if("newEventAction.maxValue"==this.currentExpressionField)null==this.mainController.newEventAction.maxValue&&(this.mainController.newEventAction.maxValue=""),this.mainController.newEventAction.maxValue+=e;else if("newEventAction.fontSize"==this.currentExpressionField)null==this.mainController.newEventAction.fontSize&&(this.mainController.newEventAction.fontSize=""),this.mainController.newEventAction.fontSize+=e;else if("newEventAction.volume"==this.currentExpressionField)null==this.mainController.newEventAction.volume&&(this.mainController.newEventAction.volume=""),this.mainController.newEventAction.volume+=e;else if("newEventAction.color.red"==this.currentExpressionField)null==this.mainController.newEventAction.color&&(this.mainController.newEventAction.color=new n.default("","","")),this.mainController.newEventAction.color.red+=e;else if("newEventAction.color.green"==this.currentExpressionField)null==this.mainController.newEventAction.color&&(this.mainController.newEventAction.color=new n.default("","","")),this.mainController.newEventAction.color.green+=e;else if("newEventAction.color.blue"==this.currentExpressionField)null==this.mainController.newEventAction.color&&(this.mainController.newEventAction.color=new n.default("","","")),this.mainController.newEventAction.color.blue+=e;else if("newEventAction.borderColor.red"==this.currentExpressionField)null==this.mainController.newEventAction.borderColor&&(this.mainController.newEventAction.borderColor=new n.default("","","")),this.mainController.newEventAction.borderColor.red+=e;else if("newEventAction.borderColor.green"==this.currentExpressionField)null==this.mainController.newEventAction.borderColor&&(this.mainController.newEventAction.borderColor=new n.default("","","")),this.mainController.newEventAction.borderColor.green+=e;else if("newEventAction.borderColor.blue"==this.currentExpressionField)null==this.mainController.newEventAction.borderColor&&(this.mainController.newEventAction.borderColor=new n.default("","","")),this.mainController.newEventAction.borderColor.blue+=e;else if("newEventAction.backgroundColor.red"==this.currentExpressionField)null==this.mainController.newEventAction.backgroundColor&&(this.mainController.newEventAction.backgroundColor=new n.default("","","")),this.mainController.newEventAction.backgroundColor.red+=e;else if("newEventAction.backgroundColor.green"==this.currentExpressionField)null==this.mainController.newEventAction.backgroundColor&&(this.mainController.newEventAction.backgroundColor=new n.default("","","")),this.mainController.newEventAction.backgroundColor.green+=e;else if("newEventAction.backgroundColor.blue"==this.currentExpressionField)null==this.mainController.newEventAction.backgroundColor&&(this.mainController.newEventAction.backgroundColor=new n.default("","","")),this.mainController.newEventAction.backgroundColor.blue+=e;else if("newEventAction.index"==this.currentExpressionField)null==this.mainController.newEventAction.index&&(this.mainController.newEventAction.index=""),this.mainController.newEventAction.index+=e;else if("newEventAction.inputs"==this.currentExpressionField){var t=this.currentExpressionArrayIndex;null==this.mainController.newEventAction.inputs[t].value&&(this.mainController.newEventAction.inputs[t].value=""),this.mainController.newEventAction.inputs[t].value+=e}else"newLoop.times"==this.currentExpressionField?(null==this.mainController.editLoopController.newLoop.times&&(this.mainController.editLoopController.newLoop.times=""),this.mainController.editLoopController.newLoop.times+=e):"newEventAction.zIndex"==this.currentExpressionField?(null==this.mainController.newEventAction.zIndex&&(this.mainController.newEventAction.zIndex=""),this.mainController.newEventAction.zIndex+=e):"newEventAction.duration"==this.currentExpressionField?(null==this.mainController.newEventAction.duration&&(this.mainController.newEventAction.duration=""),this.mainController.newEventAction.duration+=e):"newEventAction.startDelay"==this.currentExpressionField?(null==this.mainController.newEventAction.startDelay&&(this.mainController.newEventAction.startDelay=""),this.mainController.newEventAction.startDelay+=e):"newEventAction.weakMagnitude"==this.currentExpressionField?(null==this.mainController.newEventAction.weakMagnitude&&(this.mainController.newEventAction.weakMagnitude=""),this.mainController.newEventAction.weakMagnitude+=e):"newEventAction.strongMagnitude"==this.currentExpressionField?(null==this.mainController.newEventAction.strongMagnitude&&(this.mainController.newEventAction.strongMagnitude=""),this.mainController.newEventAction.strongMagnitude+=e):"newEventAction.damping"==this.currentExpressionField?(null==this.mainController.newEventAction.damping&&(this.mainController.newEventAction.damping=""),this.mainController.newEventAction.damping+=e):"newEventAction.stiffness"==this.currentExpressionField&&(null==this.mainController.newEventAction.stiffness&&(this.mainController.newEventAction.stiffness=""),this.mainController.newEventAction.stiffness+=e);this.closeExpressionHelp()},e.prototype.updateExpressionLoopObjectVariables=function(){this.updateExpressionObjectVariables()},e.prototype.updateExpressionObjectVariables=function(){var e=this;this.expressionLoopObjectVariables=new Array;var t=null;if(this.objectSelectorDefinition.type==a.default.LOOP_OBJECT)t=this.mainController.currentLocalVariables.find((function(t){return t.name==e.expressionLoopVariableName}));else if(this.objectSelectorDefinition.type==a.default.GLOBAL_VARIABLE){t=this.util.buildObjectSelectorDefinition(this.objectSelectorDefinition,this.mainController.gameParamsJson,this.mainController.currentScript.level).variable}else if(this.objectSelectorDefinition.type==a.default.LEVEL_VARIABLE){t=this.util.buildObjectSelectorDefinition(this.objectSelectorDefinition,this.mainController.gameParamsJson,this.mainController.currentScript.level).variable}null!=t&&null!=t.objectType&&(this.expressionLoopObjectVariables=t.objectType.objectVariables)},e.prototype.clearExpressionHelpForm=function(){this.expressionType=null,this.expressionToInsert=null,this.expressionObjectAttribute=null,this.expressionNeatAttribute=null,this.expressionNeatUid=null,this.expressionNeuralNetworkAttribute=null,this.expressionObjectMethod=null,this.expressionLoopVariableName=null,this.expressionLoopVariableName2=null,this.expressionGlobalVariableName=null,this.expressionLevelVariableName=null,this.expressionLoopObjectVariables=new Array,this.expressionLoopObjectVariable=null,this.expressionLocalStorageVariableName=null,this.objectSelectorDefinition=new r.default,this.objectSelectorDefinition.variable=new s.default,this.objectSelectorDefinition2=new r.default,this.objectSelectorDefinition2.variable=new s.default,this.outputs=new Array},e}();t.default=c},function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),o=i(11),r=i(3),a=i(0),s=i(9),l=function(){function e(e){this.oldObjectVariable=null,this.newObjectVariable=null,this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new a.default}return e.prototype.addObjectVariable=function(e){null==this.mainController.gameParamsJson.customObjectTypes[e].objectVariables&&(this.mainController.gameParamsJson.customObjectTypes[e].objectVariables=new Array);var t=new r.default;t.uid=this.util.uid(),t.name=this.generateObjectVariableName("variable"),t.initialValue=0,t.type=s.default.NUMBER,t.objectType=new n.default,t.neat=new o.default,this.mainController.gameParamsJson.customObjectTypes[e].objectVariables.push(t)},e.prototype.cancelChangesObjectVariable=function(){this.mainController.setCurrentTab2("CUSTOM_OBJECT_VARIABLES"),this.errorMessage=null,this.errorField=null,this.oldObjectVariable=null,this.newObjectVariable=null},e.prototype.updateObjectVariable=function(){var e=this;this.validateObjectVariable()&&(this.mainController.setCurrentTab2("CUSTOM_OBJECT_VARIABLES"),this.oldObjectVariable.name=this.newObjectVariable.name,this.oldObjectVariable.type=this.newObjectVariable.type,this.oldObjectVariable.objectType=this.mainController.gameParamsJson.customObjectTypes.find((function(t){return t.uid==e.newObjectVariable.objectType.uid})),this.newObjectVariable.type==s.default.NEAT_NEURAL_NETWORK&&null!=this.mainController.gameParamsJson.extensions.neatExtension?this.oldObjectVariable.neat=this.mainController.gameParamsJson.extensions.neatExtension.neatList.find((function(t){return t.uid==e.newObjectVariable.neat.uid})):this.oldObjectVariable.neat=null,this.newObjectVariable.type==s.default.NUMBER?this.oldObjectVariable.initialValue=Number(this.newObjectVariable.initialValue):this.newObjectVariable.type==s.default.STRING?this.oldObjectVariable.initialValue=String(this.newObjectVariable.initialValue):this.newObjectVariable.type==s.default.BOOLEAN?"true"==this.newObjectVariable.initialValue||1==this.newObjectVariable.initialValue?this.oldObjectVariable.initialValue=!0:"false"==this.newObjectVariable.initialValue||0==this.newObjectVariable.initialValue?this.oldObjectVariable.initialValue=!1:this.oldObjectVariable.initialValue=null:(this.newObjectVariable.type,s.default.NEAT_NEURAL_NETWORK,this.oldObjectVariable.initialValue=null),this.oldObjectVariable=null,this.newObjectVariable=null)},e.prototype.deleteObjectVariable=function(e,t){this.mainController.gameParamsJson.customObjectTypes[e].objectVariables.splice(t,1)},e.prototype.editObjectVariable=function(e){this.mainController.setCurrentScreen("EDIT_OBJECT_VARIABLE"),this.oldObjectVariable=e,this.newObjectVariable=this.util.cloneObject(this.oldObjectVariable),null==this.newObjectVariable.objectType&&(this.newObjectVariable.objectType=new n.default),null==this.newObjectVariable.neat&&(this.newObjectVariable.neat=new o.default)},e.prototype.validateObjectVariable=function(){this.errorMessage=null,this.errorField=null;var e=this.getObjectVariableByName(this.newObjectVariable.name);return null==e||e.uid==this.newObjectVariable.uid||(this.errorMessage="There is already another object variable with that name. Choose another one.",this.errorField="name",!1)},e.prototype.generateObjectVariableName=function(e){for(var t=1,i=e+t;this.objectVariableNameAlreadyExists(i);)i=e+ ++t;return i},e.prototype.getObjectVariableByName=function(e){return this.mainController.customObjectTypeController.oldCustomObjectType.objectVariables.find((function(t){return t.name==e}))},e.prototype.objectVariableNameAlreadyExists=function(e){return null!=this.getObjectVariableByName(e)},e}();t.default=l},function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),o=i(3),r=i(0),a=i(9),s=function(){function e(e){this.oldGlobalVariable=null,this.newGlobalVariable=null,this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new r.default}return e.prototype.addGlobalVariable=function(){var e=new o.default;e.uid=this.util.uid(),e.name=this.generateGlobalVariableName("globalVariable"),e.initialValue=0,e.type=a.default.NUMBER,e.objectType=new n.default,this.mainController.gameParamsJson.globalVariables.push(e)},e.prototype.deleteGlobalVariable=function(e){this.mainController.gameParamsJson.globalVariables.splice(e,1)},e.prototype.editGlobalVariable=function(e){this.mainController.setCurrentScreen("EDIT_GLOBAL_VARIABLE"),this.oldGlobalVariable=e,this.newGlobalVariable=this.util.cloneObject(this.oldGlobalVariable),null==this.newGlobalVariable.objectType&&(this.newGlobalVariable.objectType=new n.default)},e.prototype.cancelChangesGlobalVariable=function(){this.mainController.setCurrentTab("GLOBAL_VARIABLES"),this.errorMessage=null,this.errorField=null,this.oldGlobalVariable=null,this.newGlobalVariable=null},e.prototype.updateGlobalVariable=function(){var e=this;this.validateGlobalVariable()&&(this.mainController.setCurrentTab("GLOBAL_VARIABLES"),this.oldGlobalVariable.name=this.newGlobalVariable.name,this.oldGlobalVariable.type=this.newGlobalVariable.type,this.oldGlobalVariable.objectType=this.mainController.gameParamsJson.customObjectTypes.find((function(t){return t.uid==e.newGlobalVariable.objectType.uid})),this.newGlobalVariable.type==a.default.NUMBER?this.oldGlobalVariable.initialValue=Number(this.newGlobalVariable.initialValue):this.newGlobalVariable.type==a.default.STRING?this.oldGlobalVariable.initialValue=String(this.newGlobalVariable.initialValue):this.newGlobalVariable.type==a.default.BOOLEAN?"true"==this.newGlobalVariable.initialValue||1==this.newGlobalVariable.initialValue?this.oldGlobalVariable.initialValue=!0:"false"==this.newGlobalVariable.initialValue||0==this.newGlobalVariable.initialValue?this.oldGlobalVariable.initialValue=!1:this.oldGlobalVariable.initialValue=null:this.oldGlobalVariable.initialValue=null,this.oldGlobalVariable=null,this.newGlobalVariable=null,this.mainController.autoSave())},e.prototype.validateGlobalVariable=function(){this.errorMessage=null,this.errorField=null;var e=this.getGlobalVariableByName(this.newGlobalVariable.name);return null==e||e.uid==this.newGlobalVariable.uid||(this.errorMessage="There is already another global variable with that name. Choose another one.",this.errorField="name",!1)},e.prototype.generateGlobalVariableName=function(e){for(var t=1,i=e+t;this.globalVariableNameAlreadyExists(i);)i=e+ ++t;return i},e.prototype.getGlobalVariableByName=function(e){return this.mainController.gameParamsJson.globalVariables.find((function(t){return t.name==e}))},e.prototype.globalVariableNameAlreadyExists=function(e){return null!=this.getGlobalVariableByName(e)},e}();t.default=s},function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),o=i(3),r=i(0),a=i(9),s=function(){function e(e){this.newLevelVariable=null,this.oldLevelVariable=null,this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new r.default}return e.prototype.addLevelVariable=function(e){null==this.mainController.gameParamsJson.levels[e].levelVariables&&(this.mainController.gameParamsJson.levels[e].levelVariables=new Array);var t=new o.default;t.uid=this.util.uid(),t.name=this.generateLevelVariableName("variable",e),t.initialValue=0,t.type=a.default.NUMBER,t.objectType=new n.default,this.mainController.gameParamsJson.levels[e].levelVariables.push(t)},e.prototype.deleteLevelVariable=function(e,t){this.mainController.gameParamsJson.levels[e].levelVariables.splice(t,1)},e.prototype.editLevelVariable=function(e){this.mainController.setCurrentScreen("EDIT_LEVEL_VARIABLE"),this.oldLevelVariable=e,this.newLevelVariable=this.util.cloneObject(this.oldLevelVariable),null==this.newLevelVariable.objectType&&(this.newLevelVariable.objectType=new n.default)},e.prototype.cancelChangesLevelVariable=function(){this.mainController.setCurrentTab2("LEVEL_VARIABLES"),this.errorMessage=null,this.errorField=null,this.oldLevelVariable=null,this.newLevelVariable=null},e.prototype.updateLevelVariable=function(){var e=this;this.validateLevelVariable()&&(this.mainController.setCurrentTab2("LEVEL_VARIABLES"),this.oldLevelVariable.name=this.newLevelVariable.name,this.oldLevelVariable.type=this.newLevelVariable.type,this.oldLevelVariable.objectType=this.mainController.gameParamsJson.customObjectTypes.find((function(t){return t.uid==e.newLevelVariable.objectType.uid})),this.newLevelVariable.type==a.default.NUMBER?this.oldLevelVariable.initialValue=Number(this.newLevelVariable.initialValue):this.newLevelVariable.type==a.default.STRING?this.oldLevelVariable.initialValue=String(this.newLevelVariable.initialValue):this.newLevelVariable.type==a.default.BOOLEAN?"true"==this.newLevelVariable.initialValue||1==this.newLevelVariable.initialValue?this.oldLevelVariable.initialValue=!0:"false"==this.newLevelVariable.initialValue||0==this.newLevelVariable.initialValue?this.oldLevelVariable.initialValue=!1:this.oldLevelVariable.initialValue=null:this.oldLevelVariable.initialValue=null,this.oldLevelVariable=null,this.newLevelVariable=null,this.mainController.autoSave())},e.prototype.validateLevelVariable=function(){this.errorMessage=null,this.errorField=null;var e=this.getLevelVariableByName(this.newLevelVariable.name,this.mainController.levelController.currentLevelIndex);return null==e||e.uid==this.newLevelVariable.uid||(this.errorMessage="There is already another level variable with that name. Choose another one.",this.errorField="name",!1)},e.prototype.generateLevelVariableName=function(e,t){for(var i=1,n=e+i;this.levelVariableNameAlreadyExists(n,t);)n=e+ ++i;return n},e.prototype.getLevelVariableByName=function(e,t){return this.mainController.gameParamsJson.levels[t].levelVariables.find((function(t){return t.name==e}))},e.prototype.levelVariableNameAlreadyExists=function(e,t){return null!=this.getLevelVariableByName(e,t)},e}();t.default=s},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(1),r=i(26),a=i(5),s=i(28),l=i(14),u=i(8),d=i(12),c=i(0),h=function(){function e(e){this.errorMessage=null,this.errorField=null,this.oldCustomObjectType=null,this.newCustomObjectType=null,this.currentCustomObjectTypeIndex=null,this.mainController=e,this.util=new c.default}return e.prototype.validateCustomObjectType=function(){if(this.errorMessage=null,this.errorField=null,this.newCustomObjectType.physicsEngineType==u.default.BASIC&&0==this.newCustomObjectType.applyGravity)for(var e=this.oldCustomObjectType.behaviours,t=0;t<e.length;t++){if("JUMP_ON_PLATFORM"==e[t].type)return this.errorMessage='The object type has a "JUMP_ON_PLATFORM" behaviour but the field "apply gravity" is not checked. Check the field "apply gravity" above, or remove the behaviour "JUMP_ON_PLATFORM".',this.errorField="applyGravity",!1}if(""==this.newCustomObjectType.id)return this.errorMessage='Field "id" is required.',this.errorField="id",!1;if(this.newCustomObjectType.id.includes(" "))return this.errorMessage='Field "id" cannot contain white spaces.',this.errorField="id",!1;if(!this.newCustomObjectType.id.match(/^[a-zA-Z0-9_]+$/i))return this.errorMessage='Field "id" can contain only letters, numbers and underscore.',this.errorField="id",!1;if(!this.newCustomObjectType.id.substring(0,1).match(/^[a-zA-Z]+$/i))return this.errorMessage='Field "id" must start with a letter.',this.errorField="id",!1;var i=this.getObjectTypeById(this.newCustomObjectType.id);if(null!=i&&i.uid!=this.newCustomObjectType.uid)return this.errorMessage="There is already another object type with that id. Choose another one.",this.errorField="id",!1;if(this.newCustomObjectType.physicsEngineType==u.default.MATTER_JS){if(null==this.newCustomObjectType.restitution)return this.errorMessage='Field "restitution" is required.',this.errorField="restitution",!1;if(isNaN(Number(this.newCustomObjectType.restitution)))return this.errorMessage='Field "restitution" must be a number.',this.errorField="restitution",!1;if(this.newCustomObjectType.restitution<0||this.newCustomObjectType.restitution>1)return this.errorMessage='Field "restitution" must be a number between 0 and 1.',this.errorField="restitution",!1;if(null==this.newCustomObjectType.friction)return this.errorMessage='Field "friction" is required.',this.errorField="friction",!1;if(isNaN(Number(this.newCustomObjectType.friction)))return this.errorMessage='Field "friction" must be a number.',this.errorField="friction",!1;if(this.newCustomObjectType.friction<0||this.newCustomObjectType.friction>1)return this.errorMessage='Field "friction" must be a number between 0 and 1.',this.errorField="friction",!1;if(null==this.newCustomObjectType.airFriction)return this.errorMessage='Field "air friction" is required.',this.errorField="airFriction",!1;if(isNaN(Number(this.newCustomObjectType.airFriction)))return this.errorMessage='Field "air friction" must be a number.',this.errorField="airFriction",!1;if(null==this.newCustomObjectType.density)return this.errorMessage='Field "density" is required.',this.errorField="density",!1;if(isNaN(Number(this.newCustomObjectType.density)))return this.errorMessage='Field "density" must be a number.',this.errorField="density",!1;if(this.newCustomObjectType.density<=0)return this.errorMessage='Field "density" must be a positive number.',this.errorField="density",!1;if(null==this.newCustomObjectType.angularVelocity)return this.errorMessage='Field "angular velocity" is required.',this.errorField="angularVelocity",!1;if(isNaN(Number(this.newCustomObjectType.angularVelocity)))return this.errorMessage='Field "angular velocity" must be a number.',this.errorField="angularVelocity",!1;if(this.newCustomObjectType.shape==d.default.POLYGON){if(null==this.newCustomObjectType.numSidesPolygon)return this.errorMessage='Field "polygon sides" is required.',this.errorField="numSidesPolygon",!1;if(isNaN(Number(this.newCustomObjectType.numSidesPolygon)))return this.errorMessage='Field "polygon sides" must be a number.',this.errorField="numSidesPolygon",!1;if(this.newCustomObjectType.numSidesPolygon<3)return this.errorMessage='Field "polygon sides" must be at least 3.',this.errorField="numSidesPolygon",!1}}else if(this.newCustomObjectType.physicsEngineType==u.default.BASIC&&this.newCustomObjectType.shape!=d.default.RECTANGLE&&this.newCustomObjectType.shape!=d.default.CIRCLE)return this.errorMessage='Field "shape" must be Rectangle or Circle.',this.errorField="shape",!1;return!0},e.prototype.generateObjectTypeId=function(){for(var e=1,t="ObjectType"+e;this.objectTypeIdAlreadyExists(t);)t="ObjectType"+ ++e;return t},e.prototype.getObjectTypeById=function(e){return this.mainController.gameParamsJson.customObjectTypes.find((function(t){return t.id==e}))},e.prototype.objectTypeIdAlreadyExists=function(e){return null!=this.getObjectTypeById(e)},e.prototype.addCustomObjectType=function(){var e=new o.default;e.uid=this.util.uid(),e.id=this.generateObjectTypeId(),e.width=30,e.height=30,e.electricCharge=0,e.mass=1,e.alpha=1,e.applyGravity=!1,e.behaviours=new Array,e.animations=new Array,e.initialAnimation=null,e.renderType=l.default.IMAGE,e.drawType=r.default.FILL_AND_STROKE,e.borderSize=1,e.shape=d.default.RECTANGLE,e.color=new n.default(255,0,0),e.borderColor=new n.default(0,0,0),e.objectVariables=new Array,e.zIndex=0,e.physicsEngineType=u.default.BASIC,e.isStatic=!1,e.isSensor=!1,e.restitution=0,e.airFriction=.01,e.friction=.1,e.density=.001,e.angularVelocity=0,e.numSidesPolygon=3;var t=new a.default;t.imageSourceType=s.default.LIBRARY,t.imageId="images/asset-packs/kenney/2d/puzzle-2/png/balls/grey/edited/ball-red.png",e.image=t,this.mainController.gameParamsJson.customObjectTypes.push(e),this.mainController.updateObjectTypesWithMiniatures()},e.prototype.editCustomObjectType=function(e){this.mainController.setCurrentTab("CUSTOM_OBJECT_TYPES"),this.mainController.setCurrentTab2("CUSTOM_OBJECT_TYPE_PROPERTIES");var t=this.mainController.gameParamsJson.customObjectTypes[e];this.oldCustomObjectType=t,this.newCustomObjectType=this.util.cloneObject(t),this.currentCustomObjectTypeIndex=e,null!=t.initialAnimation&&(this.mainController.customObjectTypeAnimationController.initialAnimationUid=t.initialAnimation.uid)},e.prototype.updateCustomObjectType=function(){this.validateCustomObjectType()&&(this.mainController.setCurrentTab("CUSTOM_OBJECT_TYPES"),this.oldCustomObjectType.id=this.newCustomObjectType.id,this.oldCustomObjectType.width=Number(this.newCustomObjectType.width),this.oldCustomObjectType.height=Number(this.newCustomObjectType.height),this.oldCustomObjectType.electricCharge=Number(this.newCustomObjectType.electricCharge),this.oldCustomObjectType.mass=Number(this.newCustomObjectType.mass),this.oldCustomObjectType.alpha=Number(this.newCustomObjectType.alpha),this.oldCustomObjectType.applyGravity=this.newCustomObjectType.applyGravity,this.oldCustomObjectType.renderType=this.newCustomObjectType.renderType,this.oldCustomObjectType.drawType=this.newCustomObjectType.drawType,this.oldCustomObjectType.shape=this.newCustomObjectType.shape,this.oldCustomObjectType.borderSize=Number(this.newCustomObjectType.borderSize),this.oldCustomObjectType.zIndex=Number(this.newCustomObjectType.zIndex),this.oldCustomObjectType.physicsEngineType=this.newCustomObjectType.physicsEngineType,this.oldCustomObjectType.isStatic=this.newCustomObjectType.isStatic,this.oldCustomObjectType.isSensor=this.newCustomObjectType.isSensor,this.oldCustomObjectType.restitution=Number(this.newCustomObjectType.restitution),this.oldCustomObjectType.airFriction=Number(this.newCustomObjectType.airFriction),this.oldCustomObjectType.friction=Number(this.newCustomObjectType.friction),this.oldCustomObjectType.density=Number(this.newCustomObjectType.density),this.oldCustomObjectType.angularVelocity=Number(this.newCustomObjectType.angularVelocity),this.oldCustomObjectType.numSidesPolygon=Number(this.newCustomObjectType.numSidesPolygon),this.oldCustomObjectType.image.imageSourceType=this.newCustomObjectType.image.imageSourceType,this.oldCustomObjectType.image.imageId=this.newCustomObjectType.image.imageId,this.newCustomObjectType.image.imageSourceType==s.default.UPLOAD?this.oldCustomObjectType.image.customImage=this.util.findElementByUid(this.mainController.gameParamsJson.customImages,this.newCustomObjectType.image.customImage.uid):this.oldCustomObjectType.image.customImage=null,null!=this.newCustomObjectType.color&&(this.oldCustomObjectType.color=new n.default(this.newCustomObjectType.color.red,this.newCustomObjectType.color.green,this.newCustomObjectType.color.blue)),null!=this.newCustomObjectType.borderColor&&(this.oldCustomObjectType.borderColor=new n.default(this.newCustomObjectType.borderColor.red,this.newCustomObjectType.borderColor.green,this.newCustomObjectType.borderColor.blue)),this.oldCustomObjectType=null,this.newCustomObjectType=null,this.mainController.updateObjectTypesWithMiniatures(),this.mainController.autoSave())},e.prototype.cancelChangesCustomObjectType=function(){this.mainController.setCurrentTab("CUSTOM_OBJECT_TYPES"),this.errorMessage=null,this.errorField=null,this.oldCustomObjectType=null,this.newCustomObjectType=null},e.prototype.deleteCustomObjectType=function(e){var t=this.mainController.gameParamsJson.customObjectTypes[e],i=this.validateDelete(t);return 0==i.success?i:(this.mainController.gameParamsJson.customObjectTypes.splice(e,1),this.mainController.updateObjectTypesWithMiniatures(),{success:!0})},e.prototype.validateDelete=function(e){for(var t=this.mainController.gameParamsJson.levels,i=0;i<t.length;i++)for(var n=t[i],o=0;o<n.initialObjects.length;o++){if(n.initialObjects[o].objectType.uid==e.uid)return{success:!1,errorMessage:"Object type '"+e.id+"' cannot be deleted because it's being used at level '"+n.name+"'."}}return{success:!0}},e.prototype.showCustomObjectTypeBehaviours=function(e){this.editCustomObjectType(e),this.mainController.setCurrentTab2("CUSTOM_OBJECT_TYPE_BEHAVIOURS")},e}();t.default=h},function(e,t,i){"use strict";t.__esModule=!0;var n=i(35),o=i(7),r=i(6),a=i(25),s=i(17),l=i(8),u=i(0),d=function(){function e(e){this.genericService=new s.default,this.variableCategories=this.genericService.getVariableCategories(),this.textDefinitions=new Array,this.textAttributes=[{code:"text"},{code:"color"},{code:"x"},{code:"y"},{code:"fontSize"},{code:"fontFamily"},{code:"align"},{code:"zIndex"},{code:"alpha"},{code:"angle"}],this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new u.default}return e.prototype.loadTextDefinitions=function(){this.textDefinitions=[];for(var e=0;e<this.mainController.gameParamsJson.levels.length;e++)for(var t=this.mainController.gameParamsJson.levels[e],i=0;i<t.texts.length;i++){var n=t.texts[i];this.textDefinitions.push(n)}},e.prototype.validate=function(){if(this.errorMessage=null,this.errorField=null,null==this.mainController.newEventAction.type||this.mainController.newEventAction.type.code==o.default.EMPTY.code)return this.errorMessage='Field "type" is required.',this.errorField="type",!1;if((this.mainController.newEventAction.type.code==o.default.SET_GLOBAL_VARIABLE.code||this.mainController.newEventAction.type.code==o.default.ADD_TO_GLOBAL_VARIABLE.code)&&null==this.mainController.newEventAction.variable)return this.errorMessage='Field "variable" is required.',this.errorField="variable",!1;if(!(this.mainController.newEventAction.type.code!=o.default.SET_LEVEL_VARIABLE.code&&this.mainController.newEventAction.type.code!=o.default.ADD_TO_LEVEL_VARIABLE.code||null!=this.mainController.newEventAction.levelVariable&&null!=this.mainController.newEventAction.levelVariable.uid))return this.errorMessage='Field "level variable" is required.',this.errorField="levelVariable",!1;if(this.mainController.newEventAction.type.code==o.default.CREATE_CUSTOM_OBJECT.code){if(null==this.mainController.newEventAction.customObjectType||null==this.mainController.newEventAction.customObjectType.uid)return this.errorMessage='Field "object type" is required.',this.errorField="customObjectType",!1;if(this.mainController.newEventAction.saveToVariable)if(this.mainController.newEventAction.variableCategory==a.default.GLOBAL_VARIABLE){if(null==this.mainController.newEventAction.globalVariable.uid)return this.errorMessage='Field "global variable" is required.',this.errorField="globalVariable",!1}else if(this.mainController.newEventAction.variableCategory==a.default.LEVEL_VARIABLE&&null==this.mainController.newEventAction.levelVariable.uid)return this.errorMessage='Field "level variable" is required.',this.errorField="levelVariable",!1}if(this.mainController.newEventAction.type.code==o.default.SHOOT_OBJECT.code){if(null==this.mainController.newEventAction.customObjectType||null==this.mainController.newEventAction.customObjectType.uid)return this.errorMessage='Field "object type" is required.',this.errorField="customObjectType",!1;if(this.mainController.newEventAction.saveToVariable)if(this.mainController.newEventAction.variableCategory==a.default.GLOBAL_VARIABLE){if(null==this.mainController.newEventAction.globalVariable.uid)return this.errorMessage='Field "global variable" is required.',this.errorField="globalVariable",!1}else if(this.mainController.newEventAction.variableCategory==a.default.LEVEL_VARIABLE&&null==this.mainController.newEventAction.levelVariable.uid)return this.errorMessage='Field "level variable" is required.',this.errorField="levelVariable",!1}if(this.mainController.newEventAction.type.code==o.default.ADD_CONSTRAINT.code){if(this.getPhysicsEngineType(this.mainController.newEventAction.objectSelectorDefinition1)!=l.default.MATTER_JS)return this.errorMessage="You must select an object that has physics engine of type Matter.js",this.errorField="object1",!1;if(this.mainController.newEventAction.constraintType==n.default.FIXED_DISTANCE_BETWEEN_TWO_OBJECTS)if(this.getPhysicsEngineType(this.mainController.newEventAction.objectSelectorDefinition2)!=l.default.MATTER_JS)return this.errorMessage="You must select an object that has physics engine of type Matter.js",this.errorField="object2",!1}return!0},e.prototype.getPhysicsEngineType=function(e){var t,i,n,o;return e.type==r.default.LOOP_OBJECT?null===(t=null==(o=this.mainController.currentLocalVariables.find((function(t){return t.name==e.loopVariableName})))?void 0:o.objectType)||void 0===t?void 0:t.physicsEngineType:e.type==r.default.GLOBAL_VARIABLE?null===(i=null==(o=this.mainController.gameParamsJson.globalVariables.find((function(t){var i;return t.uid==(null===(i=e.variable)||void 0===i?void 0:i.uid)})))?void 0:o.objectType)||void 0===i?void 0:i.physicsEngineType:e.type==r.default.LEVEL_VARIABLE?null===(n=null==(o=this.mainController.currentScript.level.levelVariables.find((function(t){var i;return t.uid==(null===(i=e.variable)||void 0===i?void 0:i.uid)})))?void 0:o.objectType)||void 0===n?void 0:n.physicsEngineType:null},e}();t.default=d},function(e,t,i){"use strict";t.__esModule=!0;var n=i(15),o=i(2),r=i(104),a=i(32),s=i(10),l=i(5),u=i(28),d=i(19),c=i(0),h=function(){function e(e){this.oldLevel=null,this.newLevel=null,this.currentLevelIndex=null,this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new c.default}return e.prototype.addLevel=function(){var e=new d.default;e.name=this.generateLevelName("Level "),e.uid=this.util.uid(),e.backgroundType=n.default.SOLID_COLOR,e.backgroundColor=new o.default(255,255,255),e.backgroundImageWidth=64,e.backgroundImageHeight=64,e.gravity=1e3,e.electricConstant=0,e.levelVariables=new Array,e.initialObjects=new Array,e.texts=new Array,e.buttons=new Array,e.applyGravitationalForceBetweenObjects=!1,e.gravitationalConstant=0;var t=new l.default;t.imageSourceType=u.default.LIBRARY,t.imageId="images/asset-packs/kenney/2d/voxel-pack/png/tiles/greystone.png",e.backgroundImage=t;var i=new s.default;i.uid=this.util.uid(),i.type=a.default.LEVEL_SCRIPT,i.trigger=r.default.ON_CREATE,i.name="",i.description="",i.blocks=new Array,i.level=e;var c=new s.default;c.uid=this.util.uid(),c.type=a.default.LEVEL_SCRIPT,c.trigger=r.default.ON_ANIMATION_FRAME,c.name="",c.description="",c.blocks=new Array,c.level=e,e.scriptOnLevelStart=i,e.scriptOnAnimationFrame=c,this.mainController.gameParamsJson.levels.push(e)},e.prototype.moveLevelUp=function(e){this.util.arrayMove(this.mainController.gameParamsJson.levels,e,e-1)},e.prototype.moveLevelDown=function(e){this.util.arrayMove(this.mainController.gameParamsJson.levels,e,e+1)},e.prototype.deleteLevel=function(e){this.mainController.gameParamsJson.levels.splice(e,1)},e.prototype.showLevelVariables=function(e){this.editLevel(e),this.mainController.currentTab2="LEVEL_VARIABLES"},e.prototype.showInitialObjects=function(e){this.editLevel(e),this.mainController.currentTab2="INITIAL_OBJECTS"},e.prototype.editLevel=function(e){var t=this.mainController.gameParamsJson.levels[e];this.oldLevel=t,this.newLevel=this.util.cloneObject(t),this.currentLevelIndex=e,this.mainController.setCurrentTab2(this.mainController.previousLevelTab),this.mainController.currentScript=this.oldLevel.scriptOnAnimationFrame},e.prototype.cancelChangesLevel=function(){this.mainController.setCurrentTab("LEVELS"),this.errorMessage=null,this.errorField=null,this.oldLevel=null,this.newLevel=null},e.prototype.updateLevel=function(){this.validateLevel()&&(this.mainController.setCurrentTab("LEVELS"),this.oldLevel.name=this.newLevel.name,this.oldLevel.backgroundType=this.newLevel.backgroundType,this.oldLevel.backgroundImage.imageId=this.newLevel.backgroundImage.imageId,this.oldLevel.backgroundImage.imageSourceType=this.newLevel.backgroundImage.imageSourceType,this.oldLevel.backgroundImage.customImage=this.newLevel.backgroundImage.customImage,this.oldLevel.backgroundImageWidth=Number(this.newLevel.backgroundImageWidth),this.oldLevel.backgroundImageHeight=Number(this.newLevel.backgroundImageHeight),this.oldLevel.backgroundColor=new o.default(Number(this.newLevel.backgroundColor.red),Number(this.newLevel.backgroundColor.green),Number(this.newLevel.backgroundColor.blue),100),this.oldLevel.gravity=Number(this.newLevel.gravity),this.oldLevel.electricConstant=Number(this.newLevel.electricConstant),this.oldLevel.centerCameraAtObject=this.newLevel.centerCameraAtObject,this.oldLevel.centerCameraAtObjectTypeId=this.newLevel.centerCameraAtObjectTypeId,this.oldLevel.applyGravitationalForceBetweenObjects=this.newLevel.applyGravitationalForceBetweenObjects,this.oldLevel.gravitationalConstant=this.newLevel.gravitationalConstant,this.oldLevel=null,this.newLevel=null,this.mainController.autoSave())},e.prototype.validateLevel=function(){this.errorMessage=null,this.errorField=null;var e=this.getLevelByName(this.newLevel.name);return null==e||e.uid==this.newLevel.uid||(this.errorMessage="There is already another level with that name. Choose another one.",this.errorField="name",!1)},e.prototype.generateLevelName=function(e){for(var t=1,i=e+t;this.levelNameAlreadyExists(i);)i=e+ ++t;return i},e.prototype.getLevelByName=function(e){return this.mainController.gameParamsJson.levels.find((function(t){return t.name==e}))},e.prototype.levelNameAlreadyExists=function(e){return null!=this.getLevelByName(e)},e}();t.default=h},function(e,t,i){"use strict";var n;t.__esModule=!0,function(e){e.ON_CREATE="ON_CREATE",e.ON_ANIMATION_FRAME="ON_ANIMATION_FRAME",e.ON_DESTROY="ON_DESTROY"}(n||(n={})),t.default=n},function(e,t,i){"use strict";t.__esModule=!0;var n=i(32),o=i(10),r=i(0),a=function(){function e(e){this.newVisualScriptFunction=null,this.oldVisualScriptFunction=null,this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new r.default}return e.prototype.openPopupAddVisualScriptFunction=function(){this.errorMessage=null,this.errorField=null;var e=new o.default;e.name="new function",e.description="",this.newVisualScriptFunction=e},e.prototype.addVisualScriptFunction=function(){if(!this.validateAddOrUpdate())return!1;var e=new o.default;return e.uid=this.util.uid(),e.type=n.default.FUNCTION,e.name=this.newVisualScriptFunction.name,e.description=this.newVisualScriptFunction.description,e.blocks=new Array,this.mainController.gameParamsJson.visualScriptFunctions.push(e),this.mainController.visualScriptsController.setCurrentFunction(e.uid),!0},e.prototype.clearErrorMessage=function(){this.errorMessage=null,this.errorField=null},e.prototype.editVisualScriptFunction=function(e){this.mainController.setCurrentScreen("EDIT_FUNCTION"),this.errorMessage=null,this.errorField=null,this.oldVisualScriptFunction=e,this.newVisualScriptFunction=this.util.cloneObject(this.oldVisualScriptFunction)},e.prototype.validateDelete=function(e){for(var t=0;t<this.mainController.gameParamsJson.levels.length;t++){var i=this.mainController.gameParamsJson.levels[t];if(i.scriptOnAnimationFrame.containsFunction(e.uid))return this.errorMessage="Cannot delete this function because it's being used in level: "+i.name+" (On animation frame)",this.errorField=null,!1;if(i.scriptOnLevelStart.containsFunction(e.uid))return this.errorMessage="Cannot delete this function because it's being used in level: "+i.name+" (On level start)",this.errorField=null,!1}return!0},e.prototype.deleteVisualScriptFunction=function(e){if(!this.validateDelete(e))return!1;var t=this.mainController.gameParamsJson.visualScriptFunctions,i=t.findIndex((function(t){return t.uid==e.uid}));return t.splice(i,1),this.mainController.currentScript=null,!0},e.prototype.updateVisualScriptFunction=function(){this.validateAddOrUpdate()&&(this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.oldVisualScriptFunction.name=this.newVisualScriptFunction.name,this.oldVisualScriptFunction.description=this.newVisualScriptFunction.description,this.mainController.autoSave())},e.prototype.cancelChangesVisualScriptFunction=function(){this.mainController.setCurrentScreen("VISUAL_SCRIPTS_EDITOR"),this.errorMessage=null,this.errorField=null,this.oldVisualScriptFunction=null,this.newVisualScriptFunction=null},e.prototype.validateAddOrUpdate=function(){var e=this;if(this.errorMessage=null,this.errorField=null,null==this.newVisualScriptFunction.name||""==this.newVisualScriptFunction.name.trim())return this.errorMessage='Field "name" is required.',this.errorField="name",!1;var t=this.mainController.gameParamsJson.visualScriptFunctions.find((function(t){return t.name==e.newVisualScriptFunction.name}));return null==t||t.uid==this.newVisualScriptFunction.uid||(this.errorMessage="There is already another function with that name. Choose another name.",this.errorField="name",!1)},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=i(8),o=i(12),r=i(0),a=i(1),s=i(37),l=i(7),u=i(18),d=i(4),c=i(3),h=i(13),p=i(32),m=function(){function e(){this.util=new r.default}return e.prototype.adjustGameDefinitionPreliminary=function(e){this.adjustInitialObjects(e)},e.prototype.adjustGameDefinition=function(e){null==e.engineVersionOriginal&&(e.engineVersionOriginal=e.engineVersion),null==e.framerateType&&(e.framerateType=u.default.UNLIMITED),null==e.maxDeltaTime&&(e.maxDeltaTime=50),null==e.hasFixedDeltaTime&&(e.hasFixedDeltaTime=!1),null==e.fixedDeltaTime&&(e.fixedDeltaTime=16.66),this.adjustObjectTypes(e),this.adjustInitialObjects(e),null==e.visualScriptFunctions&&(e.visualScriptFunctions=new Array),this.adjustLevels(e);for(var t=e.visualScriptFunctions,i=0;i<t.length;i++)for(var n=t[i].blocks,o=0;o<n.length;o++){var r=n[o];this.adjustBlocksForCompatibility(r,e.engineVersion)}},e.prototype.adjustInitialObjects=function(e){for(var t=0;t<e.levels.length;t++)for(var i=e.levels[t],n=0;n<i.initialObjects.length;n++){var o=i.initialObjects[n];null==o.angle&&(o.angle=0),null==o.uid&&(o.uid=this.util.uid())}},e.prototype.adjustLevels=function(e){for(var t=e.levels,i=0;i<t.length;i++){var n=t[i];null==n.initialConstraints&&(n.initialConstraints=[]),null==n.scriptOnAnimationFrame.type&&(n.scriptOnAnimationFrame.type=p.default.LEVEL_SCRIPT),null==n.scriptOnLevelStart.type&&(n.scriptOnLevelStart.type=p.default.LEVEL_SCRIPT);for(var o=n.scriptOnAnimationFrame.blocks,r=0;r<o.length;r++){var a=o[r];this.adjustBlocksForCompatibility(a,e.engineVersion)}var s=n.scriptOnLevelStart.blocks;for(r=0;r<s.length;r++){a=s[r];this.adjustBlocksForCompatibility(a,e.engineVersion)}this.adjustTexts(n)}},e.prototype.adjustObjectTypes=function(e){for(var t=e.customObjectTypes,i=0;i<t.length;i++){var r=t[i];null==r.animations&&(r.animations=new Array),null==r.physicsEngineType&&(r.physicsEngineType=n.default.BASIC),null==r.isStatic&&(r.isStatic=!1),null==r.isSensor&&(r.isSensor=!1),null==r.airFriction&&(r.airFriction=.01),null==r.friction&&(r.friction=.1),null==r.restitution&&(r.restitution=0),null==r.density&&(r.density=.001),null==r.angularVelocity&&(r.angularVelocity=0),null==r.shape&&(r.shape=o.default.RECTANGLE),null==r.numSidesPolygon&&(r.numSidesPolygon=3),this.adjustBehaviours(r)}},e.prototype.adjustBehaviours=function(e){var t=e.behaviours;null==t&&(t=[]);for(var i=0;i<t.length;i++){var n=t[i];null==n.platformObjectTypes&&(n.platformObjectTypes=[])}},e.prototype.adjustTexts=function(e){for(var t=e.texts,i=0;i<t.length;i++){var n=t[i];null==n.name&&(n.name=n.text),null==n.alpha&&(n.alpha=1),null==n.angle&&(n.angle=0)}},e.prototype.adjustBlocksForCompatibility=function(e,t){if(e.blockType==h.default.ACTION){var i=e.actionBlock.action;null==i.objectSelectorDefinition1&&(i.objectSelectorDefinition1=new d.default,i.objectSelectorDefinition1.objectType=new a.default,i.objectSelectorDefinition1.variable=new c.default),null==i.objectSelectorDefinition2&&(i.objectSelectorDefinition2=new d.default,i.objectSelectorDefinition2.objectType=new a.default,i.objectSelectorDefinition2.variable=new c.default),i.type.code!=l.default.SET_CAMERA_CENTER_X.code&&i.type.code!=l.default.SET_CAMERA_CENTER_Y.code&&i.type.code!=l.default.SET_ZOOM.code&&i.type.code!=l.default.MULTIPLY_ZOOM.code&&i.type.code!=l.default.SET_CANVAS_ANGLE.code||(i.category=s.default.CAMERA),i.type.code==l.default.SET_OBJECT_IMAGE_ANGLE.code&&(null==t||this.util.isVersionLessThan(t,"v0.5.13"))&&(i.angle="-("+i.angle+")"),i.type.code!=l.default.DRAW_ARC.code&&i.type.code!=l.default.DRAW_CIRCLE.code&&i.type.code!=l.default.DRAW_IMAGE.code&&i.type.code!=l.default.DRAW_LINE.code&&i.type.code!=l.default.DRAW_PERCENTAGE_BAR.code&&i.type.code!=l.default.DRAW_RECT.code&&i.type.code!=l.default.DRAW_TEXT.code||null==i.alpha&&(i.alpha="1")}else if(e.blockType==h.default.CONDITION){var n=e.conditionBlock;null==n.condition.mouseButton&&(n.condition.mouseButton="-1");for(var o=n.ifBlocks,r=0;r<o.length;r++)this.adjustBlocksForCompatibility(o[r],t);var u=n.elseBlocks;for(r=0;r<u.length;r++)this.adjustBlocksForCompatibility(u[r],t)}else if(e.blockType==h.default.LOOP){var p=e.loopBlock.blocks;for(r=0;r<p.length;r++)this.adjustBlocksForCompatibility(p[r],t)}},e}();t.default=m},function(e,t,i){"use strict";t.__esModule=!0;var n=i(2),o=i(39),r=i(8),a=i(0),s=function(){function e(e){this.oldInitialConstraint=null,this.newInitialConstraint=null,this.errorMessage=null,this.errorField=null,this.mainController=e,this.util=new a.default}return e.prototype.addConstraintBetweenSelectedObjects=function(){var e=this.mainController.levelPreviewViewModel.selectedElements;if(2!=e.length)return{success:!1};if(null==e[0].initialObject)return{success:!1};if(null==e[1].initialObject)return{success:!1};if(e[0].initialObject.objectType.physicsEngineType!=r.default.MATTER_JS)return{success:!1,errorMessage:'Object "'+e[0].initialObject.objectType.id+'" is not of Matter.js physics engine. To add a constraint, both objects must be of Matter.js physics engine.'};if(e[1].initialObject.objectType.physicsEngineType!=r.default.MATTER_JS)return{success:!1,errorMessage:'Object "'+e[1].initialObject.objectType.uid+'" is not of Matter.js physics engine. To add a constraint, both objects must be of Matter.js physics engine.'};var t=e[0].initialObject,i=e[1].initialObject,a=new o.default;a.uid=this.util.uid(),a.name=this.generateInitialConstraintName(),a.object1=t,a.object2=i,a.alpha=1,a.color=new n.default(0,0,0),a.damping=0,a.lineWidth=2,a.stiffness=1,a.visible=!0,a.x1=0,a.y1=0,a.x2=0,a.y2=0,a.zIndex=0;var s=this.mainController.levelController.currentLevelIndex;return this.mainController.gameParamsJson.levels[s].initialConstraints.push(a),{success:!0}},e.prototype.deleteObjectConstraints=function(e){for(var t=this.mainController.levelController.currentLevelIndex,i=this.mainController.gameParamsJson.levels[t],n=i.initialConstraints,o=n.length-1;o>=0;o--){var r=n[o];r.object1!=e&&r.object2!=e||i.initialConstraints.splice(o,1)}},e.prototype.deleteInitialConstraint=function(e){for(var t=this.mainController.levelController.currentLevelIndex,i=this.mainController.gameParamsJson.levels[t].initialConstraints,n=null,o=0;o<i.length;o++)i[o].uid==e&&(n=o);this.mainController.gameParamsJson.levels[t].initialConstraints.splice(n,1)},e.prototype.editInitialConstraint=function(e){this.mainController.setCurrentScreen("EDIT_INITIAL_CONSTRAINT"),this.oldInitialConstraint=e,this.newInitialConstraint=this.util.cloneObject(this.oldInitialConstraint)},e.prototype.cancelChangesInitialConstraint=function(){this.mainController.setCurrentScreen("INITIAL_OBJECTS"),this.errorMessage=null,this.errorField=null,this.oldInitialConstraint=null,this.newInitialConstraint=null},e.prototype.updateInitialConstraint=function(){this.validateInitialConstraint()&&(this.mainController.setCurrentScreen("INITIAL_OBJECTS"),this.oldInitialConstraint.name=this.newInitialConstraint.name,this.oldInitialConstraint.x1=Number(this.newInitialConstraint.x1),this.oldInitialConstraint.y1=Number(this.newInitialConstraint.y1),this.oldInitialConstraint.x2=Number(this.newInitialConstraint.x2),this.oldInitialConstraint.y2=Number(this.newInitialConstraint.y2),this.oldInitialConstraint.damping=Number(this.newInitialConstraint.damping),this.oldInitialConstraint.stiffness=Number(this.newInitialConstraint.stiffness),this.oldInitialConstraint.visible=this.newInitialConstraint.visible,this.oldInitialConstraint.lineWidth=Number(this.newInitialConstraint.lineWidth),this.oldInitialConstraint.alpha=Number(this.newInitialConstraint.alpha),this.oldInitialConstraint.zIndex=Number(this.newInitialConstraint.zIndex),null!=this.newInitialConstraint.color&&(this.oldInitialConstraint.color=new n.default(this.newInitialConstraint.color.red,this.newInitialConstraint.color.green,this.newInitialConstraint.color.blue)),this.oldInitialConstraint=null,this.newInitialConstraint=null,this.mainController.autoSave())},e.prototype.validateInitialConstraint=function(){this.errorMessage=null,this.errorField=null;var e=this.getInitialConstraintByName(this.newInitialConstraint.name);return null==e||e.uid==this.newInitialConstraint.uid||(this.errorMessage="There is already another constraint with that name. Choose another one.",this.errorField="name",!1)},e.prototype.generateInitialConstraintName=function(){for(var e=1,t="constraint"+e;this.initialConstraintNameAlreadyExists(t);)t="constraint"+ ++e;return t},e.prototype.getInitialConstraintByName=function(e){var t=this.mainController.levelController.currentLevelIndex;return this.mainController.gameParamsJson.levels[t].initialConstraints.find((function(t){return t.name==e}))},e.prototype.initialConstraintNameAlreadyExists=function(e){return null!=this.getInitialConstraintByName(e)},e}();t.default=s},function(e,t,i){"use strict";t.__esModule=!0;var n=i(17),o=i(0),r=i(18),a=function(){function e(e){this.genericService=new n.default,this.errorMessage=null,this.errorField=null,this.framerateTypes=this.genericService.getFpsTypes(),this.framerateType=null,this.maxFps=null,this.maxDeltaTime=null,this.hasFixedDeltaTime=!1,this.fixedDeltaTime=null,this.mainController=e,this.util=new o.default}return e.prototype.editAdvancedSettings=function(){this.framerateType=this.mainController.gameParamsJson.framerateType,this.maxFps=this.mainController.gameParamsJson.maxFps,this.maxDeltaTime=this.mainController.gameParamsJson.maxDeltaTime,this.hasFixedDeltaTime=this.mainController.gameParamsJson.hasFixedDeltaTime,this.fixedDeltaTime=this.mainController.gameParamsJson.fixedDeltaTime},e.prototype.updateAdvancedSettings=function(){this.mainController.gameParamsJson.framerateType=this.framerateType,this.mainController.gameParamsJson.maxFps=Number(this.maxFps),this.mainController.gameParamsJson.maxDeltaTime=Number(this.maxDeltaTime),this.mainController.gameParamsJson.hasFixedDeltaTime=this.hasFixedDeltaTime,this.mainController.gameParamsJson.fixedDeltaTime=Number(this.fixedDeltaTime),this.validate()&&this.mainController.setCurrentScreen("GAME_PROPERTIES")},e.prototype.cancelChanges=function(){this.mainController.setCurrentScreen("GAME_PROPERTIES")},e.prototype.validate=function(){if(this.errorMessage=null,this.errorField=null,1==this.hasFixedDeltaTime){if(null==this.fixedDeltaTime)return this.errorMessage='Field "Fixed delta time" is required.',this.errorField="fixedDeltaTime",!1;if(isNaN(this.fixedDeltaTime))return this.errorMessage='Field "Fixed delta time" must be a number.',this.errorField="fixedDeltaTime",!1;if(this.fixedDeltaTime<=0)return this.errorMessage='Field "Fixed delta time" must be a positive number.',this.errorField="fixedDeltaTime",!1}else{if(this.framerateType==r.default.CUSTOM){if(null==this.maxFps)return this.errorMessage='Field "Max FPS" is required.',this.errorField="maxFps",!1;if(isNaN(this.maxFps))return this.errorMessage='Field "Max FPS" must be a number.',this.errorField="maxFps",!1;if(this.maxFps<=0)return this.errorMessage='Field "Max FPS" must be a positive number.',this.errorField="maxFps",!1}if(null==this.maxDeltaTime)return this.errorMessage='Field "Max delta time" is required.',this.errorField="maxDeltaTime",!1;if(isNaN(this.maxDeltaTime))return this.errorMessage='Field "Max delta time" must be a number.',this.errorField="maxDeltaTime",!1;if(this.maxDeltaTime<=0)return this.errorMessage='Field "Max delta time" must be a positive number.',this.errorField="maxDeltaTime",!1}return!0},e}();t.default=a},function(e,t,i){"use strict";t.__esModule=!0;var n=function(){function e(e){this.gameLoopUnlimitedFps=null,this.gameLoopLimitedFps=null,this.gameLoopFixedDelta=null,this.loopLevelEditor=null,this.isRenderingGame=!1,this.gameLoopUnlimitedFps=this.buildLoopUnlimitedFps(e),this.gameLoopLimitedFps=this.buildLoopLimitedFps(e),this.gameLoopFixedDelta=this.buildLoopFixedDelta(e),this.loopLevelEditor=this.buildLoopLevelEditor(e)}return e.prototype.startLoopUnlimitedFps=function(){this.isRenderingGame||(window.requestAnimationFrame(this.gameLoopUnlimitedFps),this.isRenderingGame=!0)},e.prototype.startLoopLimitedFps=function(){this.isRenderingGame||(window.requestAnimationFrame(this.gameLoopLimitedFps),this.isRenderingGame=!0)},e.prototype.startLoopFixedDelta=function(){this.isRenderingGame||(window.requestAnimationFrame(this.gameLoopFixedDelta),this.isRenderingGame=!0)},e.prototype.startLoopLevelEditor=function(){window.requestAnimationFrame(this.loopLevelEditor)},e.prototype.buildLoopUnlimitedFps=function(e){var t=this,i=function(){var n,o=performance.now();null==e.lastUpdateTime&&(e.lastUpdateTime=o);var r=o-e.lastUpdateTime;e.lastUpdateTime=o;var a=(null===(n=e.gameDefinition)||void 0===n?void 0:n.maxDeltaTime)||1,s=Math.min(r,a);try{null!=e.actionTemplate&&e.actionTemplate.loop(s,r)}catch(t){e.editGame(),e.onGameError(t)}e.isPlayingGame?window.requestAnimationFrame(i):t.isRenderingGame=!1};return i},e.prototype.buildLoopLimitedFps=function(e){var t=this,i=function(){var n,o=performance.now();null==e.lastUpdateTime&&(e.lastUpdateTime=o);var r=o-e.lastUpdateTime;if(null==e.minDelta||r+e.deltaCredit>=e.minDelta){var a=r-e.minDelta;e.lastUpdateTime=o,e.deltaCredit+=a,e.deltaCredit=e.deltaCredit%e.minDelta;var s=(null===(n=e.gameDefinition)||void 0===n?void 0:n.maxDeltaTime)||1,l=Math.min(r,s);try{null!=e.actionTemplate?e.actionTemplate.loop(l,r):e.levelPreviewViewModel.drawPreview()}catch(t){e.editGame(),e.onGameError(t)}e.isPlayingGame?window.requestAnimationFrame(i):t.isRenderingGame=!1}else e.isPlayingGame?window.requestAnimationFrame(i):t.isRenderingGame=!1};return i},e.prototype.buildLoopFixedDelta=function(e){var t=this,i=function(){var n=performance.now();null==e.lastUpdateTime&&(e.lastUpdateTime=n);var o=n-e.lastUpdateTime;if(o+e.deltaCredit>=e.gameDefinition.fixedDeltaTime){e.deltaCredit=(o+e.deltaCredit)%e.gameDefinition.fixedDeltaTime,e.lastUpdateTime=n;try{null!=e.actionTemplate&&e.actionTemplate.loop(e.gameDefinition.fixedDeltaTime,o)}catch(t){e.editGame(),e.onGameError(t)}e.isPlayingGame?window.requestAnimationFrame(i):t.isRenderingGame=!1}else e.isPlayingGame?window.requestAnimationFrame(i):t.isRenderingGame=!1};return i},e.prototype.buildLoopLevelEditor=function(e){var t=function(){try{e.isPlayingGame||(e.levelPreviewViewModel.drawPreview(),window.requestAnimationFrame(t))}catch(t){e.editGame(),e.onGameError(t)}};return t},e}();t.default=n}]);